# ğŸ”§ npm å‘å¸ƒé—®é¢˜ä¿®å¤æŒ‡å—

## é—®é¢˜è¯Šæ–­

æ ¹æ®é”™è¯¯ä¿¡æ¯ï¼Œä¸»è¦é—®é¢˜æ˜¯ï¼š
1. âŒ **403 Forbidden** - éœ€è¦å¯ç”¨åŒå› ç´ è®¤è¯(2FA)æ‰èƒ½å‘å¸ƒåŒ…
2. âŒ **Two-factor authentication required** - npmè¦æ±‚å¿…é¡»å¯ç”¨2FAæ‰èƒ½å‘å¸ƒåŒ…

## âœ… ä¿®å¤æ­¥éª¤

### æ­¥éª¤ 1: æ¸…é™¤æ—§çš„è®¤è¯ä¿¡æ¯

```powershell
npm logout
```

### æ­¥éª¤ 2: ç¡®ä¿ä½¿ç”¨å®˜æ–¹registry

```powershell
npm config set registry https://registry.npmjs.org/
npm config get registry
```

åº”è¯¥æ˜¾ç¤ºï¼š`https://registry.npmjs.org/`

### æ­¥éª¤ 3: å¯ç”¨åŒå› ç´ è®¤è¯(2FA) âš ï¸ **å¿…é¡»æ­¥éª¤**

npmç°åœ¨è¦æ±‚**å¿…é¡»å¯ç”¨2FA**æ‰èƒ½å‘å¸ƒåŒ…ã€‚

#### æ–¹å¼ä¸€ï¼šåœ¨npmç½‘ç«™ä¸Šå¯ç”¨2FAï¼ˆæ¨èï¼‰

1. è®¿é—®ï¼šhttps://www.npmjs.com/settings/qingyuai/security
2. æ‰¾åˆ° "Two-factor authentication" éƒ¨åˆ†
3. ç‚¹å‡» "Enable 2FA" æˆ– "Edit"
4. é€‰æ‹©è®¤è¯æ–¹å¼ï¼š
   - **Authenticator app**ï¼ˆæ¨èï¼‰ï¼šä½¿ç”¨Google Authenticatorã€Authyç­‰
   - **SMS**ï¼šä½¿ç”¨æ‰‹æœºçŸ­ä¿¡
5. æŒ‰ç…§æç¤ºå®Œæˆè®¾ç½®
6. ä¿å­˜æ¢å¤ç ï¼ˆé‡è¦ï¼ï¼‰

#### æ–¹å¼äºŒï¼šä½¿ç”¨npmå‘½ä»¤è¡Œå¯ç”¨

```powershell
npm profile enable-2fa auth-and-writes
```

è¿™ä¼šå¯ç”¨2FAå¹¶è¦æ±‚åœ¨å‘å¸ƒæ—¶è¿›è¡ŒéªŒè¯ã€‚

### æ­¥éª¤ 4: é‡æ–°ç™»å½•npm

å¯ç”¨2FAåï¼Œé‡æ–°ç™»å½•ï¼š

```powershell
npm login
```

**è¾“å…¥ä¿¡æ¯ï¼š**
- Username: ä½ çš„npmç”¨æˆ·å
- Password: ä½ çš„npmå¯†ç   
- Email: ä½ çš„é‚®ç®±åœ°å€
- **OTP**: è¾“å…¥2FAéªŒè¯ç ï¼ˆä»è®¤è¯å™¨appæˆ–çŸ­ä¿¡è·å–ï¼‰

### æ­¥éª¤ 5: éªŒè¯ç™»å½•çŠ¶æ€

```powershell
npm whoami
```

åº”è¯¥æ˜¾ç¤ºä½ çš„npmç”¨æˆ·åã€‚

### æ­¥éª¤ 6: æ£€æŸ¥åŒ…æƒé™

```powershell
npm view build-deploy-tools
```

ç¡®è®¤ä½ èƒ½çœ‹åˆ°åŒ…ä¿¡æ¯ï¼Œè¯´æ˜ä½ æœ‰è®¿é—®æƒé™ã€‚

### æ­¥éª¤ 7: éªŒè¯æ‰“åŒ…

```powershell
npm pack --dry-run
```

æ£€æŸ¥æ‰“åŒ…å†…å®¹æ˜¯å¦æ­£ç¡®ã€‚

### æ­¥éª¤ 8: å‘å¸ƒåˆ°npm

```powershell
npm publish
```

## ğŸš€ å¿«é€Ÿä¿®å¤æµç¨‹

### ç¬¬ä¸€æ­¥ï¼šå¯ç”¨2FAï¼ˆå¿…é¡»åœ¨npmç½‘ç«™å®Œæˆï¼‰
è®¿é—®ï¼šhttps://www.npmjs.com/settings/qingyuai/security

### ç¬¬äºŒæ­¥ï¼šå‘½ä»¤è¡Œæ“ä½œ

```powershell
# æ¸…é™¤æ—§è®¤è¯
npm logout

# è®¾ç½®å®˜æ–¹registry
npm config set registry https://registry.npmjs.org/

# é‡æ–°ç™»å½•ï¼ˆéœ€è¦è¾“å…¥2FAéªŒè¯ç ï¼‰
npm login

# éªŒè¯ç™»å½•
npm whoami

# å‘å¸ƒï¼ˆå‘å¸ƒæ—¶å¯èƒ½éœ€è¦å†æ¬¡è¾“å…¥2FAéªŒè¯ç ï¼‰
npm publish
```

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

1. **2FAæ˜¯å¿…é¡»çš„**: npmç°åœ¨**å¼ºåˆ¶è¦æ±‚**å¯ç”¨2FAæ‰èƒ½å‘å¸ƒåŒ…
2. **è®¤è¯æ–¹å¼é€‰æ‹©**:
   - **Authenticator app**ï¼ˆæ¨èï¼‰ï¼šæ›´å®‰å…¨ï¼Œä¸éœ€è¦æ‰‹æœºä¿¡å·
   - **SMS**ï¼šéœ€è¦æ‰‹æœºä¿¡å·ï¼Œå¯èƒ½å»¶è¿Ÿ
3. **ä¿å­˜æ¢å¤ç **: å¯ç”¨2FAæ—¶åŠ¡å¿…ä¿å­˜æ¢å¤ç ï¼Œä»¥é˜²ä¸¢å¤±è®¾å¤‡
4. **å‘å¸ƒæ—¶éœ€è¦OTP**: æ¯æ¬¡å‘å¸ƒæ—¶éƒ½éœ€è¦è¾“å…¥2FAéªŒè¯ç 
5. **æƒé™æ£€æŸ¥**: ç¡®ä¿ä½ æ˜¯ `build-deploy-tools` åŒ…çš„ç»´æŠ¤è€…
6. **ç‰ˆæœ¬å·**: ç¡®ä¿æœ¬åœ°ç‰ˆæœ¬(1.6.0)å¤§äºnpmä¸Šçš„ç‰ˆæœ¬(1.5.0)

## ğŸ” æ›¿ä»£æ–¹æ¡ˆï¼šä½¿ç”¨Granular Access Token

å¦‚æœä¸æƒ³å¯ç”¨2FAï¼Œå¯ä»¥ä½¿ç”¨Granular Access Tokenï¼ˆéœ€è¦bypass 2faæƒé™ï¼‰ï¼š

1. è®¿é—®ï¼šhttps://www.npmjs.com/settings/qingyuai/tokens
2. åˆ›å»ºæ–°çš„ "Granular Access Token"
3. é€‰æ‹©æƒé™ï¼š`Publish packages`
4. å¯ç”¨ "Bypass 2FA" é€‰é¡¹
5. ä½¿ç”¨tokenç™»å½•ï¼š
   ```powershell
   npm config set //registry.npmjs.org/:_authToken YOUR_TOKEN_HERE
   ```

## ğŸ“‹ å½“å‰çŠ¶æ€

- âœ… æœ¬åœ°ç‰ˆæœ¬: `1.6.0`
- âœ… npmæœ€æ–°ç‰ˆæœ¬: `1.5.0`
- âœ… Registry: `https://registry.npmjs.org/`
- â³ çŠ¶æ€: ç­‰å¾…é‡æ–°ç™»å½•åå‘å¸ƒ

## ğŸ”— ç›¸å…³é“¾æ¥

- [npmç™»å½•é¡µé¢](https://www.npmjs.com/login)
- [npmåŒ…é¡µé¢](https://www.npmjs.com/package/build-deploy-tools)
- [npm tokenç®¡ç†](https://www.npmjs.com/settings/qingyuai/tokens)

---

## ğŸ¯ ç«‹å³æ“ä½œæ­¥éª¤

### âš ï¸ å…³é”®æ­¥éª¤ï¼šå¯ç”¨2FA

**å¿…é¡»å®Œæˆ**ï¼šè®¿é—®ä»¥ä¸‹é“¾æ¥å¯ç”¨2FAï¼š
```
https://www.npmjs.com/settings/qingyuai/security
```

è¯¦ç»†æ­¥éª¤è¯·å‚è€ƒï¼š**[å¯ç”¨2FAæŒ‡å—.md](./å¯ç”¨2FAæŒ‡å—.md)**

### å¯ç”¨2FAåçš„æ“ä½œ

1. é‡æ–°ç™»å½•ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼š
   ```powershell
   npm login
   ```
   è¾“å…¥2FAéªŒè¯ç 

2. å‘å¸ƒåŒ…ï¼š
   ```powershell
   npm publish
   ```
   å‘å¸ƒæ—¶å¯èƒ½éœ€è¦å†æ¬¡è¾“å…¥2FAéªŒè¯ç 

---

**ä¸‹ä¸€æ­¥**: **å¿…é¡»å…ˆå¯ç”¨2FA**ï¼Œç„¶åæ‰èƒ½å‘å¸ƒåŒ…ï¼
