"use strict";(self["webpackChunkmeetingvue3"]=self["webpackChunkmeetingvue3"]||[]).push([[2590],{20209:function(e,a,l){l.r(a),l.d(a,{default:function(){return R}});l(44114),l(14603),l(47566),l(98721);var t=l(20641),d=l(50953),n=l(71029),r=l(40834);const o={class:"Meeting"},s={style:{padding:"0 30px"}},u={class:"header"},i={class:"meetinginput"},m={class:"theday"},g={class:"thefirselect"},p={class:"thesedselect"},c={class:"meeting_table"},b={key:0},f={key:1},h={class:"block"},k=["src"];var v={__name:"meeting",props:{msg:String},setup(e,{expose:a}){const l=(0,n.rd)(),v=(0,r.Pj)(),{proxy:F}=(0,t.nI)(),C=e,{msg:R}=(0,d.QW)(C),_=(0,d.KR)(null),V=(0,d.Kh)({BaseUrl:"",name:"",value1:"",value:"",value2:"",userinfoid:"",form:{nameCn:"",nameEn:"",mstart:"",mend:"",addressCn:"",addressEn:"",imgbox:[],type_vue:1},uploadurl:window.location.origin+"/Committee/imageUploadF",uploadurlimg:window.location.origin+"/Committee/imageUpload",headers:{Cookies:localStorage.Cookie},options:[{label:"显示非隐藏的会议",value:"show"},{label:"显示隐藏的会议",value:"hidden"}],ascription:[{label:"我的会议",value:"show"},{label:"我协助的会议",value:"hide"}],tableData:[],dictTotal:0,dictCurrentPage:1,dictPageSize:10,start:"",end:"",dialogVisible:!1,fileList:[],rules:{nameCn:[{required:!0,message:"请输入大会名称",trigger:"blur"}],nameEn:[{required:!0,message:"请输入大会英文名称",trigger:"blur"}],mstart:[{type:"date",required:!0,message:"请选择开始时间",trigger:"change"}],mend:[{type:"date",required:!0,message:"请选择结束时间",trigger:"change"}],addressCn:[{required:!0,message:"请输入大会举办地点",trigger:"blur"}],addressEn:[{required:!0,message:"请输入大会举办地点",trigger:"blur"}]}}),{BaseUrl:y,name:w,value1:L,value:E,value2:U,userinfoid:z,form:$,uploadurl:D,uploadurlimg:W,headers:P,options:S,ascription:X,tableData:x,dictTotal:q,dictCurrentPage:I,dictPageSize:j,start:M,end:B,dialogVisible:Y,fileList:K,rules:T}=(0,d.QW)(V);function A(){V.BaseUrl=v.state.BaseUrl,H()}function Q(e,a){return e.address}function O(e,a){V.imageUrl=window.URL.createObjectURL(a.raw),V.form.image=e.list}function G(e){V.form.userfile=e}function H(){const e={type_vue:1,subject:V.name,hide:V.value,startDate:V.start,endDate:V.end,page:V.dictCurrentPage,per_page:V.dictPageSize};F.$Loadimg.showLoading(),F.$http.article.getMeetingList(e).then(e=>{F.$Loadimg.hideLoading(),1===e.data.status?(V.tableData=e.data.list,V.userinfoid=e.data.userinfoid,V.dictTotal=e.data.pageinfo.total):F.$message.error(e.data.msg)})}function J(){V.start=N(V.value1[0]),V.end=N(V.value1[1]),H()}function N(e){const a=new Date(e),l=a.getFullYear();let t=a.getMonth()+1;t=t<10?"0"+t:t;let d=a.getDate();d=d<10?"0"+d:d;const n=l+"-"+t+"-"+d;return n}function Z(e){V.dictPageSize=e,H()}function ee(e){V.dictCurrentPage=e,H()}function ae(e,a){sessionStorage.setItem("meeting",a.id),l.push({path:"/homePage",query:{meeting:a.id}})}function le(e){e.validate(e=>{if(!e)return!1;{V.form.mstart=N(V.form.mstart),V.form.mend=N(V.form.mend);const e={subject:V.form.nameCn,subjectEn:V.form.nameEn,startDate:V.form.mstart,endDate:V.form.mend,address:V.form.addressCn,addressEn:V.form.addressEn,image:V.form.image};F.$Loadimg.showLoading(),F.$http.article.addMeeting(e).then(e=>{F.$Loadimg.hideLoading(),1===e.data.status?(V.dialogVisible=!1,F.$message.success({message:e.data.msg}),H()):F.$message.error(e.data.msg)})}})}function te(e,a){}function de(e){}function ne(e,a){F.$message.warning(`当前限制选择 3 个文件，本次选择了 ${e.length} 个文件，共选择了 ${e.length+a.length} 个文件`)}function re(e,a){return F.$confirm(`确定移除 ${e.name}？`)}return A(),a({BaseUrl:y,name:w,value1:L,value:E,value2:U,userinfoid:z,form:$,uploadurl:D,uploadurlimg:W,headers:P,options:S,ascription:X,tableData:x,dictTotal:q,dictCurrentPage:I,dictPageSize:j,start:M,end:B,dialogVisible:Y,fileList:K,rules:T,msg:R,formRef:_,formatter:Q,handleAvatarSuccess:O,beforeAvatarUpload:G,search:J,handleSizeChange:Z,handleCurrentChange:ee,handleEdit:ae,onSubmit:le,handleRemove:te,handlePreview:de,handleExceed:ne,beforeRemove:re}),(e,a)=>{const l=(0,t.g2)("el-input"),n=(0,t.g2)("el-date-picker"),r=(0,t.g2)("el-option"),v=(0,t.g2)("el-select"),F=(0,t.g2)("el-button"),C=(0,t.g2)("el-table-column"),R=(0,t.g2)("el-tag"),V=(0,t.g2)("el-table"),D=(0,t.g2)("el-pagination"),M=(0,t.g2)("el-form-item"),B=(0,t.g2)("el-col"),K=(0,t.g2)("el-upload"),A=(0,t.g2)("el-form"),Q=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.CE)("div",o,[a[22]||(a[22]=(0,t.Lk)("ul",{class:"breadcrumb"},null,-1)),(0,t.Lk)("div",s,[(0,t.Lk)("div",u,[(0,t.Lk)("div",i,[(0,t.bF)(l,{modelValue:(0,d.R1)(w),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,d.i9)(w)?w.value=e:null),placeholder:"大会名称"},null,8,["modelValue"])]),(0,t.Lk)("div",m,[(0,t.bF)(n,{modelValue:(0,d.R1)(L),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,d.i9)(L)?L.value=e:null),type:"daterange",format:"YYYY-MM-DD","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),(0,t.Lk)("div",g,[(0,t.bF)(v,{modelValue:(0,d.R1)(E),"onUpdate:modelValue":a[2]||(a[2]=e=>(0,d.i9)(E)?E.value=e:null),placeholder:"选择隐藏/非隐藏会议"},{default:(0,t.k6)(()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,d.R1)(S),e=>((0,t.uX)(),(0,t.Wv)(r,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),(0,t.Lk)("div",p,[(0,t.bF)(v,{modelValue:(0,d.R1)(U),"onUpdate:modelValue":a[3]||(a[3]=e=>(0,d.i9)(U)?U.value=e:null),placeholder:"选择会议归属"},{default:(0,t.k6)(()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,d.R1)(X),e=>((0,t.uX)(),(0,t.Wv)(r,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),(0,t.Lk)("div",null,[(0,t.bF)(F,{type:"primary",size:"small",onClick:a[4]||(a[4]=e=>J())},{default:(0,t.k6)(()=>[...a[14]||(a[14]=[(0,t.eW)("开始查询",-1)])]),_:1}),(0,t.bF)(F,{type:"primary",onClick:a[5]||(a[5]=e=>Y.value=!0),size:"small"},{default:(0,t.k6)(()=>[...a[15]||(a[15]=[(0,t.eW)("添加会议",-1)])]),_:1})])]),(0,t.Lk)("div",c,[(0,t.bF)(V,{data:(0,d.R1)(x),style:{width:"100%"},"default-sort":{prop:"date",order:"descending"}},{default:(0,t.k6)(()=>[(0,t.bF)(C,{prop:"id",label:"id"}),(0,t.bF)(C,{prop:"subject",label:"大会名称"}),(0,t.bF)(C,{prop:"startDate",label:"开始时间",sortable:""}),(0,t.bF)(C,{prop:"endDate",label:"结束时间",sortable:""}),(0,t.bF)(C,{prop:"address",label:"地点"}),(0,t.bF)(C,{prop:"hide",label:"显示状态"},{default:(0,t.k6)(e=>["show"==e.row.hide?((0,t.uX)(),(0,t.CE)("span",b,"非隐藏")):((0,t.uX)(),(0,t.CE)("span",f,"隐藏"))]),_:1}),(0,t.bF)(C,{label:"会议操作"},{default:(0,t.k6)(e=>[(0,t.bF)(F,{type:"primary",size:"small",onClick:a=>ae(e.$index,e.row)},{default:(0,t.k6)(()=>[...a[16]||(a[16]=[(0,t.eW)("管理会议",-1)])]),_:1},8,["onClick"])]),_:1}),(0,t.bF)(C,{prop:"userId",label:"归属类型"},{default:(0,t.k6)(e=>[e.row.userId==(0,d.R1)(z)?((0,t.uX)(),(0,t.Wv)(R,{key:0,type:"info",effect:"dark"},{default:(0,t.k6)(()=>[...a[17]||(a[17]=[(0,t.eW)("主",-1)])]),_:1})):((0,t.uX)(),(0,t.Wv)(R,{key:1,type:"info"},{default:(0,t.k6)(()=>[...a[18]||(a[18]=[(0,t.eW)("协",-1)])]),_:1}))]),_:1})]),_:1},8,["data"]),(0,t.Lk)("div",h,[(0,t.bF)(D,{layout:"sizes,prev, pager, next, total","current-page":(0,d.R1)(I),total:(0,d.R1)(q),background:"","page-size":(0,d.R1)(j),onSizeChange:Z,onCurrentChange:ee},null,8,["current-page","total","page-size"])])])]),(0,t.bF)(Q,{"close-on-click-modal":!1,title:"新建会议",modelValue:(0,d.R1)(Y),"onUpdate:modelValue":a[13]||(a[13]=e=>(0,d.i9)(Y)?Y.value=e:null),width:"700px"},{default:(0,t.k6)(()=>[(0,t.bF)(A,{ref_key:"formRef",ref:_,model:(0,d.R1)($),"label-width":"180px",rules:(0,d.R1)(T)},{default:(0,t.k6)(()=>[(0,t.bF)(M,{label:"大会名称",prop:"nameCn"},{default:(0,t.k6)(()=>[(0,t.bF)(l,{size:"small",modelValue:(0,d.R1)($).nameCn,"onUpdate:modelValue":a[6]||(a[6]=e=>(0,d.R1)($).nameCn=e)},null,8,["modelValue"])]),_:1}),(0,t.bF)(M,{label:"大会英文名称",prop:"nameEn"},{default:(0,t.k6)(()=>[(0,t.bF)(l,{size:"small",modelValue:(0,d.R1)($).nameEn,"onUpdate:modelValue":a[7]||(a[7]=e=>(0,d.R1)($).nameEn=e)},null,8,["modelValue"])]),_:1}),(0,t.bF)(M,{label:"大会开始时间"},{default:(0,t.k6)(()=>[(0,t.bF)(B,{span:10},{default:(0,t.k6)(()=>[(0,t.bF)(M,{prop:"mstart"},{default:(0,t.k6)(()=>[(0,t.bF)(n,{type:"date",placeholder:"选择日期",modelValue:(0,d.R1)($).mstart,"onUpdate:modelValue":a[8]||(a[8]=e=>(0,d.R1)($).mstart=e),style:{width:"100%"},size:"small"},null,8,["modelValue"])]),_:1})]),_:1}),(0,t.bF)(B,{class:"line",span:1},{default:(0,t.k6)(()=>[...a[19]||(a[19]=[(0,t.eW)("至",-1)])]),_:1}),(0,t.bF)(B,{span:11},{default:(0,t.k6)(()=>[(0,t.bF)(M,{prop:"mend"},{default:(0,t.k6)(()=>[(0,t.bF)(n,{type:"date",placeholder:"选择日期",modelValue:(0,d.R1)($).mend,"onUpdate:modelValue":a[9]||(a[9]=e=>(0,d.R1)($).mend=e),style:{width:"100%"},size:"small"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,t.bF)(M,{label:"大会举办地点",prop:"addressCn"},{default:(0,t.k6)(()=>[(0,t.bF)(l,{size:"small",modelValue:(0,d.R1)($).addressCn,"onUpdate:modelValue":a[10]||(a[10]=e=>(0,d.R1)($).addressCn=e)},null,8,["modelValue"])]),_:1}),(0,t.bF)(M,{label:"大会举办地点英文",prop:"addressEn"},{default:(0,t.k6)(()=>[(0,t.bF)(l,{size:"small",modelValue:(0,d.R1)($).addressEn,"onUpdate:modelValue":a[11]||(a[11]=e=>(0,d.R1)($).addressEn=e)},null,8,["modelValue"])]),_:1}),(0,t.bF)(M,{label:"系统推荐图片"},{default:(0,t.k6)(()=>[(0,t.bF)(K,{class:"upload-demo",action:(0,d.R1)(W),headers:(0,d.R1)(P),"show-file-list":!1,data:(0,d.R1)($),"on-success":O,"before-upload":G},{default:(0,t.k6)(()=>[(0,t.bF)(F,{size:"small",type:"primary",plain:""},{default:(0,t.k6)(()=>[...a[20]||(a[20]=[(0,t.eW)("点击上传",-1)])]),_:1}),(0,t.Lk)("p",null,[(0,d.R1)($).image?((0,t.uX)(),(0,t.CE)("img",{key:0,src:(0,d.R1)(y)+(0,d.R1)($).image,alt:"",class:"information_img"},null,8,k)):(0,t.Q3)("",!0)])]),_:1},8,["action","headers","data"])]),_:1}),(0,t.bF)(M,null,{default:(0,t.k6)(()=>[(0,t.bF)(F,{size:"small",type:"primary",onClick:a[12]||(a[12]=e=>le(_.value))},{default:(0,t.k6)(()=>[...a[21]||(a[21]=[(0,t.eW)("立即创建",-1)])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}},F=l(66262);const C=(0,F.A)(v,[["__scopeId","data-v-a280ce82"]]);var R=C}}]);