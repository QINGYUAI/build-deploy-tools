"use strict";(self["webpackChunkmeetingvue3"]=self["webpackChunkmeetingvue3"]||[]).push([[1204],{51204:function(e,s,a){a.r(s),a.d(s,{default:function(){return k}});var l=a(20641),i=a(50953),o=a(48548),t=a(71029),n=a(40834);const d={class:"wxshare_index back_padding_outer"},r={class:"wxshare_list"},c={class:"wxshare_list"},u={class:"wxshare_list",style:{display:"flex"}},g=["src"],m={class:"wxshare_list"},p={class:"wxshare_list"};var f={__name:"wxshare_index",setup(e,{expose:s}){const a=(0,t.lq)(),f=(0,n.Pj)(),{proxy:h}=(0,l.nI)(),L=(0,i.Kh)({upload:{meetingId:a.query.meeting,type_vue:1},headers:{Cookies:localStorage.Cookie},BaseUrl:"",ImgUrl:window.location.origin+"/website/imageUpload",fileList:[],info:{},imageUrl:"",image:"",userfile:{}}),{upload:k,headers:w,BaseUrl:v,ImgUrl:b,fileList:_,info:U,imageUrl:y,image:x,userfile:$}=(0,i.QW)(L);function R(){L.BaseUrl=f.state.BaseUrl,V()}function V(){const e={type_vue:1,meetingId:a.query.meeting};console.log(e),h.$Loadimg.showLoading(),h.$http.article.getConfigWxshare(e).then(e=>{h.$Loadimg.hideLoading(),1===e.data.status?(L.info=e.data.info,e.data.info.img&&(L.fileList=[{url:L.BaseUrl+e.data.info.img,name:e.data.info.img}]),console.log(L.fileList)):h.$message.error(e.data.msg)})}function C(){console.log(L.info),h.$Loadimg.showLoading();const e={type_vue:1,meetingId:a.query.meeting,shareId:L.info.shareId,img:L.info.img,appid:L.info.appid,appsecret:L.info.appsecret,descs:L.info.descs,title:L.info.title,wtitle:L.info.wtitle};console.log(e),h.$http.article.editMeetingorder(e).then(e=>{h.$Loadimg.hideLoading(),1===e.data.status?(h.$message({showClose:!0,message:"修改成功",type:"success"}),L.info=e.data.list):(h.$message({showClose:!0,message:e.msg,type:"error"}),h.$message.error(e.data.msg))})}function I(e,s){h.$message.warning("单张图照上传，请删除已上传图照后进行此操作！")}function B(e){const s=e.size/1024/1024<2;return s?L.userfile=e:h.$message.error("上传图片大小不能超过 2MB!"),s}function F(e,s){h.$Loadimg.hideLoading(),1===e.status?(h.$message({showClose:!0,message:"上传成功",type:"success"}),L.imageUrl=L.BaseUrl+e.list,L.info.img=e.list):h.$message({showClose:!0,message:e.msg,type:"error"})}function P(e,s){console.log(e,s)}function z(e){console.log(e)}function q(e,s){return L.info.image="",h.$confirm(`确定移除 ${e.name}？`)}return R(),s({upload:k,headers:w,BaseUrl:v,ImgUrl:b,fileList:_,info:U,imageUrl:y,image:x,userfile:$,edit:C,handleExceed:I,beforeAvatarUpload:B,handleAvatarSuccess:F,handleRemove:P,handlePreview:z,beforeRemove:q,Plus:o.Plus}),(e,s)=>{const a=(0,l.g2)("el-input"),t=(0,l.g2)("el-icon"),n=(0,l.g2)("el-upload"),f=(0,l.g2)("el-dialog"),h=(0,l.g2)("el-button");return(0,l.uX)(),(0,l.CE)("div",d,[(0,l.Lk)("div",r,[s[5]||(s[5]=(0,l.Lk)("span",{class:"title"},"appid",-1)),(0,l.bF)(a,{size:"small",modelValue:(0,i.R1)(U).appid,"onUpdate:modelValue":s[0]||(s[0]=e=>(0,i.R1)(U).appid=e),disabled:"",placeholder:"请输入内容"},null,8,["modelValue"]),s[6]||(s[6]=(0,l.Lk)("span",null,"暂时无法修改，不能支持独立域名分享",-1))]),(0,l.Lk)("div",c,[s[7]||(s[7]=(0,l.Lk)("span",{class:"title"},"appsecret",-1)),(0,l.bF)(a,{size:"small",modelValue:(0,i.R1)(U).appsecret,"onUpdate:modelValue":s[1]||(s[1]=e=>(0,i.R1)(U).appsecret=e),disabled:"",placeholder:"请输入内容"},null,8,["modelValue"]),s[8]||(s[8]=(0,l.Lk)("span",null,"暂时无法修改，不能支持独立域名分享",-1))]),(0,l.Lk)("div",u,[s[9]||(s[9]=(0,l.Lk)("span",{class:"title"},"分享图片",-1)),(0,l.bF)(n,{class:"upload-demo",action:(0,i.R1)(b),"list-type":"picture-card",data:(0,i.R1)(k),name:"userfile",headers:(0,i.R1)(w),"file-list":(0,i.R1)(_),"on-success":F,"on-preview":e.handlePictureCardPreview,"on-exceed":I,"on-change":e.handleChange,"before-upload":B,limit:"1","on-remove":P},{default:(0,l.k6)(()=>[(0,l.bF)(t,{class:"Plus"},{default:(0,l.k6)(()=>[(0,l.bF)((0,i.R1)(o.Plus))]),_:1})]),_:1},8,["action","data","headers","file-list","on-preview","on-change"]),s[10]||(s[10]=(0,l.Lk)("div",{style:{color:"rgb(200, 200, 200)","margin-left":"20px"}},[(0,l.Lk)("p",{style:{"margin-top":"130px"}},"图照比例1：1 大小：2M以内")],-1)),(0,l.bF)(f,{"close-on-click-modal":!1,modelValue:e.dialogVisible,"onUpdate:modelValue":s[2]||(s[2]=s=>e.dialogVisible=s),width:"50%",title:"图片"},{default:(0,l.k6)(()=>[(0,l.Lk)("img",{style:{width:"100%"},src:(0,i.R1)(v)+e.list.portrait,alt:""},null,8,g)]),_:1},8,["modelValue"])]),(0,l.Lk)("div",m,[s[11]||(s[11]=(0,l.Lk)("span",{class:"title"},"微站首页分享描述",-1)),(0,l.bF)(a,{size:"small",modelValue:(0,i.R1)(U).descs,"onUpdate:modelValue":s[3]||(s[3]=e=>(0,i.R1)(U).descs=e),placeholder:"请输入内容"},null,8,["modelValue"]),s[12]||(s[12]=(0,l.Lk)("span",null,"注释：如需换行，文字中间加 \\n",-1))]),s[14]||(s[14]=(0,l.Lk)("div",{class:"wxshare_list"},[(0,l.Lk)("span",{class:"title"},"分享标题"),(0,l.Lk)("span",null,"会议名称")],-1)),(0,l.Lk)("div",p,[(0,l.bF)(h,{size:"small",type:"primary",onClick:s[4]||(s[4]=e=>C())},{default:(0,l.k6)(()=>[...s[13]||(s[13]=[(0,l.eW)("确认修改",-1)])]),_:1})])])}}},h=a(66262);const L=(0,h.A)(f,[["__scopeId","data-v-0cb7efee"]]);var k=L}}]);