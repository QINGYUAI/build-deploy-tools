"use strict";(self["webpackChunkmeetingvue3"]=self["webpackChunkmeetingvue3"]||[]).push([[5010],{45010:function(e,t,a){a.r(t),a.d(t,{default:function(){return M}});a(44114),a(18111),a(7588);var n=a(20641),o=a(50953),l=a(90033),i=a(94335),c=a(74353),u=a.n(c),r=a(71029);const s={class:"invoiceStatistics"},d={class:"back_bg back_padding"},p={class:"invoice_box"},_={style:{background:"#1677FF"},class:"invoice_box_div"},m={class:"money"},g={style:{background:"#F2A525"},class:"invoice_box_div"},v={class:"money"},h={class:"invoice_box"},b={class:"invoice_boxtwo"},y={class:"money"},f={class:"text"},k={class:"invoice_boxtwo"},w={class:"money"},C={class:"text"},D={class:"back_bg back_padding invoice_table"},F={class:"header"},L={class:"meetinginput"},$={class:"thefirselect"},I={class:"pagination"};var x={__name:"payStatistics",setup(e,{expose:t}){const a=(0,r.rd)(),{proxy:c}=(0,n.nI)(),x=(0,o.Kh)({radio1:"上月",dictTotal:0,dictCurrentPage:1,dictPageSize:10,tableData:[],cn_count:0,cn_paytype:[],en_count:0,en_paytype:[],department_list:[],multipleSelection:[],cname:"",value:"",value1:""}),{radio1:S,dictTotal:z,dictCurrentPage:M,dictPageSize:Y,tableData:P,cn_count:W,cn_paytype:R,en_count:V,en_paytype:T,department_list:E,multipleSelection:X,cname:U,value:N,value1:A}=(0,o.QW)(x);function K(){ae(),le()}function G(e){e=e||0;var t=parseFloat(e);if(isNaN(t))return 0;t=Math.round(100*e)/100;var a=t.toString(),n=a.indexOf(".");n<0&&(n=a.length,a+=".");while(a.length<=n+2)a+="0";return a}function q(e){x.dictPageSize=e,ae()}function O(e){x.dictCurrentPage=e,ae()}function Q(){const e=""!==x.value1?u()(x.value1[0]).format("YYYY-MM-DD"):"",t=""!==x.value1?u()(x.value1[1]).format("YYYY-MM-DD"):"",a={type_vue:1,startTime:e,endtime:t};c.$http.article.getmeetingsumClount(a).then(e=>{c.$Loadimg.hideLoading(),0===e.data.status?(x.en_count=e.data.en_count,x.en_paytype=e.data.en_list,x.cn_count=e.data.cn_count,x.cn_paytype=e.data.cn_list,c.$message.success("查询成功")):c.$message.error("查询失败")})}function j(e){console.log(e),a.push({path:"/payDetails",query:{meeting:e.meetingId}})}function B(e){var t=new FormData;t.append("type_vue",1),t.append("mid",e.meetingId),(0,i.A)({url:window.location.origin+"/meeting/exportList",method:"post",data:t,responseType:"blob",headers:{"Content-Type":"multipart/form-data",Cookies:localStorage.Cookie}}).then(e=>{if(200===e.status){const t=new Date;c.$ref.DownloadUrl(e.data,t)}else c.$message.error("导出失败")})}function H(e){var t="";"近三月"===x.radio1&&(t=Z()),"本月"===x.radio1&&(t=J()),"上月"===x.radio1&&(t=ee()),"近一年"===x.radio1&&(t=te());const a=u()().format("YYYY-MM-DD"),n={type_vue:1,startTime:t,endtime:a};c.$http.article.getmeetingsumClount(n).then(e=>{c.$Loadimg.hideLoading(),0===e.data.status?(x.en_count=e.data.en_count,x.en_paytype=e.data.en_list,x.cn_count=e.data.cn_count,x.cn_paytype=e.data.cn_list,c.$message.success("查询成功")):c.$message.error("查询失败")})}function J(e="s",t="0"){const a=new Date;a.setMonth(a.getMonth());var n=a.getMonth()+1,o=a.getDate();n>=1&&n<=9&&(n="0"+n),o>=0&&o<=9&&(o="0"+o);const l=a.getFullYear()+"-"+n+"-"+o;return l}function Z(){const e=new Date;e.setMonth(e.getMonth()-3);var t=e.getMonth()+1,a=e.getDate();t>=1&&t<=9&&(t="0"+t),a>=0&&a<=9&&(a="0"+a);const n=e.getFullYear()+"-"+t+"-"+a;return n}function ee(){const e=new Date;e.setMonth(e.getMonth()-1);var t=e.getMonth()+1,a=e.getDate();t>=1&&t<=9&&(t="0"+t),a>=0&&a<=9&&(a="0"+a);const n=e.getFullYear()+"-"+t+"-"+a;return n}function te(){var e=new Date,t=new Date(e);t.setDate(t.getDate()-365);var a="-",n=t.getFullYear(),o=t.getMonth()+1,l=t.getDate();o>=1&&o<=9&&(o="0"+o),l>=0&&l<=9&&(l="0"+l);var i=n+a+o+a+l;return i}function ae(){const e={type_vue:1,page:x.dictCurrentPage,status:201,per_page:x.dictPageSize,department:x.value,name:x.cname};c.$Loadimg.showLoading(),c.$http.article.getApprovalList(e).then(e=>{c.$Loadimg.hideLoading(),x.tableData=e.data.list,x.tableData.forEach((e,t)=>{oe(e.meetingId,t)}),x.dictTotal=e.data.pageinfo.total,x.department_list=e.data.department_list})}function ne(e){let t="";return x.department_list&&x.department_list.forEach(a=>{a.committeeDepartmentId===e&&(t=a.title)}),t}function oe(e,t){const a={type_vue:1,mid:e};c.$http.article.getmeetingpaymentClount(a).then(e=>{0===e.data.status?(x.tableData[t].Individual_participation_count=e.data.Individual_participation_count,x.tableData[t].team_participation_count=e.data.team_participation_count,x.tableData[t].Individual_hotel_count=e.data.Individual_hotel_count,x.tableData[t].team_hotel_count=e.data.team_hotel_count,x.tableData[t].Paper_count=e.data.Paper_count,x.tableData[t].count=e.data.count):c.$message.error("查询失败")})}function le(){const e={type_vue:1};c.$http.article.getmeetingsumClount(e).then(e=>{c.$Loadimg.hideLoading(),0===e.data.status?(x.en_count=e.data.en_count,x.en_paytype=e.data.en_list,x.cn_count=e.data.cn_count,x.cn_paytype=e.data.cn_list,c.$message.success("查询成功")):c.$message.error("查询失败")})}function ie(e){x.multipleSelection=e}function ce(){if(0===x.multipleSelection.length)c.$message.error("请选择导出内容！");else{var e=[];for(var t in x.multipleSelection)e.push(x.multipleSelection[t].meetingId);const a={type_vue:1,mid:e};c.$http.article.pusexportList(a).then(e=>{c.$Loadimg.hideLoading(),c.$ref.DownloadUrl(e.data,"exportFileName"),c.$message.success("导出成功")})}}return K(),t({radio1:S,dictTotal:z,dictCurrentPage:M,dictPageSize:Y,tableData:P,cn_count:W,cn_paytype:R,en_count:V,en_paytype:T,department_list:E,multipleSelection:X,cname:U,value:N,value1:A,toDecimal2:G,handleSizeChange:q,handleCurrentChange:O,selserch:Q,detailsearch:j,exportlist:B,serch:H,departmentName:ne,handleSelectionChange:ie,search:ce}),(e,t)=>{const a=(0,n.g2)("el-date-picker"),i=(0,n.g2)("el-radio-button"),c=(0,n.g2)("el-radio-group"),u=(0,n.g2)("el-input"),r=(0,n.g2)("el-option"),x=(0,n.g2)("el-select"),X=(0,n.g2)("el-button"),K=(0,n.g2)("el-table-column"),J=(0,n.g2)("el-table"),Z=(0,n.g2)("el-pagination");return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.Lk)("div",d,[(0,n.Lk)("p",null,[t[8]||(t[8]=(0,n.eW)(" 统计时间范围 ",-1)),(0,n.bF)(a,{modelValue:(0,o.R1)(A),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,o.i9)(A)?A.value=e:null),type:"daterange",size:"small",style:{margin:"5px 10px"},"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",onChange:t[1]||(t[1]=e=>Q())},null,8,["modelValue"]),(0,n.bF)(c,{modelValue:(0,o.R1)(S),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,o.i9)(S)?S.value=e:null),size:"small",onChange:t[3]||(t[3]=e=>H(2))},{default:(0,n.k6)(()=>[(0,n.bF)(i,{label:"近三月"}),(0,n.bF)(i,{label:"本月"}),(0,n.bF)(i,{label:"上月"}),(0,n.bF)(i,{label:"近一年"})]),_:1},8,["modelValue"])]),(0,n.Lk)("div",p,[(0,n.Lk)("div",_,[(0,n.Lk)("p",m,"¥ "+(0,l.v_)(G((0,o.R1)(W))),1),t[9]||(t[9]=(0,n.Lk)("p",{class:"text"},"全部会议总收入(人民币)",-1))]),(0,n.Lk)("div",g,[(0,n.Lk)("p",v,"$"+(0,l.v_)(G((0,o.R1)(V))),1),t[10]||(t[10]=(0,n.Lk)("p",{class:"text"},"全部会议总收入(美金)",-1))])]),(0,n.Lk)("div",h,[(0,n.Lk)("div",b,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,o.R1)(R),(e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,style:(0,l.Tr)("background:"+e.color)},[(0,n.Lk)("p",y,"¥"+(0,l.v_)(G(e.typeCount)),1),(0,n.Lk)("p",f,(0,l.v_)(e.name),1)],4))),128))]),(0,n.Lk)("div",k,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,o.R1)(T),(e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,style:(0,l.Tr)("background:"+e.color)},[(0,n.Lk)("p",w,"$"+(0,l.v_)(G(e.typeCount)),1),(0,n.Lk)("p",C,(0,l.v_)(e.name),1)],4))),128))])])]),(0,n.Lk)("div",D,[(0,n.Lk)("div",F,[(0,n.Lk)("div",L,[(0,n.bF)(u,{modelValue:(0,o.R1)(U),"onUpdate:modelValue":t[4]||(t[4]=e=>(0,o.i9)(U)?U.value=e:null),placeholder:"大会名称",size:"small"},null,8,["modelValue"])]),(0,n.Lk)("div",$,[(0,n.bF)(x,{modelValue:(0,o.R1)(N),"onUpdate:modelValue":t[5]||(t[5]=e=>(0,o.i9)(N)?N.value=e:null),placeholder:"请选择所属分会",size:"small"},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,o.R1)(E),e=>((0,n.uX)(),(0,n.Wv)(r,{key:e.committeeDepartmentId,label:e.title,value:e.committeeDepartmentId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),(0,n.bF)(X,{type:"primary",size:"small",onClick:t[6]||(t[6]=e=>ae())},{default:(0,n.k6)(()=>[...t[11]||(t[11]=[(0,n.eW)("搜索会议",-1)])]),_:1}),(0,n.bF)(X,{type:"primary",size:"small",onClick:t[7]||(t[7]=e=>ce())},{default:(0,n.k6)(()=>[...t[12]||(t[12]=[(0,n.eW)("批量导出",-1)])]),_:1}),(0,n.bF)(J,{data:(0,o.R1)(P),stripe:"",style:{width:"100%"},onSelectionChange:ie},{default:(0,n.k6)(()=>[(0,n.bF)(K,{type:"selection",width:"55"}),(0,n.bF)(K,{prop:"meetingId","show-overflow-tooltip":"",label:"会议ID"}),(0,n.bF)(K,{prop:"meetingNameCn","show-overflow-tooltip":"",label:"大会名称"}),(0,n.bF)(K,{prop:"meetingGroup","show-overflow-tooltip":"",label:"所属分会"},{default:(0,n.k6)(e=>[(0,n.eW)((0,l.v_)(ne(e.row.meetingGroup)),1)]),_:1}),(0,n.bF)(K,{prop:"Individual_participation_count","show-overflow-tooltip":"",label:"个人参会报名收款"},{default:(0,n.k6)(e=>[(0,n.eW)((0,l.v_)(G(e.row.Individual_participation_count)),1)]),_:1}),(0,n.bF)(K,{prop:"team_participation_count","show-overflow-tooltip":"",label:"团队参会报名收款"},{default:(0,n.k6)(e=>[(0,n.eW)((0,l.v_)(G(e.row.team_participation_count)),1)]),_:1}),(0,n.bF)(K,{prop:"Individual_hotel_count","show-overflow-tooltip":"",label:"个人酒店预订收款"},{default:(0,n.k6)(e=>[(0,n.eW)((0,l.v_)(G(e.row.Individual_hotel_count)),1)]),_:1}),(0,n.bF)(K,{prop:"team_hotel_count","show-overflow-tooltip":"",label:"团队酒店预订收款"},{default:(0,n.k6)(e=>[(0,n.eW)((0,l.v_)(G(e.row.team_hotel_count)),1)]),_:1}),(0,n.bF)(K,{prop:"Paper_count","show-overflow-tooltip":"",label:"论文投稿收款"},{default:(0,n.k6)(e=>[(0,n.eW)((0,l.v_)(G(e.row.Paper_count)),1)]),_:1}),(0,n.bF)(K,{prop:"count","show-overflow-tooltip":"",label:"收款总金额"},{default:(0,n.k6)(e=>[(0,n.eW)((0,l.v_)(G(e.row.count)),1)]),_:1}),(0,n.bF)(K,{prop:"name",label:"操作",width:"200"},{default:(0,n.k6)(e=>[(0,n.bF)(X,{type:"primary",size:"small",onClick:t=>j(e.row)},{default:(0,n.k6)(()=>[...t[13]||(t[13]=[(0,n.eW)("查看详情",-1)])]),_:1},8,["onClick"]),(0,n.bF)(X,{type:"primary",size:"small",onClick:t=>B(e.row)},{default:(0,n.k6)(()=>[...t[14]||(t[14]=[(0,n.eW)("导出详情",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),(0,n.Lk)("div",I,[(0,n.bF)(Z,{layout:"sizes,prev, pager, next, total","current-page":(0,o.R1)(M),total:(0,o.R1)(z),background:"","page-size":(0,o.R1)(Y),onSizeChange:q,onCurrentChange:O},null,8,["current-page","total","page-size"])])])])}}},S=a(66262);const z=(0,S.A)(x,[["__scopeId","data-v-36b30b09"]]);var M=z}}]);