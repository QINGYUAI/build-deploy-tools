"use strict";(self["webpackChunkmeetingvue3"]=self["webpackChunkmeetingvue3"]||[]).push([[4708],{14708:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});a(44114),a(18111),a(61701);var l=a(20641),r=a(50953),s=a(90033),i=a(73877),o=a(78365),n=a(71029),u=a(40834),p=a(35131),d=a(73151);const c={class:"MeetingReimbursement MinHeight"},m={class:"box"},g={style:{display:"flex","justify-content":"space-between"}},f={class:"button"},b={key:0},y={key:1},v={style:{display:"flex","justify-content":"center"}};var C={__name:"MeetingReimbursement",setup(e){const{datetime:t}=(0,p.A)(),{proxy:a}=(0,l.nI)(),C=(0,n.rd)(),k=(0,n.lq)(),h=(0,u.Pj)(),{showClass:I,ServiceItems:_}=(0,d.A)({type:"supplier",$vm:a,route:k,store:h}),F=(0,r.Kh)({form:{meetingName:"",meetingTime:[],paymentStatus:"",paymentTime:"",auditStatus:""},formRef:null}),{form:S,formRef:D}=(0,r.QW)(F),x=()=>{L()},V=()=>{D.value?.resetFields(),L()},$=(0,r.Kh)({TableData:[],paginateData:{total:0,page:1,per_page:10}}),{TableData:E,paginateData:j}=(0,r.QW)($);function L(){const e={};if(!S.value)return;2===S.value.meetingTime.length&&(e.startDate=a.$dayjs(S.value.meetingTime[0]).format("YYYY-MM-DD"),e.endDate=a.$dayjs(S.value.meetingTime[1]).format("YYYY-MM-DD"));const t={type_vue:1,committeeId:h.state.user.committeeId,supplierId:"",classId:"",...S.value,...e,...j.value};a.$Loadimg.showLoading(),a.$http.supplier.SupplierGetSupplierClassDetail(t).then(e=>{1===e.data.status||200===e.data.status?($.TableData=e.data.list.map(e=>{e.maxIndex=5;const t=[];return e.supplierMeltList.map(e=>{const a=t.find(t=>t.supplierClassId==e.supplierClassId),l=I({},e.supplierClassId);a||t.push({...e,supplierClassName:l?.name,receivable:e.meltReceivable,supplierClassId:e.supplierClassId,supplierId:e.supplierId})}),{...e,card:t}}),$.paginateData={total:e.data.total,page:e.data.page,per_page:e.data.per_page},a.$Loadimg.hideLoading()):a.$message.error(e.data.msg)}).catch(e=>{console.log(e,"err")})}function A(e){C.push({path:"/SupplierDetail",query:{meetingId:e.id}})}return(0,l.wB)(()=>$.paginateData,async(e,t)=>{e&&0!==t.total&&(t&&t.page===e.page&&t.per_page===e.per_page||L())},{deep:!0}),(0,l.wB)(()=>h.state.user.committeeId,e=>{e&&L()},{immediate:!0}),(e,a)=>{const n=(0,l.g2)("el-input"),u=(0,l.g2)("el-form-item"),p=(0,l.g2)("el-date-picker"),d=(0,l.g2)("el-option"),C=(0,l.g2)("el-select"),k=(0,l.g2)("el-button"),h=(0,l.g2)("el-form"),I=(0,l.g2)("el-text"),_=(0,l.g2)("el-tooltip");return(0,l.uX)(),(0,l.CE)("div",c,[(0,l.Lk)("div",m,[(0,l.bF)(h,{model:(0,r.R1)(S),ref_key:"formRef",ref:D,inline:!0,class:"meeting-form",size:"small"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",g,[(0,l.bF)(u,{style:{"margin-bottom":"0px"}},{default:(0,l.k6)(()=>[(0,l.bF)(u,{class:"form-item",label:"会议名称："},{default:(0,l.k6)(()=>[(0,l.bF)(n,{modelValue:(0,r.R1)(S).meetingName,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,r.R1)(S).meetingName=e),placeholder:"请输入会议名称"},null,8,["modelValue"])]),_:1}),(0,l.bF)(u,{class:"form-item",label:"会议时间："},{default:(0,l.k6)(()=>[(0,l.bF)(p,{modelValue:(0,r.R1)(S).meetingTime,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,r.R1)(S).meetingTime=e),type:"daterange",format:"YYYY-MM-DD","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue"])]),_:1}),(0,l.bF)(u,{class:"form-item",label:"支付状态："},{default:(0,l.k6)(()=>[(0,l.bF)(C,{modelValue:(0,r.R1)(S).paymentStatus,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,r.R1)(S).paymentStatus=e),placeholder:"请选择支付状态"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{label:"未支付",value:"unpaid"}),(0,l.bF)(d,{label:"已支付",value:"paid"})]),_:1},8,["modelValue"])]),_:1}),(0,l.bF)(u,{class:"form-item",label:"支付时间："},{default:(0,l.k6)(()=>[(0,l.bF)(p,{modelValue:(0,r.R1)(S).paymentTime,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,r.R1)(S).paymentTime=e),type:"datetime",placeholder:"选择支付时间",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm"},null,8,["modelValue"])]),_:1}),(0,l.bF)(u,{class:"form-item",label:"审批状态："},{default:(0,l.k6)(()=>[(0,l.bF)(C,{modelValue:(0,r.R1)(S).auditStatus,"onUpdate:modelValue":a[4]||(a[4]=e=>(0,r.R1)(S).auditStatus=e),placeholder:"请选择审批状态"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{label:"待审批",value:"pending"}),(0,l.bF)(d,{label:"已通过",value:"approved"}),(0,l.bF)(d,{label:"已拒绝",value:"rejected"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,l.bF)(u,null,{default:(0,l.k6)(()=>[(0,l.Lk)("div",f,[(0,l.bF)(k,{type:"primary",onClick:x},{default:(0,l.k6)(()=>[...a[6]||(a[6]=[(0,l.eW)("搜索",-1)])]),_:1}),(0,l.bF)(k,{onClick:V},{default:(0,l.k6)(()=>[...a[7]||(a[7]=[(0,l.eW)("重置",-1)])]),_:1})])]),_:1})])]),_:1},8,["model"]),(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,r.R1)(E),e=>((0,l.uX)(),(0,l.CE)("li",{key:e.id},[(0,l.Lk)("aside",null,[(0,l.bF)(I,{size:"large"},{default:(0,l.k6)(()=>[(0,l.eW)("会议ID："+(0,s.v_)(e.id),1)]),_:2},1024),(0,l.bF)(_,{placement:"top",offset:5},{content:(0,l.k6)(()=>[e.subject?((0,l.uX)(),(0,l.CE)("span",b,[(0,l.eW)("Cn："+(0,s.v_)(e.subject),1),a[8]||(a[8]=(0,l.Lk)("br",null,null,-1))])):(0,l.Q3)("",!0),e.subjectEn?((0,l.uX)(),(0,l.CE)("span",y,"En："+(0,s.v_)(e.subjectEn),1)):(0,l.Q3)("",!0)]),default:(0,l.k6)(()=>[(0,l.bF)(k,{type:"primary",size:"large",link:"",onClick:t=>A(e),style:{"font-size":"16px","margin-bottom":"10px","font-weight":"bold",display:"flex","justify-content":"flex-start"}},{default:(0,l.k6)(()=>[(0,l.eW)(" 会议名称："+(0,s.v_)(e.subject)+" ",1),e.subjectEn?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)("(EN("+(0,s.v_)(e.subjectEn)+"))",1)],64)):(0,l.Q3)("",!0)]),_:2},1032,["onClick"])]),_:2},1024),(0,l.bF)(I,{size:"large"},{default:(0,l.k6)(()=>[(0,l.eW)("会议时间："+(0,s.v_)((0,r.R1)(t)(e.startDate,e.endDate)),1)]),_:2},1024),(0,l.bF)(I,{size:"large"},{default:(0,l.k6)(()=>[(0,l.eW)("会议地点："+(0,s.v_)(e.address),1)]),_:2},1024)]),(0,l.Lk)("section",null,[(0,l.bF)(i.A,{card:e.card,item:e,type:"Meeting"},null,8,["card","item"])])]))),128))]),(0,l.Lk)("div",v,[(0,l.bF)(o.A,{modelValue:(0,r.R1)(j),"onUpdate:modelValue":a[5]||(a[5]=e=>(0,r.i9)(j)?j.value=e:null),layout:"prev, pager, next, sizes, total","page-sizes":[10,20,30,50]},null,8,["modelValue"])])])])}}},k=a(66262);const h=(0,k.A)(C,[["__scopeId","data-v-958d8f8e"]]);var I=h},35131:function(e,t,a){var l=a(74353),r=a.n(l);t.A=()=>{function e(e,t){let a,l;if(a=r()(e),l=r()(t),e&&t){const e=a.year(),t=a.month()+1,r=a.date(),s=l.year(),i=l.month()+1,o=l.date(),n=e===s,u=n&&t===i;return u?`${e}年${t}月${r}日-${o}日`:n?`${e}年${t}月${r}日-${i}月${o}日`:`${e}年${t}月${r}日-${s}年${i}月${o}日`}return"——"}return{datetime:e}}},73151:function(e,t,a){a(18111),a(20116),a(7588),a(61701),a(69112);var l=a(50953),r=a(20641);t.A=({type:e,$vm:t,route:a,store:s})=>{const i=(0,l.Kh)({ServiceItems:[],departmentList:[]}),{ServiceItems:o,departmentList:n}=(0,l.QW)(i),u=()=>{const e={committeeId:s.state.user.committeeId};t.$http.supplier.SupplierSupplierClassList(e).then(e=>{200!==e.data.status&&1!==e.data.status||(i.ServiceItems=e.data.list)}).catch(e=>{console.log(e,"err")})};function p(){const e={type_vue:"1",id:s.state.user.committeeSiteId};t.$http.supplier.SupplierDepartment(e).then(e=>{1===e.data.status?i.departmentList=e.data.list:t.$message.error(e.data.msg)}).catch(e=>{console.log(e,"err")})}"supplier"===e&&(0,r.wB)(()=>s.state.user,()=>{"supplier"===e&&s.state.user.committeeId&&(u(),s.state.user.committeeSiteId&&p())},{immediate:!0});const d=(e,t)=>{let a=[];if(e.supplierClassId){let t=[];try{const a=JSON.parse(e.supplierClassId);t=Array.isArray(a)?JSON.parse(e.supplierClassId)||[]:e.supplierClassId?e.supplierClassId.split(","):[]}catch(l){t=e.supplierClassId?e.supplierClassId.split(","):[]}a=t.map(e=>{const t=o.value.find(t=>t.supplierClassId==e);return{name:t?t.supplierClassName:"",id:t?t.supplierClassId:""}})}if(t){const e=o.value.find(e=>e.supplierClassId==t);return{name:e?e.supplierClassName:"",id:e?e.supplierClassId:"",...e}}return a};function c(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){console.error(t)}if(Array.isArray(e))e.forEach(e=>{c(e)});else{if("object"!=typeof e)return e;if("[object Object]"!==Object.prototype.toString.call(e))return[];for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=c(e[t]))}return e}function m(e){return"false"!==e&&("true"===e||e)}function g({form:e,list:t,FixedFields:a,customField:l,fieldName:r}){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&Object.keys(a).includes(s)){const a=t[s];e.value[s]=a}l&&l.length>0&&l.forEach(t=>{try{const a=JSON.parse(t.supplierVal);Array.isArray(a)?e.value[t[r]]=c(a)||[]:e.value[t[r]]="object"==typeof a?c(a)||[]:m(t.supplierVal)}catch(a){e.value[t[r]]=m(t.supplierVal)}})}return{showClass:d,ServiceItems:o,departmentList:n,SetCustomField:g}}},73877:function(e,t,a){a.d(t,{A:function(){return m}});a(44114),a(18111),a(22489);var l=a(20641),r=a(90033),s=a(50953),i=a(71029);const o={class:"cardView"},n=["onClick"],u={class:"btn"};var p={__name:"CardView",props:{card:{type:Array,required:!0,default:()=>[]},item:{type:Object,required:!0,default:()=>{}},type:{type:String,required:!0,default:()=>""}},setup(e){const t=(0,i.rd)(),a=e;function p(e){t.push({path:"/SupplierDetail",query:{supplierId:e.supplierId}})}function d(e){e.maxIndex>=e.card.length?e.maxIndex=5:e.maxIndex=e.maxIndex+5}function c(e,l){const r={classId:l.supplierClassId};"Meeting"==a.type?r.meetingId=e.id:"Supplier"==a.type&&(r.supplierId=e.supplierId),t.push({path:"/SupplierDetail",query:r})}const m=(0,s.Kh)({ColorList:[{color:"rgb(47, 84, 235)"},{color:"rgb(82, 196, 26)"},{color:"rgb(164, 30, 143)"},{color:"rgb(87, 202, 255)"},{color:"rgb(255, 77, 79)"},{color:"#0991E6"},{color:"#E276A3 "},{color:"#248067"},{color:"#2E317C"},{color:"#248067"},{color:"#FDC73F"},{color:"#E2A449"},{color:"#D85B19"},{color:"#644B43"},{color:"#CC163A"},{color:"#72265D"},{color:"#CC163A"},{color:"#E276A3"},{color:"#2E317C"},{color:"#69BA3B"},{color:"#0991E6"}]}),{ColorList:g}=(0,s.QW)(m);function f(e){return e>=g.value.length&&(e%=g.value.length),g.value[e].color}return(t,a)=>{const s=(0,l.g2)("el-tooltip"),i=(0,l.g2)("el-text"),m=(0,l.g2)("el-button"),g=(0,l.gN)("loading");return(0,l.uX)(),(0,l.CE)("div",o,[(0,l.Lk)("div",{class:(0,r.C4)(["top",e.card.length>0?"":"hide"])},[e.card.length>0?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(e.card.filter((t,a)=>a<=e.item.maxIndex-1),(t,a)=>(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",{class:"card",key:t.id},[(0,l.bF)(s,{content:t.supplierClassName,placement:"top",effect:"dark"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",{onClick:a=>c(e.item,t),style:(0,r.Tr)({color:f(a),borderColor:f(a)})},[(0,l.Lk)("p",{style:(0,r.Tr)({color:f(a),borderColor:f(a)})},(0,r.v_)(t.supplierClassName),5)],12,n)]),_:2},1032,["content"])])),[[g,e.item.loading]])),128)):((0,l.uX)(),(0,l.Wv)(i,{key:1,size:"large",type:"primary"},{default:(0,l.k6)(()=>[...a[2]||(a[2]=[(0,l.eW)("暂无服务项",-1)])]),_:1}))],2),(0,l.Lk)("div",u,["Supplier"===e.type?((0,l.uX)(),(0,l.Wv)(m,{key:0,type:"primary",link:"",size:"default",onClick:a[0]||(a[0]=t=>p(e.item))},{default:(0,l.k6)(()=>[...a[3]||(a[3]=[(0,l.eW)("查看全部",-1)])]),_:1})):(0,l.Q3)("",!0),e.item.card.length>5?((0,l.uX)(),(0,l.Wv)(m,{key:1,type:"primary",link:"",size:"default",onClick:a[1]||(a[1]=t=>d(e.item))},{default:(0,l.k6)(()=>[(0,l.eW)((0,r.v_)(e.item.maxIndex>=e.card.length&&e.card.length>5?"收起":"更多"),1)]),_:1})):(0,l.Q3)("",!0)])])}}},d=a(66262);const c=(0,d.A)(p,[["__scopeId","data-v-6c96f375"]]);var m=c},78365:function(e,t,a){a.d(t,{A:function(){return n}});var l=a(20641),r=a(50953);const s={class:"paginated"};var i={__name:"index",props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){const a=e,i=t,o=(0,r.Kh)({page:1,per_page:10,total:0});(0,l.wB)(()=>a.modelValue,e=>{a.modelValue&&(o.page=e.page,o.per_page=e.per_page,o.total=e.total)});const{page:n,per_page:u,total:p}=(0,r.QW)(o),d=e=>{o.per_page=e},c=e=>{o.page=e};return(0,l.wB)(()=>o,e=>{i("update:modelValue",{...e})},{deep:!0}),(e,t)=>{const a=(0,l.g2)("el-pagination");return(0,l.uX)(),(0,l.CE)("div",s,[(0,l.bF)(a,(0,l.v6)({"current-page":(0,r.R1)(n),"onUpdate:currentPage":t[0]||(t[0]=e=>(0,r.i9)(n)?n.value=e:null),"page-size":(0,r.R1)(u),"onUpdate:pageSize":t[1]||(t[1]=e=>(0,r.i9)(u)?u.value=e:null),"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:(0,r.R1)(p),size:"small",onSizeChange:d,onCurrentChange:c},e.$attrs),null,16,["current-page","page-size","total"])])}}};const o=i;var n=o}}]);