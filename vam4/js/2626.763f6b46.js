"use strict";(self["webpackChunkmeetingvue3"]=self["webpackChunkmeetingvue3"]||[]).push([[2626],{42626:function(e,t,s){s.r(t),s.d(t,{default:function(){return d}});s(33110);var n=s(20641),a=s(50953),l=s(77882),i=s(40834);const p={class:"SupplierSetting"};var o={__name:"SupplierSetting",setup(e){const{proxy:t}=(0,n.nI)(),s=(0,i.Pj)(),o=(0,a.Kh)({SupplierData:{json:"[]",options:"[]",fields:{}},designer:null}),{SupplierData:u,designer:r}=(0,a.QW)(o);function d({json:e,options:n,fields:a}){u.value={json:e,options:n,fields:a},t.$Loadimg.showLoading();const l={type_vue:1,committeeId:s.state.user.committeeId,jsonData:JSON.stringify(u.value)};t.$http.supplier.SupplierSaveSupplierField(l).then(e=>{t.$Loadimg.hideLoading(),1===e.data.status||200===e.data.status?t.$message.success(e.data.msg):t.$message.error(e.data.msg)}).catch(e=>{console.log(e,"err")})}function c(){t.$Loadimg.showLoading();const e={type_vue:1,committeeId:s.state.user.committeeId};t.$http.supplier.SupplierSupplierField(e).then(e=>{t.$Loadimg.hideLoading(),1===e.data.status||200===e.data.status?u.value=e.data.list:t.$message.error(e.data.msg)}).catch(e=>{console.log(e,"err")})}return(0,n.wB)(()=>s.state.user.committeeId,e=>{e&&c()},{immediate:!0}),(e,t)=>((0,n.uX)(),(0,n.CE)("div",p,[(0,n.bF)(l.A,{save:d,json:(0,a.R1)(u).json,options:(0,a.R1)(u).options,ref_key:"designer",ref:r},null,8,["json","options"])]))}},u=s(66262);const r=(0,u.A)(o,[["__scopeId","data-v-df539b8e"]]);var d=r},77882:function(e,t,s){s.d(t,{A:function(){return r}});s(18111),s(20116),s(61701);var n=s(20641),a=s(50953),l=s(18965);const i={class:"box"};var p={__name:"FormDesign",props:{save:{type:Function,default:()=>{}},json:{type:String,default:()=>{}},options:{type:String,default:()=>{}},fixedFields:{type:Object,default:()=>{}}},setup(e,{expose:t}){const{proxy:s}=(0,n.nI)(),p=e,o=(0,a.KR)(null),u=(0,a.KR)({fieldReadonly:!1}),r={action:"/HomeChapter/uploadChapterFile",onSuccess:(e,t)=>(t.url=e.list.full_url,t)};function d(e){return e&&Array.isArray(e)?e.map(e=>"upload"===e.type?{...e,props:{...e.props,action:r.action,onSuccess:r.onSuccess,name:"chapter_file"}}:(e.children&&Array.isArray(e.children)&&(e.children=d(e.children)),e)):e}const c=(0,a.KR)({supplierClassId:{label:"供应商分类",type:"select"},supplierName:{label:"供应商名称",type:"input"},supplierNum:{label:"供应商纳税人识别号",type:"input"},supplierUsername:{label:"公司法人",type:"input"},supplierEmail:{label:"邮件",type:"input"},supplierAddress:{label:"公司地址",type:"input"},supplierPhone:{label:"联系方式",type:"input"},supplierLang:{label:"来源：分支机构的id",type:"select"},supplierOpenBank:{label:"开户行",type:"input"},supplierAccount:{label:"银行卡号",type:"input"},supplierBankName:{label:"开户行姓名",type:"input"},supplierImg:{label:"营业执照",type:"upload"},supplierUserImg:{label:"法人证件照",type:"upload"},meltName:{label:"报销名称",type:"input"},meltReceivable:{label:"报销金额",type:"input"},meltContract:{label:"合同图片",type:"upload"},...p.fixedFields});function m(e){const t=o.value.getRule();if(Object.keys(c.value).find(t=>e.field===t))return o.value.setRule(t),s.$message.error("固定字段不允许删除"),!0}function g(){const e=o.value.getFormDescription();p.save({json:o.value.getJson(),options:o.value.getOptionsJson(),fields:e})}return(0,n.wB)(()=>p.json,()=>{let e=l.A.parseJson(p.json);e=d(e),o.value.setRule(e),o.value.setOption(l.A.parseJson(p.options))}),(0,n.sV)(()=>{let e=l.A.parseJson(p.json);e=d(e),o.value.setRule(e),o.value.setOption(l.A.parseJson(p.options))}),t({designer:o}),(e,t)=>{const s=(0,n.g2)("el-button"),a=(0,n.g2)("fc-designer");return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.bF)(a,{ref_key:"designer",ref:o,height:"100vh",config:u.value,onDelete:m},{handle:(0,n.k6)(()=>[(0,n.bF)(s,{type:"primary",size:"small",onClick:g},{default:(0,n.k6)(()=>[...t[0]||(t[0]=[(0,n.eW)("保存",-1)])]),_:1})]),_:1},8,["config"])])}}},o=s(66262);const u=(0,o.A)(p,[["__scopeId","data-v-5a260905"]]);var r=u}}]);