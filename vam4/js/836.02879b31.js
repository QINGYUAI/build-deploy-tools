"use strict";(self["webpackChunkmeetingvue3"]=self["webpackChunkmeetingvue3"]||[]).push([[836],{50836:function(e,t,l){l.r(t),l.d(t,{default:function(){return I}});var s=l(20641),a=l(50953),r=l(90033),i=l(74732),o=l(74353),p=l.n(o),n=l(40834),u=l(48548),c=l(71029);const d={key:1,class:"ServiceItems"},m={class:"image-slot"};var f={__name:"ServiceItems",setup(e){const t=(0,c.lq)(),{proxy:l}=(0,s.nI)(),o=(0,n.Pj)(),f=(0,a.Kh)({applyInfo:{},approvalConfig:{},meltInfo:{},orderInfo:[],supplierMelt:{},loading:!1,imgUrl:o.state.api+o.state.ImgUrl}),{applyInfo:v,approvalConfig:y,meltInfo:I,orderInfo:g,supplierMelt:b,loading:h,imgUrl:k}=(0,a.QW)(f),C=async(e="")=>{try{const t={Gstypesend:1,meetingid:e,type_vue:1,subject:"",department:"",hide:""},s=await l.$http.article.getAllMeeting(t);if(200===s.status)if(200===s.data.status||1===s.data.status){const{list:t}=s.data;if(t.length>0&&e){const e=t[0];A(e.committeeDepartmentId)}}else l.$message.error(s.data.msg||"获取会议列表失败")}catch(t){console.error("获取会议列表失败",t),l.$message.error("获取会议列表失败")}};function A(e){const s={type_vue:"1",committeeId:o.state.user.committeeId,meetingId:t.query.meetingId,departmentId:e,meltId:t.query.meltId};l.$http.supplier.SupplierGetSupplierDetail(s).then(e=>{if(1===e.data.status||200===e.data.status){const{applyInfo:t,approvalConfig:l,meltInfo:s,orderInfo:a,supplierMelt:r}=e.data.list;f.applyInfo=t,f.approvalConfig=l,f.meltInfo=s,f.orderInfo=a,f.supplierMelt=r,f.loading=!0}else l.$message.error(e.data.msg)}).catch(e=>{console.log(e,"err")})}return(0,s.wB)(()=>o.state.user.committeeId,e=>{e&&C(t.query.meetingId)},{immediate:!0}),(e,t)=>{const l=(0,s.g2)("el-icon"),o=(0,s.g2)("el-image");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,a.R1)(v)?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,a.R1)(h)?((0,s.uX)(),(0,s.Wv)(i.A,{key:0,applyInfo:(0,a.R1)(v),approvalConfig:(0,a.R1)(y),meltInfo:(0,a.R1)(I),orderInfo:(0,a.R1)(g),supplierMelt:(0,a.R1)(b)},null,8,["applyInfo","approvalConfig","meltInfo","orderInfo","supplierMelt"])):(0,s.Q3)("",!0)],64)):(0,s.Q3)("",!0),3==(0,a.R1)(I).meltApplyStatus?((0,s.uX)(),(0,s.CE)("div",d,[(0,s.Lk)("footer",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,a.R1)(g),e=>((0,s.uX)(),(0,s.CE)("ul",{key:e.orderId},[(0,s.Lk)("li",null,[(0,s.Lk)("p",null,"收款单号："+(0,r.v_)(e.orderNumber),1),(0,s.Lk)("p",null,"收款金额："+(0,r.v_)(e.orderReceipts)+"元",1)]),(0,s.Lk)("li",null,[(0,s.Lk)("p",null,"收款时间："+(0,r.v_)(e.orderTime?(0,a.R1)(p())(e.orderTime).format("YYYY-MM-DD HH:mm:ss"):""),1),(0,s.Lk)("p",null,"状态："+(0,r.v_)(1==e.orderStatus?"已结账":"未结账"),1)]),(0,s.Lk)("li",null,[(0,s.Lk)("p",null,[t[0]||(t[0]=(0,s.eW)(" 凭证： ",-1)),(0,s.bF)(o,{src:(0,a.R1)(k)+e.orderImg,style:{width:"100px",height:"100px"},"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"initial-index":4,"preview-src-list":[(0,a.R1)(k)+e.orderImg],fit:"cover"},{error:(0,s.k6)(()=>[(0,s.Lk)("div",m,[(0,s.bF)(l,null,{default:(0,s.k6)(()=>[(0,s.bF)((0,a.R1)(u.Picture))]),_:1})])]),_:1},8,["src","preview-src-list"])])])]))),128))])])):(0,s.Q3)("",!0)],64)}}},v=l(66262);const y=(0,v.A)(f,[["__scopeId","data-v-dce63134"]]);var I=y},73151:function(e,t,l){l(18111),l(20116),l(7588),l(61701),l(69112);var s=l(50953),a=l(20641);t.A=({type:e,$vm:t,route:l,store:r})=>{const i=(0,s.Kh)({ServiceItems:[],departmentList:[]}),{ServiceItems:o,departmentList:p}=(0,s.QW)(i),n=()=>{const e={committeeId:r.state.user.committeeId};t.$http.supplier.SupplierSupplierClassList(e).then(e=>{200!==e.data.status&&1!==e.data.status||(i.ServiceItems=e.data.list)}).catch(e=>{console.log(e,"err")})};function u(){const e={type_vue:"1",id:r.state.user.committeeSiteId};t.$http.supplier.SupplierDepartment(e).then(e=>{1===e.data.status?i.departmentList=e.data.list:t.$message.error(e.data.msg)}).catch(e=>{console.log(e,"err")})}"supplier"===e&&(0,a.wB)(()=>r.state.user,()=>{"supplier"===e&&r.state.user.committeeId&&(n(),r.state.user.committeeSiteId&&u())},{immediate:!0});const c=(e,t)=>{let l=[];if(e.supplierClassId){let t=[];try{const l=JSON.parse(e.supplierClassId);t=Array.isArray(l)?JSON.parse(e.supplierClassId)||[]:e.supplierClassId?e.supplierClassId.split(","):[]}catch(s){t=e.supplierClassId?e.supplierClassId.split(","):[]}l=t.map(e=>{const t=o.value.find(t=>t.supplierClassId==e);return{name:t?t.supplierClassName:"",id:t?t.supplierClassId:""}})}if(t){const e=o.value.find(e=>e.supplierClassId==t);return{name:e?e.supplierClassName:"",id:e?e.supplierClassId:"",...e}}return l};function d(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){console.error(t)}if(Array.isArray(e))e.forEach(e=>{d(e)});else{if("object"!=typeof e)return e;if("[object Object]"!==Object.prototype.toString.call(e))return[];for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=d(e[t]))}return e}function m(e){return"false"!==e&&("true"===e||e)}function f({form:e,list:t,FixedFields:l,customField:s,fieldName:a}){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&Object.keys(l).includes(r)){const l=t[r];e.value[r]=l}s&&s.length>0&&s.forEach(t=>{try{const l=JSON.parse(t.supplierVal);Array.isArray(l)?e.value[t[a]]=d(l)||[]:e.value[t[a]]="object"==typeof l?d(l)||[]:m(t.supplierVal)}catch(l){e.value[t[a]]=m(t.supplierVal)}})}return{showClass:c,ServiceItems:o,departmentList:p,SetCustomField:f}}},74732:function(e,t,l){l.d(t,{A:function(){return g}});l(18111),l(20116),l(7588),l(69112);var s=l(20641),a=l(50953),r=l(90033),i=l(73151),o=l(71029),p=l(40834),n=l(97149);const u={class:"Reimbursement"},c={class:"box"},d={class:"section"},m={style:{display:"flex","flex-direction":"column"}},f={class:"section"};var v={__name:"Reimbursement",props:{applyInfo:{type:Object,required:!0,default:()=>{}},approvalConfig:{type:Object,required:!0,default:()=>{}},meltInfo:{type:Object,required:!0,default:()=>{}},orderInfo:{type:Array,required:!0,default:()=>[]},supplierMelt:{type:Object,required:!0,default:()=>{}}},setup(e){const{proxy:t}=(0,s.nI)(),l=(0,o.lq)(),v=(0,p.Pj)(),y="localhost"===location.hostname?"/api":"",{SetCustomField:I}=(0,i.A)({type:"supplier",$vm:t,route:l,store:v}),g=e,b=(0,a.Kh)({step:[],active:0,processList:[{num:101,value:"wait"},{num:201,value:"success"},{num:301,value:"error"}]}),{step:h,active:k}=(0,a.QW)(b),C=(0,a.Kh)({fields:[],json:"[]",options:"{}",form:{},fApi:{},loading:!1,FixedFields:{meltReceivable:"",meltName:"",meltContract:"",meltDetails:""}}),{json:A,options:j,form:O,fApi:S,loading:F,FixedFields:R}=(0,a.QW)(C);return(0,s.sV)(()=>{F.value=!1;const{approvalConfig:e,meltInfo:l,supplierMelt:{options:a,json:r}}=g;h.value=e.content?JSON.parse(e.content):[],h.value.forEach((e,t)=>{const l=g.applyInfo.find(t=>t.supplierApplyUid==e.user_id);l?(e.supplierApplyTime=l.supplierApplyTime,e.process=b.processList.find(e=>e.num==l.supplierApplyStatus).value,e.signName=l.signName,"success"==e.process&&(k.value=t+1)):e.process="wait"});const{meltDetail:i}=l;A.value=r,j.value=a,I({form:O,list:l,FixedFields:R.value,customField:i,fieldName:"meltKeyId"}),O.value.meltAddTime=t.$dayjs(l.meltAddTime).format("YYYY-MM-DD HH:mm:ss");try{O.value.meltContract=JSON.parse(O.value.meltContract),O.value.meltDetails=JSON.parse(O.value.meltDetails)}catch(o){console.log(o,"meltInfo")}(0,s.dY)(()=>{F.value=!0})}),(e,t)=>{const l=(0,s.g2)("el-text"),i=(0,s.g2)("el-image"),o=(0,s.g2)("el-step"),p=(0,s.g2)("el-steps");return(0,s.uX)(),(0,s.CE)("div",u,[(0,s.Lk)("div",c,[(0,s.Lk)("div",d,[t[3]||(t[3]=(0,s.Lk)("div",{class:"title"},[(0,s.Lk)("span",{class:"right_bule"}),(0,s.Lk)("span",null,"审批流程")],-1)),(0,s.Lk)("section",null,[(0,s.bF)(p,{active:(0,a.R1)(k),"align-center":"","finish-status":"success"},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,a.R1)(h),(p,n)=>((0,s.uX)(),(0,s.Wv)(o,{key:n,title:p.full_name,status:p.process},{description:(0,s.k6)(()=>[(0,s.Lk)("div",m,[(0,s.bF)(l,null,{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(p.name),1)]),_:2},1024),p.supplierApplyTime?((0,s.uX)(),(0,s.Wv)(l,{key:0},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(e.$dayjs(p.supplierApplyTime).format("YYYY-MM-DD HH:mm:ss")),1)]),_:2},1024)):(0,s.Q3)("",!0),(0,s.bF)(l,null,{default:(0,s.k6)(()=>[t[2]||(t[2]=(0,s.eW)("电子签名： ",-1)),p.signName?((0,s.uX)(),(0,s.Wv)(i,{key:0,style:{width:"100px"},src:(0,a.R1)(y)+p.signName,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[(0,a.R1)(y)+p.signName],"show-progress":"",fit:"cover"},null,8,["src","preview-src-list"])):(0,s.Q3)("",!0)]),_:2},1024)])]),_:2},1032,["title","status"]))),128))]),_:1},8,["active"])])]),(0,s.Lk)("div",f,[(0,a.R1)(F)?((0,s.uX)(),(0,s.Wv)(n.A,{key:0,rule:(0,a.R1)(A),option:(0,a.R1)(j),modelValue:(0,a.R1)(O),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,a.i9)(O)?O.value=e:null),api:(0,a.R1)(S),"onUpdate:api":t[1]||(t[1]=e=>(0,a.i9)(S)?S.value=e:null),disabled:!0},null,8,["rule","option","modelValue","api"])):(0,s.Q3)("",!0)])])])}}},y=l(66262);const I=(0,y.A)(v,[["__scopeId","data-v-c78c1c80"]]);var g=I},97149:function(e,t,l){l.d(t,{A:function(){return p}});l(44114),l(18111),l(61701),l(33110);var s=l(20641),a=l(18965),r=l(50953),i={__name:"FormCreate",props:{modelValue:{type:Object,default:()=>{}},rule:{type:[String,Array],default:()=>[]},option:{type:[String,Object],default:()=>({})},api:{type:Object,default:()=>{}},FixedFields:{type:Object,default:()=>{}},json:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","update:api","submit"],setup(e,{emit:t}){const{proxy:l}=(0,s.nI)(),i=e,o=(0,r.KR)([]),p=(0,r.KR)({}),n=(0,r.KR)(!1);(0,s.sV)(()=>{if(i.json?(o.value=a.A.parseJson(i.rule),p.value=a.A.parseJson(i.option)):(o.value=i.rule,p.value=i.option),i.disabled){const e=a.A.parseJson(i.option);e.submitBtn.show=!1,p.value=e}(0,s.dY)(()=>{n.value=!0})});const u=t,c=(0,s.EW)({get(){return i.modelValue},set(e){u("update:modelValue",e)}}),d=(0,s.EW)({get(){return i.api},set(e){u("update:api",e)}}),m=e=>"string"===typeof e?e:e instanceof Object?JSON.stringify(e):e||null===e||void 0===e||!1===e?e:"";function f(e,t){const l=t.toJson(),s=i.FixedFields,a=[];for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r))if(Object.prototype.hasOwnProperty.call(s,r))s[r]=m(e[r]);else{const t=v(e[r]);a.push({supplierKeyId:r,supplierVal:m(t)})}u("submit",{formData:e,fixedFields:s,val:a,supplierKey:l})}function v(e){if(Array.isArray(e))return e.map(e=>v(e));if(e instanceof Object){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=m(e[t]));return e}return e||""}return(0,s.sV)(()=>{}),(t,l)=>{const a=(0,s.g2)("FormCreate",!0);return n.value?((0,s.uX)(),(0,s.Wv)(a,{key:0,rule:o.value,option:p.value,modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=e=>c.value=e),api:d.value,"onUpdate:api":l[1]||(l[1]=e=>d.value=e),onSubmit:f,disabled:e.disabled},null,8,["rule","option","modelValue","api","disabled"])):(0,s.Q3)("",!0)}}};const o=i;var p=o}}]);