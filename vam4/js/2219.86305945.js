"use strict";(self["webpackChunkmeetingvue3"]=self["webpackChunkmeetingvue3"]||[]).push([[2219],{2219:function(e,a,t){t.r(a),t.d(a,{default:function(){return P}});t(14603),t(47566),t(98721);var l=t(20641),n=t(50953),i=t(53751),o=t(90033);const d={class:"meeting_list"},s={class:"header"},u={class:"inputAll"},c={class:"meetinginput"},r={class:"meetinginput"},p={class:"thesedselect"},g={class:"btn_div btn1"},m={class:"meeting_table"},v={key:0},b={key:1,class:"colorstyle"},w={key:0},f={key:1,class:"colorstyle"},h={key:0,class:"yishangchuan"},k={key:1,class:"weishangchuan"},_={class:"pagination",style:{"margin-bottom":"20px"}};var C={__name:"downloadCenter",setup(e,{expose:a}){const{proxy:t}=(0,l.nI)(),C=(0,n.KR)(null),y=(0,n.Kh)({mid:"",name:"",comId:"",show1:!1,show:!1,dictTotal:0,dictCurrentPage:1,dictPageSize:10,value:"",value1:"",value2:"",options:[{value:2,label:"打包成功"},{value:1,label:"打包失败"}],form:{nameCn:"",nameEn:"",mstart:"",mend:"",addressCn:"",addressEn:"",imgbox:[]},committeeSiteId:"",department_list:[],ids:"",tableData:[]}),{mid:L,name:P,comId:R,show1:S,show:z,dictTotal:F,dictCurrentPage:I,dictPageSize:E,value:U,value1:V,value2:X,options:D,form:T,committeeSiteId:x,department_list:W,ids:$,tableData:O}=(0,n.QW)(y);function j(e){y.dictPageSize=e,B()}function K(e){y.dictCurrentPage=e,B()}function A(e){console.log(e),e&&(console.log(window.location.origin+"/"+e),console.log(e),window.location.href=window.location.origin+"/"+e)}function G(e){if(""!==y.ids){C.value.clearSelection();var a=""}else for(var t=0;t<=e.length;t++)void 0!==e[t]&&2===e[t].status&&(C.value.toggleRowSelection(e[t],!1),a=""===a?e[t].societyId:a+","+e[t].societyId);y.ids=a}function M(){window.print()}function Q(){var e=new XMLHttpRequest;e.open("POST","http://php7.yiyum.com/Committee/getOnePdfInfo",!0),e.responseType="blob",e.onload=function(e){var a=y.response,t=(new Date).valueOf(),l="excel"+t+".pdf",n=document.createElement("a");a.type="application/vnd.ms-pdf";var i=q(a);n.href=i,n.download=l,n.click(),window.URL.revokeObjectURL(i)}}function q(e){return window.URL?window.URL.createObjectURL(e):window.webkitURL.createObjectURL(e)}function H(){y.value1="",y.value3="",y.value2="",y.value="",y.name="",y.mid="",y.meetingID="",J()}function B(){const e={page:y.dictCurrentPage,per_page:y.dictPageSize,meeting_id:y.mid,type_vue:1,startTime:"",endtime:"",status:""};t.$Loadimg.showLoading(),t.$http.article.getdlownList(e).then(e=>{t.$Loadimg.hideLoading(),y.tableData=e.data.list,y.dictTotal=e.data.total,y.dictCurrentPage=e.data.page,y.dictPageSize=e.data.per_page,t.$message.success(e.data.msg)})}function J(){const e={page:y.dictCurrentPage,per_page:y.dictPageSize,meeting_id:y.mid,type_vue:1,status:y.value2,type_name:y.name};console.log(e),t.$Loadimg.showLoading(),t.$http.article.getdlownList(e).then(e=>{t.$Loadimg.hideLoading(),y.tableData=e.data.list,y.dictTotal=e.data.total,y.dictCurrentPage=e.data.page,y.dictPageSize=e.data.per_page})}return(0,l.sV)(()=>{B()}),a({mid:L,name:P,comId:R,show1:S,show:z,dictTotal:F,dictCurrentPage:I,dictPageSize:E,value:U,value1:V,value2:X,options:D,form:T,committeeSiteId:x,department_list:W,ids:$,tableData:O,handleSizeChange:j,handleCurrentChange:K,dlown:A,handleSelectionChange:G,getManyPdf:M,xz:Q,searchC:H,search:J}),(e,a)=>{const t=(0,l.g2)("el-input"),y=(0,l.g2)("el-option"),R=(0,l.g2)("el-select"),S=(0,l.g2)("el-button"),z=(0,l.g2)("el-table-column"),U=(0,l.g2)("el-table"),V=(0,l.g2)("el-pagination");return(0,l.uX)(),(0,l.CE)("div",d,[(0,l.Lk)("div",s,[(0,l.Lk)("div",u,[(0,l.Lk)("div",c,[(0,l.bF)(t,{modelValue:(0,n.R1)(L),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.i9)(L)?L.value=e:null),placeholder:"请输入会议ID"},null,8,["modelValue"])]),(0,l.Lk)("div",r,[(0,l.bF)(t,{modelValue:(0,n.R1)(P),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,n.i9)(P)?P.value=e:null),placeholder:"请输入下载模块"},null,8,["modelValue"])]),(0,l.Lk)("div",p,[(0,l.bF)(R,{modelValue:(0,n.R1)(X),"onUpdate:modelValue":a[2]||(a[2]=e=>(0,n.i9)(X)?X.value=e:null),placeholder:"全部状态"},{default:(0,l.k6)(()=>[(0,l.bF)(y,{value:""},{default:(0,l.k6)(()=>[...a[5]||(a[5]=[(0,l.eW)("全部",-1)])]),_:1}),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,n.R1)(D),e=>((0,l.uX)(),(0,l.Wv)(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),a[6]||(a[6]=(0,l.Lk)("div",{class:"btn_div"},null,-1))]),(0,l.Lk)("div",g,[(0,l.bF)(S,{type:"primary",size:"small",onClick:a[3]||(a[3]=e=>J())},{default:(0,l.k6)(()=>[...a[7]||(a[7]=[(0,l.eW)("查询",-1)])]),_:1}),(0,l.bF)(S,{size:"small",onClick:a[4]||(a[4]=e=>H())},{default:(0,l.k6)(()=>[...a[8]||(a[8]=[(0,l.eW)("重置",-1)])]),_:1})])]),(0,l.Lk)("div",m,[(0,l.bF)(U,{ref_key:"multipleTable",ref:C,data:(0,n.R1)(O),"tooltip-effect":"dark",style:{width:"100%"},onSelectionChange:G},{default:(0,l.k6)(()=>[(0,l.bo)((0,l.bF)(z,{ref:"vvs",flag:"0",type:"selection",align:"center",width:"55"},null,512),[[i.aG,1==(0,n.R1)(X)]]),(0,l.bF)(z,{prop:"mid",align:"center",label:"会议ID"},{default:(0,l.k6)(e=>[e.row.mid?((0,l.uX)(),(0,l.CE)("span",v,(0,o.v_)(e.row.mid),1)):((0,l.uX)(),(0,l.CE)("span",b,"—"))]),_:1}),(0,l.bF)(z,{prop:"add_data",align:"center",label:"任务时间"},{default:(0,l.k6)(e=>[e.row.add_data?((0,l.uX)(),(0,l.CE)("span",w,(0,o.v_)(e.row.add_data),1)):((0,l.uX)(),(0,l.CE)("span",f,"—"))]),_:1}),(0,l.bF)(z,{prop:"type_name",align:"left",label:"下载模块"},{default:(0,l.k6)(e=>[(0,l.eW)((0,o.v_)(e.row.type_name),1)]),_:1}),(0,l.bF)(z,{prop:"status",align:"center",width:"120",label:"状态"},{default:(0,l.k6)(e=>[2==e.row.status?((0,l.uX)(),(0,l.CE)("span",h,"打包成功")):1==e.row.status?((0,l.uX)(),(0,l.CE)("span",k,"打包失败")):(0,l.Q3)("",!0)]),_:1}),(0,l.bF)(z,{prop:"name",align:"center",label:"操作",width:"260"},{default:(0,l.k6)(e=>[(0,l.bo)((0,l.bF)(S,{type:"primary",size:"small",onClick:a=>A(e.row.url)},{default:(0,l.k6)(()=>[...a[9]||(a[9]=[(0,l.eW)("下载",-1)])]),_:1},8,["onClick"]),[[i.aG,2==e.row.status]])]),_:1})]),_:1},8,["data"]),(0,l.Lk)("div",_,[(0,l.bF)(V,{layout:"sizes,prev, pager, next, total","current-page":(0,n.R1)(I),total:(0,n.R1)(F),background:"","page-size":(0,n.R1)(E),onSizeChange:j,onCurrentChange:K},null,8,["current-page","total","page-size"])])])])}}},y=t(66262);const L=(0,y.A)(C,[["__scopeId","data-v-bd18a71c"]]);var P=L}}]);