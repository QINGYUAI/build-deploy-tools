"use strict";(self["webpackChunkmeetingvue3"]=self["webpackChunkmeetingvue3"]||[]).push([[470],{17405:function(e,l,a){a.d(l,{A:function(){return d}});var t=a(20641),n=a(90033),i=a(50953);const o={class:"sectionInvoice"};var u={__name:"DigitalItem",props:["item","invoiceCofing"],setup(e){const l=(0,i.Kh)({denglu:["未登录","已登录"],renzheng:["未知","已认证","待认证"],dlzt:["未登录","登录中(待输入校验码)","已登录"],rzzt:["失效","有效"]}),{denglu:a,renzheng:u,dlzt:r,rzzt:d}=(0,i.QW)(l);return(l,s)=>{const c=(0,t.g2)("el-popover");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("span",null,[void 0!==e.item.Name?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.eW)((0,n.v_)(e.item.Name)+" - ",1)],64)):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.eW)(" 开票人（暂无数据）- ")],64)),(0,t.eW)(" "+(0,n.v_)(e.item.name),1)]),(0,t.Lk)("section",o,[3==e.invoiceCofing?.type?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[e.item.denglu?((0,t.uX)(),(0,t.Wv)(c,{key:0,placement:"top",trigger:"hover",content:e.item.denglu.result?"当前登录状态为"+((0,i.R1)(a)[e.item.denglu.result.certificationStatus-0]||"未知"):e.item.denglu.describe},{reference:(0,t.k6)(()=>[(0,t.Lk)("p",null,[(0,t.Lk)("span",{class:(0,n.C4)(["denglu dian",1==(e.item.denglu.result&&e.item.denglu.result.certificationStatus)?"true":"false"])},null,2),s[0]||(s[0]=(0,t.Lk)("span",null," 登录 ",-1))])]),_:1},8,["content"])):(0,t.Q3)("",!0),e.item.renzheng?((0,t.uX)(),(0,t.Wv)(c,{key:1,placement:"top",trigger:"hover",content:e.item.renzheng.result?"当前开票认证状态为"+((0,i.R1)(u)[e.item.renzheng.result.certificationStatus-0]||"未知"):e.item.renzheng.describe},{reference:(0,t.k6)(()=>[(0,t.Lk)("p",null,[(0,t.Lk)("span",{class:(0,n.C4)(["renzheng dian",1==(e.item.renzheng.result&&e.item.renzheng.result.certificationStatus)?"true":"false"])},null,2),s[1]||(s[1]=(0,t.Lk)("span",null,"认证",-1))])]),_:1},8,["content"])):(0,t.Q3)("",!0)],64)):4==e.invoiceCofing?.type?((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[e.item.renzheng?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.bF)(c,{placement:"top",trigger:"hover",content:e.item.renzheng.list?"当前登录状态为"+((0,i.R1)(r)[e.item.renzheng.list.dlzt]||"未知"):""},{reference:(0,t.k6)(()=>[(0,t.Lk)("p",null,[(0,t.Lk)("span",{class:(0,n.C4)(["denglu dian",e.item.renzheng.list&&2==e.item.renzheng.list.dlzt?"true":"false"])},null,2),s[2]||(s[2]=(0,t.Lk)("span",null," 登录 ",-1))])]),_:1},8,["content"]),(0,t.bF)(c,{placement:"top",trigger:"hover",content:e.item.renzheng.list?"当前开票认证状态为"+((0,i.R1)(d)[e.item.renzheng.list.rzzt]||"未知"):""},{reference:(0,t.k6)(()=>[(0,t.Lk)("p",null,[(0,t.Lk)("span",{class:(0,n.C4)(["renzheng dian",e.item.renzheng.list&&1==e.item.renzheng.list.rzzt?"true":"false"])},null,2),s[3]||(s[3]=(0,t.Lk)("span",null,"认证",-1))])]),_:1},8,["content"])],64)):(0,t.Q3)("",!0)],64)):(0,t.Q3)("",!0)])],64)}}};const r=u;var d=r},60894:function(e,l,a){a.d(l,{A:function(){return n}});var t=a(50953);function n(e){const l=(0,t.Kh)([{value:5,label:"数电增值税普通发票",num:6},{value:6,label:"数电增值税专用发票",num:6}]),a=(0,t.Kh)([{value:"0%",label:"0%",flag:!1},{value:"1%",label:"1%",flag:!1},{value:"2%",label:"2%",flag:!1},{value:"3%",label:"3%",flag:!1},{value:"4%",label:"4%",flag:!1},{value:"5%",label:"5%",flag:!1},{value:"6%",label:"6%",flag:!1},{value:"7%",label:"7%",flag:!1},{value:"8%",label:"8%",flag:!1},{value:"9%",label:"9%",flag:!1},{value:"10%",label:"10%",flag:!1},{value:"11%",label:"11%",flag:!1},{value:"12%",label:"12%",flag:!1},{value:"13%",label:"13%",flag:!1}]);function n(e,l){l.invoiceNo=e.kpCode}async function i(l,a){let t=[{}];const n={type_vue:1,name:l};e.$http.article.InvoiceAdmin_getDuty(n).then(e=>{1===e.data.status?(t=e.data.list,a(t)):(t=[],a(t))})}return{invoiceListType:l,TaxrateList:a,querySearchAsync:i,handleSelectMsg:n}}},67028:function(e,l,a){a(44114),a(18111),a(7588);var t=a(50953),n=a(20641),i=a(40834),o=a(71029);l.A=e=>{const l=(0,o.lq)(),a=(0,i.Pj)(),u=(0,t.KR)([]),r=(0,t.KR)({});function d(){const t={meetingId:l.query.meeting,type:1};let n="getQrCodeStatus";l.query.meeting||(t.committee_id=a.state.user.committeeId,n="CommitteeInvoiceGetQrCodeStatus"),e.$Loadimg.showLoading(),e.$http.article[n](t).then(l=>{e.$Loadimg.hideLoading(),(200===l.data.status||300===l.data.status)&&(u.value=l.data.list)})}const s=(0,n.EW)(()=>{let e=r.value?r.value:{};if(!e)return[];e.clerk&&(e={extNumberName:e.clerk,...e});let l=[];for(const a in e)if(Object.hasOwnProperty.call(e,a)&&a.match(/^extNumber.*(?<!Name)$/)&&null!==e[a]&&null!==e[a]){let t={};t=e[a+"Name"]?{name:e[a],Name:e[a+"Name"]}:{name:e[a]},l.push(t)}return l.length===u.value.length&&u.value.forEach((e,a)=>{l[a]={name:l[a].name,Name:l[a].Name,denglu:{},renzheng:{},...e},l[a].Name||delete l[a].Name}),l});return{CodeStatus:u,getQrCodeStatus:d,DigitalData:s,invoiceConfig:r}}},78365:function(e,l,a){a.d(l,{A:function(){return r}});var t=a(20641),n=a(50953);const i={class:"paginated"};var o={__name:"index",props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:l}){const a=e,o=l,u=(0,n.Kh)({page:1,per_page:10,total:0});(0,t.wB)(()=>a.modelValue,e=>{a.modelValue&&(u.page=e.page,u.per_page=e.per_page,u.total=e.total)});const{page:r,per_page:d,total:s}=(0,n.QW)(u),c=e=>{u.per_page=e},m=e=>{u.page=e};return(0,t.wB)(()=>u,e=>{o("update:modelValue",{...e})},{deep:!0}),(e,l)=>{const a=(0,t.g2)("el-pagination");return(0,t.uX)(),(0,t.CE)("div",i,[(0,t.bF)(a,(0,t.v6)({"current-page":(0,n.R1)(r),"onUpdate:currentPage":l[0]||(l[0]=e=>(0,n.i9)(r)?r.value=e:null),"page-size":(0,n.R1)(d),"onUpdate:pageSize":l[1]||(l[1]=e=>(0,n.i9)(d)?d.value=e:null),"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:(0,n.R1)(s),size:"small",onSizeChange:c,onCurrentChange:m},e.$attrs),null,16,["current-page","page-size","total"])])}}};const u=o;var r=u},90470:function(e,l,a){a.r(l),a.d(l,{default:function(){return Pe}});a(44114),a(18111),a(81148),a(22489),a(20116),a(7588),a(61701),a(18237),a(69112),a(33110);var t=a(20641),n=a(90033),i=a(50953),o=a(48548),u=a(71029),r=a(60894),d=a(17405);const s={class:"form_type"},c={class:"box"},m={class:"top"},p={class:"more"},b={class:"box"},v={class:"top"},k={class:"tip"},f={class:"more"},g={class:"box"},h={class:"top"},_={class:"fun"},F={class:"bottom"},L={class:"box"},y={class:"button"};var R={__name:"form",props:{PurchaserData:{type:Object,required:!0,default:()=>({Purchaser:!1})},SellerData:{type:Object,required:!0,default:()=>({Seller:!1})},invoiceData:{type:Object,required:!0,default:()=>({tableData:[],rulesTable:{},formTableRef:null})},remark:{type:Object,required:!0,default:()=>({remarkFlag:!1})},getSummaries:{type:Function,required:!0,default:()=>{}},TaxSum:{type:Number,required:!0,default:0},DigitalData:{type:Array,required:!0,default:()=>[]},invoiceConfig:{type:Object,required:!0,default:()=>({})},dataOverview:{type:Object,required:!0,default:()=>({})},queryClassListAsync:{type:Function,required:!0,default:()=>{}}},emits:["isShow","getSummaries","saveDraft","onPreview","InvoiceIssuance","Reselection","AddRow","DeleteRow","ClearTable","handleSelectionTable","SetSum","SetMaintain","SetClassName"],setup(e,{emit:l}){const{proxy:a}=(0,t.nI)(),{handleSelectMsg:R,querySearchAsync:w}=(0,r.A)(a),[x,S]=[(0,u.lq)(),(0,u.rd)()],V=e,{PurchaserData:C,SellerData:D,invoiceData:I,remark:N,getSummaries:T}=(0,i.QW)(V),W=l,A=(0,t.WQ)("IssueList"),{Purchaser:U,PurchaserRef:$,Individual:q}=(0,i.QW)(V.PurchaserData),{Seller:M,SellerRef:P}=(0,i.QW)(V.SellerData),{tableData:z,rulesTable:O,formTableRef:Q,isTaxIncluded:X}=(0,i.QW)(V.invoiceData),{remarkFlag:E,remarkMsg:B,Filler:K,Reviewer:j}=(0,i.QW)(V.remark);return(l,a)=>{const u=(0,t.g2)("el-text"),r=(0,t.g2)("el-icon"),S=(0,t.g2)("el-button"),V=(0,t.g2)("el-autocomplete"),N=(0,t.g2)("el-form-item"),q=(0,t.g2)("el-input"),E=(0,t.g2)("el-checkbox"),K=(0,t.g2)("el-form"),j=(0,t.g2)("el-popover"),J=(0,t.g2)("el-tag"),G=(0,t.g2)("el-popconfirm"),H=(0,t.g2)("el-switch"),Y=(0,t.g2)("el-table-column"),Z=(0,t.g2)("el-option"),ee=(0,t.g2)("el-select"),le=(0,t.g2)("el-table");return(0,t.uX)(),(0,t.CE)("div",s,[(0,t.Lk)("header",null,[(0,t.Lk)("div",c,[(0,t.Lk)("div",m,[a[31]||(a[31]=(0,t.Lk)("aside",null,[(0,t.Lk)("h1",null,"购买方信息")],-1)),(0,t.Lk)("div",p,[(0,t.bF)(S,{type:"primary",link:"",onClick:a[0]||(a[0]=e=>U.value=!(0,i.R1)(U))},{default:(0,t.k6)(()=>[(0,t.bF)(u,{type:"primary"},{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(((0,i.R1)(U)?"收起":"展开")+"更多"),1)]),_:1}),(0,t.bF)(r,{class:(0,n.C4)((0,i.R1)(U)?"active":"")},{default:(0,t.k6)(()=>[(0,t.bF)((0,i.R1)(o.ArrowDown))]),_:1},8,["class"])]),_:1})])]),(0,t.bF)(K,{ref_key:"PurchaserRef",ref:$,model:(0,i.R1)(C)},{default:(0,t.k6)(()=>[(0,t.bF)(N,{label:"名称",required:"",class:"item-icon",prop:"invoiceCompany",rules:{required:!0,message:"请输入名称",trigger:"blur"}},{default:(0,t.k6)(()=>[(0,t.bF)(V,{modelValue:(0,i.R1)(C).invoiceCompany,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,i.R1)(C).invoiceCompany=e),modelModifiers:{trim:!0},"fetch-suggestions":(0,i.R1)(w),onSelect:a[2]||(a[2]=e=>(0,i.R1)(R)(e,(0,i.R1)(C))),placeholder:"请输入名称"},null,8,["modelValue","fetch-suggestions"])]),_:1}),(0,t.bF)(N,{label:"统一社会信用代码/纳税人识别号"},{default:(0,t.k6)(()=>[(0,t.bF)(q,{placeholder:"请输入统一社会信用代码/纳税人识别号",modelValue:(0,i.R1)(C).invoiceNo,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,i.R1)(C).invoiceNo=e),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),(0,t.Lk)("div",{class:(0,n.C4)(["content",(0,i.R1)(U)?"":"expand"])},[(0,t.bF)(N,null,{default:(0,t.k6)(()=>[(0,t.Lk)("aside",null,[(0,t.bF)(N,{label:"购买方地址"},{default:(0,t.k6)(()=>[(0,t.bF)(q,{placeholder:"请输入",modelValue:(0,i.R1)(C).invoiceAddress,"onUpdate:modelValue":a[4]||(a[4]=e=>(0,i.R1)(C).invoiceAddress=e),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),(0,t.bF)(N,{label:"电话"},{default:(0,t.k6)(()=>[(0,t.bF)(q,{placeholder:"请输入",modelValue:(0,i.R1)(C).invoicePhone,"onUpdate:modelValue":a[5]||(a[5]=e=>(0,i.R1)(C).invoicePhone=e),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),(0,t.bF)(E,{label:"是否展示",modelValue:(0,i.R1)(C).phoneShow,"onUpdate:modelValue":a[6]||(a[6]=e=>(0,i.R1)(C).phoneShow=e),modelModifiers:{trim:!0},onChange:a[7]||(a[7]=e=>W("isShow",(0,i.R1)(C).phoneShow))},null,8,["modelValue"])]),_:1}),(0,t.bF)(N,null,{default:(0,t.k6)(()=>[(0,t.Lk)("aside",null,[(0,t.bF)(N,{label:"购方开户银行"},{default:(0,t.k6)(()=>[(0,t.bF)(q,{placeholder:"请输入",modelValue:(0,i.R1)(C).invoiceAccount,"onUpdate:modelValue":a[8]||(a[8]=e=>(0,i.R1)(C).invoiceAccount=e),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),(0,t.bF)(N,{label:"银行账户"},{default:(0,t.k6)(()=>[(0,t.bF)(q,{placeholder:"请输入",modelValue:(0,i.R1)(C).invoiceBank,"onUpdate:modelValue":a[9]||(a[9]=e=>(0,i.R1)(C).invoiceBank=e),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),(0,t.bF)(E,{label:"是否展示",modelValue:(0,i.R1)(C).bankShow,"onUpdate:modelValue":a[10]||(a[10]=e=>(0,i.R1)(C).bankShow=e),modelModifiers:{trim:!0},onChange:a[11]||(a[11]=e=>W("isShow",(0,i.R1)(C).bankShow))},null,8,["modelValue"])]),_:1})],2)]),_:1},8,["model"])]),(0,t.Lk)("div",b,[(0,t.Lk)("div",v,[(0,t.Lk)("aside",null,[a[33]||(a[33]=(0,t.Lk)("h1",null,"销售方信息",-1)),(0,t.bF)(j,{placement:"top-start",title:"当前可以发票额度",width:200,trigger:"hover"},{reference:(0,t.k6)(()=>[(0,t.Lk)("div",k,[(0,t.bF)(r,{color:"#428bca"},{default:(0,t.k6)(()=>[(0,t.bF)((0,i.R1)(o.QuestionFilled))]),_:1}),(0,t.bF)(u,{type:"primary"},{default:(0,t.k6)(()=>[...a[32]||(a[32]=[(0,t.eW)("查看当前可用发票额度",-1)])]),_:1})])]),default:(0,t.k6)(()=>[(0,t.bF)(u,{type:"primary"},{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(e.dataOverview.usedCreditLine||0),1)]),_:1})]),_:1})]),(0,t.Lk)("div",f,[(0,t.bF)(S,{type:"primary",link:"",onClick:a[12]||(a[12]=e=>M.value=!(0,i.R1)(M))},{default:(0,t.k6)(()=>[(0,t.bF)(u,{type:"primary"},{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(((0,i.R1)(M)?"收起":"展开")+"更多"),1)]),_:1}),(0,t.bF)(r,{class:(0,n.C4)((0,i.R1)(M)?"active":"")},{default:(0,t.k6)(()=>[(0,t.bF)((0,i.R1)(o.ArrowDown))]),_:1},8,["class"])]),_:1})])]),(0,t.bF)(K,{ref_key:"SellerRef",ref:P,model:(0,i.R1)(D)},{default:(0,t.k6)(()=>[(0,t.bF)(N,{label:"名称",required:"",prop:"invoiceCompany",rules:{required:!0,message:"请输入名称",trigger:"blur"}},{default:(0,t.k6)(()=>[(0,t.bF)(V,{disabled:"",modelValue:(0,i.R1)(D).invoiceCompany,"onUpdate:modelValue":a[13]||(a[13]=e=>(0,i.R1)(D).invoiceCompany=e),modelModifiers:{trim:!0},"fetch-suggestions":(0,i.R1)(w),onSelect:a[14]||(a[14]=e=>(0,i.R1)(R)(e,(0,i.R1)(D))),placeholder:"请输入名称"},null,8,["modelValue","fetch-suggestions"])]),_:1}),(0,t.bF)(N,{label:"统一社会信用代码/纳税人识别号"},{default:(0,t.k6)(()=>[(0,t.bF)(q,{disabled:"",placeholder:"请输入",modelValue:(0,i.R1)(D).invoiceNo,"onUpdate:modelValue":a[15]||(a[15]=e=>(0,i.R1)(D).invoiceNo=e),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),(0,t.Lk)("div",{class:(0,n.C4)(["content",(0,i.R1)(M)?"":"expand"])},[(0,t.bF)(N,null,{default:(0,t.k6)(()=>[(0,t.Lk)("aside",null,[(0,t.bF)(N,{label:"销售方地址"},{default:(0,t.k6)(()=>[(0,t.bF)(q,{placeholder:"请输入",value:(0,i.R1)(D).invoiceAddress},null,8,["value"])]),_:1}),(0,t.bF)(N,{label:"电话"},{default:(0,t.k6)(()=>[(0,t.bF)(q,{placeholder:"请输入",value:(0,i.R1)(D).invoicePhone},null,8,["value"])]),_:1})]),(0,t.bF)(E,{label:"是否展示",modelValue:(0,i.R1)(D).phoneShow,"onUpdate:modelValue":a[16]||(a[16]=e=>(0,i.R1)(D).phoneShow=e),modelModifiers:{trim:!0},onChange:a[17]||(a[17]=e=>W("isShow",(0,i.R1)(D).phoneShow))},null,8,["modelValue"])]),_:1}),(0,t.bF)(N,null,{default:(0,t.k6)(()=>[(0,t.Lk)("aside",null,[(0,t.bF)(N,{label:"销方开户银行"},{default:(0,t.k6)(()=>[(0,t.bF)(q,{placeholder:"请输入",value:(0,i.R1)(D).invoiceAccount},null,8,["value"])]),_:1}),(0,t.bF)(N,{label:"银行账户"},{default:(0,t.k6)(()=>[(0,t.bF)(q,{placeholder:"请输入",value:(0,i.R1)(D).invoiceBank},null,8,["value"])]),_:1})]),(0,t.bF)(E,{label:"是否展示",modelValue:(0,i.R1)(D).bankShow,"onUpdate:modelValue":a[18]||(a[18]=e=>(0,i.R1)(D).bankShow=e),modelModifiers:{trim:!0},onChange:a[19]||(a[19]=e=>W("isShow",(0,i.R1)(D).bankShow))},null,8,["modelValue"])]),_:1})],2)]),_:1},8,["model"])])]),(0,t.Lk)("main",null,[(0,t.Lk)("div",g,[(0,t.Lk)("div",h,[(0,t.Lk)("aside",null,[a[35]||(a[35]=(0,t.Lk)("h1",null,"开票信息",-1)),(0,t.bF)(J,{type:"success"},{default:(0,t.k6)(()=>[...a[34]||(a[34]=[(0,t.eW)("电子发票",-1)])]),_:1}),(0,t.bF)(J,{type:"danger"},{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)((0,i.R1)(A).find(e=>e.value+""===(0,i.R1)(x).query.type)?.label),1)]),_:1})])]),(0,t.Lk)("div",_,[(0,t.Lk)("div",null,[(0,t.bF)(S,{type:"primary",size:"small",onClick:a[20]||(a[20]=e=>W("AddRow"))},{default:(0,t.k6)(()=>[(0,t.bF)(r,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,i.R1)(o.Plus))]),_:1}),(0,t.bF)(u,{style:{color:"white"}},{default:(0,t.k6)(()=>[...a[36]||(a[36]=[(0,t.eW)("增行",-1)])]),_:1})]),_:1}),(0,t.bF)(G,{title:"将要删除选中的项目，是否继续?",onConfirm:a[21]||(a[21]=e=>W("DeleteRow")),width:"270","cancel-button-type":"info"},{reference:(0,t.k6)(()=>[(0,t.bF)(S,{size:"small",disabled:(0,i.R1)(I).multipleTable.length<=0},{default:(0,t.k6)(()=>[(0,t.bF)(u,null,{default:(0,t.k6)(()=>[...a[37]||(a[37]=[(0,t.eW)("删除",-1)])]),_:1})]),_:1},8,["disabled"])]),_:1}),(0,t.bF)(H,{"inline-prompt":"","active-text":"含税","inactive-text":"不含税",modelValue:(0,i.R1)(X),"onUpdate:modelValue":a[22]||(a[22]=e=>(0,i.i9)(X)?X.value=e:null),modelModifiers:{trim:!0}},null,8,["modelValue"])]),(0,t.Lk)("div",null,[(0,t.bF)(S,{type:"info",size:"small",onClick:a[23]||(a[23]=e=>W("Reselection","重选发票类型"))},{default:(0,t.k6)(()=>[...a[38]||(a[38]=[(0,t.eW)("重选发票类型 ",-1)])]),_:1}),(0,t.bF)(G,{title:"确定清空数据吗，清空后不可恢复?",onConfirm:a[24]||(a[24]=e=>W("ClearTable")),width:"270","cancel-button-type":"info"},{reference:(0,t.k6)(()=>[(0,t.bF)(S,{size:"small"},{default:(0,t.k6)(()=>[...a[39]||(a[39]=[(0,t.eW)("清空重填",-1)])]),_:1})]),_:1})])]),(0,t.bF)(K,{model:(0,i.R1)(z),ref_key:"formTableRef",ref:Q,rules:(0,i.R1)(O)},{default:(0,t.k6)(()=>[(0,t.bF)(le,{data:(0,i.R1)(z),"header-row-class-name":"headerRow","summary-method":(0,i.R1)(T),"show-summary":"",onSelectionChange:a[25]||(a[25]=e=>W("handleSelectionTable",e)),"row-class-name":({row:e})=>(0,i.R1)(I).multipleTable.find(l=>l.id===e.id)?"checkout":""},{default:(0,t.k6)(()=>[(0,t.bF)(Y,{type:"selection",width:"60"}),(0,t.bF)(Y,{align:"left",label:"序号",width:"80"},{default:(0,t.k6)(e=>[(0,t.eW)((0,n.v_)(e.$index+1),1)]),_:1}),(0,t.bF)(Y,{label:"项目名称",align:"left",width:"300","class-name":"goodsname error-msg"},{header:(0,t.k6)(()=>[...a[40]||(a[40]=[(0,t.Lk)("i",null,"*",-1),(0,t.Lk)("span",null,"项目名称",-1)])]),default:(0,t.k6)(l=>[(0,t.bF)(N,{prop:"["+l.$index+"].goodsname",rules:(0,i.R1)(O).goodsname},{default:(0,t.k6)(()=>[(0,t.bF)(V,{modelValue:l.row.goodsname,"onUpdate:modelValue":e=>l.row.goodsname=e,modelModifiers:{trim:!0},"fetch-suggestions":e.queryClassListAsync,placeholder:"请输入",onSelect:e=>W("SetClassName",e,l.$index)},null,8,["modelValue","onUpdate:modelValue","fetch-suggestions","onSelect"]),(0,t.bF)(S,{onClick:e=>W("SetMaintain",l.$index),type:"primary",size:"small",plain:""},{default:(0,t.k6)(()=>[(0,t.bF)(r,{style:{transform:"rotate(90deg)"}},{default:(0,t.k6)(()=>[(0,t.bF)((0,i.R1)(o.MoreFilled))]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["prop","rules"])]),_:1}),(0,t.bF)(Y,{label:"规格型号",align:"left",width:"130"},{default:(0,t.k6)(e=>[(0,t.bF)(N,{prop:"spec"},{default:(0,t.k6)(()=>[(0,t.bF)(q,{modelValue:e.row.spec,"onUpdate:modelValue":l=>e.row.spec=l,modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:1}),(0,t.bF)(Y,{label:"单位",align:"left",width:"128"},{default:(0,t.k6)(e=>[(0,t.bF)(N,{prop:"unit"},{default:(0,t.k6)(()=>[(0,t.bF)(q,{modelValue:e.row.unit,"onUpdate:modelValue":l=>e.row.unit=l,modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:1}),(0,t.bF)(Y,{label:"数量",align:"left",width:"180"},{default:(0,t.k6)(e=>[(0,t.bF)(N,{prop:"num"},{default:(0,t.k6)(()=>[(0,t.bF)(q,{type:"number",modelValue:e.row.num,"onUpdate:modelValue":l=>e.row.num=l,modelModifiers:{trim:!0},placeholder:"请输入",min:0,onBlur:l=>W("SetSum",e.row),oninput:"value=value.replace(/[^\\d]/g,'')"},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1024)]),_:1}),(0,t.bF)(Y,{label:"单价",align:"left",width:"180"},{header:(0,t.k6)(()=>[a[41]||(a[41]=(0,t.Lk)("i",null,"*",-1)),(0,t.Lk)("span",null,"单价"+(0,n.v_)((0,i.R1)(X)?"（含税）":"（不含税）"),1)]),default:(0,t.k6)(e=>[(0,t.bF)(N,null,{default:(0,t.k6)(()=>[(0,t.bF)(q,{type:"number",modelValue:e.row.price,"onUpdate:modelValue":l=>e.row.price=l,modelModifiers:{trim:!0},placeholder:"请输入",min:0,onBlur:l=>W("SetSum",e.row),oninput:"value=value.replace(/[^0-9.]/g,'')"},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1024)]),_:1}),(0,t.bF)(Y,{label:"金额",align:"left",width:"180"},{header:(0,t.k6)(()=>[a[42]||(a[42]=(0,t.Lk)("i",null,"*",-1)),(0,t.Lk)("span",null,"金额"+(0,n.v_)((0,i.R1)(X)?"（含税）":"（不含税）"),1)]),default:(0,t.k6)(e=>[(0,t.bF)(N,{prop:"["+e.$index+"].receipts",rules:(0,i.R1)(O).receipts},{default:(0,t.k6)(()=>[(0,t.bF)(q,{disabled:"",modelValue:e.row.receipts,"onUpdate:modelValue":l=>e.row.receipts=l,modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),(0,t.bF)(Y,{label:"税率/征收率",align:"left",width:"180","class-name":"error-msg"},{header:(0,t.k6)(()=>[...a[43]||(a[43]=[(0,t.Lk)("i",null,"*",-1),(0,t.Lk)("span",null,"税率/征收率",-1)])]),default:(0,t.k6)(e=>[(0,t.bF)(N,{prop:"["+e.$index+"].taxrate",rules:(0,i.R1)(O).taxrate},{default:(0,t.k6)(()=>[(0,t.bF)(ee,{modelValue:e.row.taxrate,"onUpdate:modelValue":l=>e.row.taxrate=l,modelModifiers:{trim:!0},placeholder:"税率/征收率",onChange:l=>W("SetSum",e.row)},{prefix:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(e.row.taxrate&&(e.row.TaxrateList.find(l=>l.value===e.row.taxrate).flag?"服务税率":"")),1)]),default:(0,t.k6)(()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.row.TaxrateList,e=>((0,t.uX)(),(0,t.Wv)(Z,{key:e.label,label:e.label,value:e.value},{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(e.label)+" "+(0,n.v_)(e.flag?"当前服务税率":""),1)]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["prop","rules"])]),_:1}),(0,t.bF)(Y,{label:"税额",align:"left",width:"180"},{header:(0,t.k6)(()=>[...a[44]||(a[44]=[(0,t.Lk)("i",null,"*",-1),(0,t.Lk)("span",null,"税额",-1)])]),default:(0,t.k6)(e=>[(0,t.bF)(N,{prop:"["+e.$index+"].taxAmount",rules:(0,i.R1)(O).taxAmount},{default:(0,t.k6)(()=>[(0,t.bF)(q,{disabled:"",modelValue:e.row.taxAmount,"onUpdate:modelValue":l=>e.row.taxAmount=l,modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1})]),_:1},8,["data","summary-method","row-class-name"])]),_:1},8,["model","rules"])]),(0,t.Lk)("div",F,[(0,t.bF)(u,null,{default:(0,t.k6)(()=>[(0,t.eW)("价税合计(大写)："+(0,n.v_)(l.$Nzh.cn.toMoney(e.TaxSum)?.slice(3))+"          合计（小写）："+(0,n.v_)("￥"+e.TaxSum),1)]),_:1})])]),(0,t.Lk)("footer",null,[(0,t.Lk)("div",L,[a[45]||(a[45]=(0,t.Lk)("div",{class:"top"},[(0,t.Lk)("h1",null,"备注信息")],-1)),(0,t.bF)(K,{"label-position":"top"},{default:(0,t.k6)(()=>[(0,t.bF)(N,{label:"备注"},{default:(0,t.k6)(()=>[(0,t.bF)(q,{type:"textarea",placeholder:"如开票人对文本长度等有特殊需求，应通过自定义附件要素录入",maxlength:"200","show-word-limit":"",modelValue:(0,i.R1)(B),"onUpdate:modelValue":a[26]||(a[26]=e=>(0,i.i9)(B)?B.value=e:null),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),_:1})])]),(0,t.bF)(N,{label:"开票人：",class:"extNumber"},{default:(0,t.k6)(()=>[e.DigitalData.length>=1?((0,t.uX)(),(0,t.Wv)(ee,{key:0,style:{width:"100px"},modelValue:(0,i.R1)(I).ext_number,"onUpdate:modelValue":a[27]||(a[27]=e=>(0,i.R1)(I).ext_number=e),modelModifiers:{trim:!0},placeholder:e.invoiceConfig.clerk,"popper-class":"popper-select"},{default:(0,t.k6)(()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.DigitalData,(l,a)=>((0,t.uX)(),(0,t.Wv)(Z,{key:a,value:(l.Name||"开票人（暂无数据）")+"-"+l.name},{default:(0,t.k6)(()=>[(0,t.bF)(d.A,{item:l,invoiceCofing:e.invoiceConfig},null,8,["item","invoiceCofing"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","placeholder"])):(0,t.Q3)("",!0)]),_:1}),(0,t.Lk)("div",y,[(0,t.bF)(S,{size:"small",onClick:a[28]||(a[28]=e=>W("saveDraft"))},{default:(0,t.k6)(()=>[...a[46]||(a[46]=[(0,t.eW)("保存草稿 ",-1)])]),_:1}),(0,t.bF)(S,{type:"primary",size:"small",plain:"",onClick:a[29]||(a[29]=e=>W("onPreview"))},{default:(0,t.k6)(()=>[...a[47]||(a[47]=[(0,t.eW)("预览发票 ",-1)])]),_:1}),(0,t.bF)(S,{type:"primary",size:"small",onClick:a[30]||(a[30]=e=>W("InvoiceIssuance"))},{default:(0,t.k6)(()=>[...a[48]||(a[48]=[(0,t.eW)("发票开具 ",-1)])]),_:1})])])}}},w=a(66262);const x=(0,w.A)(R,[["__scopeId","data-v-6687a89d"]]);var S=x;const V={class:"invoice_type"},C={class:"select"},D={class:"box"},I={class:"content"},N={class:"box"},T={class:"tip"},W={class:"content"},A={class:"box"},U={class:"fun"},$={class:"bottom"},q={class:"box"},M={class:"button"};var P={__name:"invoice",props:{PurchaserData:{type:Object,required:!0,default:()=>({Purchaser:!1})},SellerData:{type:Object,required:!0,default:()=>({Seller:!1})},invoiceData:{type:Object,required:!0,default:()=>({tableData:[],rulesTable:{},formTableRef:null})},remark:{type:Object,required:!0,default:()=>({remarkFlag:!1})},getSummaries:{type:Function,required:!0,default:()=>{}},TaxSum:{type:Number,required:!0,default:0},DigitalData:{type:Array,required:!0,default:()=>[]},invoiceConfig:{type:Object,required:!0,default:()=>({})},dataOverview:{type:Object,required:!0,default:()=>({})},queryClassListAsync:{type:Function,required:!0,default:()=>{}}},emits:["isShow","getSummaries","saveDraft","onPreview","InvoiceIssuance","Reselection","AddRow","DeleteRow","ClearTable","SetSum","SetMaintain","SetClassName"],setup(e,{emit:l}){const{proxy:a}=(0,t.nI)(),{handleSelectMsg:s,querySearchAsync:c}=(0,r.A)(a),[m,p]=[(0,u.lq)(),(0,u.rd)()],b=e,{PurchaserData:v,SellerData:k,invoiceData:f,remark:g,getSummaries:h}=(0,i.QW)(b),_=l,F=(0,t.WQ)("IssueList"),{Purchaser:L,PurchaserRef:y,Individual:R}=(0,i.QW)(b.PurchaserData),{Seller:w,SellerRef:x}=(0,i.QW)(b.SellerData),{tableData:S,rulesTable:P,formTableRef:z,isTaxIncluded:O}=(0,i.QW)(b.invoiceData),{remarkFlag:Q,remarkMsg:X,Filler:E,Reviewer:B}=(0,i.QW)(b.remark);return(l,a)=>{const u=(0,t.g2)("el-autocomplete"),r=(0,t.g2)("el-form-item"),p=(0,t.g2)("el-input"),b=(0,t.g2)("el-checkbox"),g=(0,t.g2)("el-form"),L=(0,t.g2)("el-icon"),R=(0,t.g2)("el-text"),w=(0,t.g2)("el-popover"),Q=(0,t.g2)("el-button"),E=(0,t.g2)("el-popconfirm"),B=(0,t.g2)("el-switch"),K=(0,t.g2)("el-table-column"),j=(0,t.g2)("el-option"),J=(0,t.g2)("el-select"),G=(0,t.g2)("el-table");return(0,t.uX)(),(0,t.CE)("div",V,[(0,t.Lk)("div",C,[(0,t.Lk)("h1",null,"电子发票("+(0,n.v_)((0,i.R1)(F).find(e=>e.value+""===(0,i.R1)(m).query.type)?.label)+")",1)]),(0,t.Lk)("header",null,[(0,t.Lk)("div",D,[a[30]||(a[30]=(0,t.Lk)("div",{class:"top"},[(0,t.Lk)("aside",null,[(0,t.Lk)("h1",null,"购买方信息")])],-1)),(0,t.bF)(g,{ref_key:"PurchaserRef",ref:y,model:(0,i.R1)(v)},{default:(0,t.k6)(()=>[a[29]||(a[29]=(0,t.Lk)("section",null,null,-1)),(0,t.bF)(r,{label:"名称",required:"",class:"item-icon",prop:"invoiceCompany",rules:{required:!0,message:"请输入名称",trigger:"blur"}},{default:(0,t.k6)(()=>[(0,t.bF)(u,{modelValue:(0,i.R1)(v).invoiceCompany,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,i.R1)(v).invoiceCompany=e),modelModifiers:{trim:!0},"fetch-suggestions":(0,i.R1)(c),onSelect:a[1]||(a[1]=e=>(0,i.R1)(s)(e,(0,i.R1)(v))),placeholder:"请输入名称"},null,8,["modelValue","fetch-suggestions"])]),_:1}),(0,t.bF)(r,{label:"统一社会信用代码/纳税人识别号"},{default:(0,t.k6)(()=>[(0,t.bF)(p,{placeholder:"请输入",modelValue:(0,i.R1)(v).invoiceNo,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,i.R1)(v).invoiceNo=e),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),(0,t.Lk)("div",I,[(0,t.bF)(r,null,{default:(0,t.k6)(()=>[(0,t.Lk)("aside",null,[(0,t.bF)(r,{label:"购买方地址"},{default:(0,t.k6)(()=>[(0,t.bF)(p,{style:{width:"400px"},placeholder:"请输入",modelValue:(0,i.R1)(v).invoiceAddress,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,i.R1)(v).invoiceAddress=e),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),(0,t.bF)(r,{label:"电话"},{default:(0,t.k6)(()=>[(0,t.bF)(p,{placeholder:"请输入",modelValue:(0,i.R1)(v).invoicePhone,"onUpdate:modelValue":a[4]||(a[4]=e=>(0,i.R1)(v).invoicePhone=e),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),(0,t.bF)(b,{label:"是否展示",modelValue:(0,i.R1)(v).phoneShow,"onUpdate:modelValue":a[5]||(a[5]=e=>(0,i.R1)(v).phoneShow=e),modelModifiers:{trim:!0},onChange:a[6]||(a[6]=e=>_("isShow",(0,i.R1)(v).phoneShow))},null,8,["modelValue"])]),_:1}),(0,t.bF)(r,null,{default:(0,t.k6)(()=>[(0,t.Lk)("aside",null,[(0,t.bF)(r,{label:"购方开户银行"},{default:(0,t.k6)(()=>[(0,t.bF)(p,{style:{width:"420px"},placeholder:"请输入",modelValue:(0,i.R1)(v).invoiceAccount,"onUpdate:modelValue":a[7]||(a[7]=e=>(0,i.R1)(v).invoiceAccount=e),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),(0,t.bF)(r,{label:"银行账户"},{default:(0,t.k6)(()=>[(0,t.bF)(p,{placeholder:"请输入",modelValue:(0,i.R1)(v).invoiceBank,"onUpdate:modelValue":a[8]||(a[8]=e=>(0,i.R1)(v).invoiceBank=e),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),(0,t.bF)(b,{label:"是否展示",modelValue:(0,i.R1)(v).bankShow,"onUpdate:modelValue":a[9]||(a[9]=e=>(0,i.R1)(v).bankShow=e),modelModifiers:{trim:!0},onChange:a[10]||(a[10]=e=>_("isShow",(0,i.R1)(v).bankShow))},null,8,["modelValue"])]),_:1})])]),_:1},8,["model"])]),(0,t.Lk)("div",N,[a[32]||(a[32]=(0,t.Lk)("div",{class:"top"},[(0,t.Lk)("aside",null,[(0,t.Lk)("h1",null,"销售方信息")])],-1)),(0,t.bF)(g,{ref_key:"SellerRef",ref:x,model:(0,i.R1)(k)},{default:(0,t.k6)(()=>[(0,t.Lk)("section",null,[(0,t.bF)(w,{placement:"top-start",title:"当前可以发票额度",width:200,trigger:"hover"},{reference:(0,t.k6)(()=>[(0,t.Lk)("div",T,[(0,t.bF)(L,{color:"#428bca"},{default:(0,t.k6)(()=>[(0,t.bF)((0,i.R1)(o.QuestionFilled))]),_:1}),(0,t.bF)(R,{type:"primary"},{default:(0,t.k6)(()=>[...a[31]||(a[31]=[(0,t.eW)("查看当前可用发票额度",-1)])]),_:1})])]),default:(0,t.k6)(()=>[(0,t.bF)(R,{type:"primary"},{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(e.dataOverview.usedCreditLine||0),1)]),_:1})]),_:1})]),(0,t.bF)(r,{label:"名称",required:"",prop:"invoiceCompany",rules:{required:!0,message:"请输入名称",trigger:"blur"}},{default:(0,t.k6)(()=>[(0,t.bF)(u,{disabled:"",modelValue:(0,i.R1)(k).invoiceCompany,"onUpdate:modelValue":a[11]||(a[11]=e=>(0,i.R1)(k).invoiceCompany=e),modelModifiers:{trim:!0},"fetch-suggestions":(0,i.R1)(c),onSelect:a[12]||(a[12]=e=>(0,i.R1)(s)(e,(0,i.R1)(k))),placeholder:"请输入名称"},null,8,["modelValue","fetch-suggestions"])]),_:1}),(0,t.bF)(r,{label:"统一社会信用代码/纳税人识别号"},{default:(0,t.k6)(()=>[(0,t.bF)(p,{disabled:"",placeholder:"请输入",modelValue:(0,i.R1)(k).invoiceNo,"onUpdate:modelValue":a[13]||(a[13]=e=>(0,i.R1)(k).invoiceNo=e),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),(0,t.Lk)("div",W,[(0,t.bF)(r,null,{default:(0,t.k6)(()=>[(0,t.Lk)("aside",null,[(0,t.bF)(r,{label:"销售方地址"},{default:(0,t.k6)(()=>[(0,t.bF)(p,{style:{width:"400px"},placeholder:"请输入",value:(0,i.R1)(k).invoiceAddress},null,8,["value"])]),_:1}),(0,t.bF)(r,{label:"电话"},{default:(0,t.k6)(()=>[(0,t.bF)(p,{placeholder:"请输入",value:(0,i.R1)(k).invoicePhone},null,8,["value"])]),_:1})]),(0,t.bF)(b,{label:"是否展示",modelValue:(0,i.R1)(k).phoneShow,"onUpdate:modelValue":a[14]||(a[14]=e=>(0,i.R1)(k).phoneShow=e),modelModifiers:{trim:!0},onChange:a[15]||(a[15]=e=>_("isShow",(0,i.R1)(k).phoneShow))},null,8,["modelValue"])]),_:1}),(0,t.bF)(r,null,{default:(0,t.k6)(()=>[(0,t.Lk)("aside",null,[(0,t.bF)(r,{label:"销方开户银行"},{default:(0,t.k6)(()=>[(0,t.bF)(p,{style:{width:"420px"},placeholder:"请输入",value:(0,i.R1)(k).invoiceAccount},null,8,["value"])]),_:1}),(0,t.bF)(r,{label:"银行账户"},{default:(0,t.k6)(()=>[(0,t.bF)(p,{placeholder:"请输入",value:(0,i.R1)(k).invoiceBank},null,8,["value"])]),_:1})]),(0,t.bF)(b,{label:"是否展示",modelValue:(0,i.R1)(k).bankShow,"onUpdate:modelValue":a[16]||(a[16]=e=>(0,i.R1)(k).bankShow=e),modelModifiers:{trim:!0},onChange:a[17]||(a[17]=e=>_("isShow",(0,i.R1)(k).bankShow))},null,8,["modelValue"])]),_:1})])]),_:1},8,["model"])])]),(0,t.Lk)("main",null,[(0,t.Lk)("div",A,[(0,t.Lk)("div",U,[(0,t.Lk)("div",null,[(0,t.bF)(Q,{type:"primary",size:"small",onClick:a[18]||(a[18]=e=>_("AddRow"))},{default:(0,t.k6)(()=>[(0,t.bF)(L,null,{default:(0,t.k6)(()=>[(0,t.bF)((0,i.R1)(o.Plus))]),_:1}),(0,t.bF)(R,{style:{color:"white"}},{default:(0,t.k6)(()=>[...a[33]||(a[33]=[(0,t.eW)("增行",-1)])]),_:1})]),_:1}),(0,t.bF)(E,{title:"将要删除选中的项目，是否继续?",onConfirm:a[19]||(a[19]=e=>_("DeleteRow")),width:"270","cancel-button-type":"info"},{reference:(0,t.k6)(()=>[(0,t.bF)(Q,{size:"small",disabled:(0,i.R1)(f).multipleTable.length<=0},{default:(0,t.k6)(()=>[(0,t.bF)(R,null,{default:(0,t.k6)(()=>[...a[34]||(a[34]=[(0,t.eW)("删除",-1)])]),_:1})]),_:1},8,["disabled"])]),_:1}),(0,t.bF)(B,{"inline-prompt":"","active-text":"含税","inactive-text":"不含税",modelValue:(0,i.R1)(O),"onUpdate:modelValue":a[20]||(a[20]=e=>(0,i.i9)(O)?O.value=e:null),modelModifiers:{trim:!0}},null,8,["modelValue"])]),(0,t.Lk)("div",null,[(0,t.bF)(Q,{type:"info",size:"small",onClick:a[21]||(a[21]=e=>_("Reselection","重选发票类型"))},{default:(0,t.k6)(()=>[...a[35]||(a[35]=[(0,t.eW)("重选发票类型 ",-1)])]),_:1}),(0,t.bF)(E,{title:"确定清空数据吗，清空后不可恢复?",onConfirm:a[22]||(a[22]=e=>_("ClearTable")),width:"270","cancel-button-type":"info"},{reference:(0,t.k6)(()=>[(0,t.bF)(Q,{size:"small"},{default:(0,t.k6)(()=>[...a[36]||(a[36]=[(0,t.eW)("清空重填",-1)])]),_:1})]),_:1})])]),(0,t.bF)(g,{model:(0,i.R1)(S),ref_key:"formTableRef",ref:z,rules:(0,i.R1)(P)},{default:(0,t.k6)(()=>[(0,t.bF)(G,{data:(0,i.R1)(S),"header-row-class-name":"headerRow","summary-method":(0,i.R1)(h),"show-summary":"",onSelectionChange:a[23]||(a[23]=e=>_("handleSelectionTable",e)),"row-class-name":({row:e})=>(0,i.R1)(f).multipleTable.find(l=>l.id===e.id)?"checkout":""},{default:(0,t.k6)(()=>[(0,t.bF)(K,{type:"selection",width:"66"}),(0,t.bF)(K,{align:"left",label:"序号",width:"86"},{default:(0,t.k6)(e=>[(0,t.eW)((0,n.v_)(e.$index+1),1)]),_:1}),(0,t.bF)(K,{label:"项目名称",align:"left",width:"306","class-name":"goodsname"},{header:(0,t.k6)(()=>[...a[37]||(a[37]=[(0,t.Lk)("i",null,"*",-1),(0,t.Lk)("span",null,"项目名称",-1)])]),default:(0,t.k6)(l=>[(0,t.bF)(r,{prop:"["+l.$index+"].goodsname",rules:(0,i.R1)(P).goodsname},{default:(0,t.k6)(()=>[(0,t.bF)(u,{modelValue:l.row.goodsname,"onUpdate:modelValue":e=>l.row.goodsname=e,modelModifiers:{trim:!0},"fetch-suggestions":e.queryClassListAsync,placeholder:"请输入",onSelect:e=>_("SetClassName",e,l.$index)},null,8,["modelValue","onUpdate:modelValue","fetch-suggestions","onSelect"]),(0,t.bF)(Q,{onClick:e=>_("SetMaintain",l.$index),type:"primary",size:"small",plain:""},{default:(0,t.k6)(()=>[(0,t.bF)(L,{style:{transform:"rotate(90deg)"}},{default:(0,t.k6)(()=>[(0,t.bF)((0,i.R1)(o.MoreFilled))]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["prop","rules"])]),_:1}),(0,t.bF)(K,{label:"规格型号",align:"left",width:"136"},{default:(0,t.k6)(e=>[(0,t.bF)(r,{prop:"spec"},{default:(0,t.k6)(()=>[(0,t.bF)(p,{modelValue:e.row.spec,"onUpdate:modelValue":l=>e.row.spec=l,modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:1}),(0,t.bF)(K,{label:"单位",align:"left",width:"136"},{default:(0,t.k6)(e=>[(0,t.bF)(r,{prop:"unit"},{default:(0,t.k6)(()=>[(0,t.bF)(p,{modelValue:e.row.unit,"onUpdate:modelValue":l=>e.row.unit=l,modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:1}),(0,t.bF)(K,{label:"数量",align:"left",width:"186"},{default:(0,t.k6)(e=>[(0,t.bF)(r,{prop:"num"},{default:(0,t.k6)(()=>[(0,t.bF)(p,{type:"number",modelValue:e.row.num,"onUpdate:modelValue":l=>e.row.num=l,modelModifiers:{trim:!0},placeholder:"请输入",min:0,onBlur:l=>_("SetSum",e.row),oninput:"value=value.replace(/[^\\d]/g,'')"},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1024)]),_:1}),(0,t.bF)(K,{label:"单价",align:"left",width:"180"},{header:(0,t.k6)(()=>[a[38]||(a[38]=(0,t.Lk)("i",null,"*",-1)),(0,t.Lk)("span",null,"单价"+(0,n.v_)((0,i.R1)(O)?"（含税）":"（不含税）"),1)]),default:(0,t.k6)(e=>[(0,t.bF)(r,{prop:"price"},{default:(0,t.k6)(()=>[(0,t.bF)(p,{type:"number",modelValue:e.row.price,"onUpdate:modelValue":l=>e.row.price=l,modelModifiers:{trim:!0},placeholder:"请输入",min:0,onBlur:l=>_("SetSum",e.row),oninput:"value=value.replace(/[^0-9.]/g,'')"},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1024)]),_:1}),(0,t.bF)(K,{label:"金额（含税）",align:"left",width:"180"},{header:(0,t.k6)(()=>[a[39]||(a[39]=(0,t.Lk)("i",null,"*",-1)),(0,t.Lk)("span",null,"金额"+(0,n.v_)((0,i.R1)(O)?"（含税）":"（不含税）"),1)]),default:(0,t.k6)(e=>[(0,t.bF)(r,{prop:"["+e.$index+"].receipts",rules:(0,i.R1)(P).receipts},{default:(0,t.k6)(()=>[(0,t.bF)(p,{disabled:"",modelValue:e.row.receipts,"onUpdate:modelValue":l=>e.row.receipts=l,modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1}),(0,t.bF)(K,{label:"税率/征收率",align:"left",width:"180","class-name":"error-msg"},{header:(0,t.k6)(()=>[...a[40]||(a[40]=[(0,t.Lk)("i",null,"*",-1),(0,t.Lk)("span",null,"税率/征收率",-1)])]),default:(0,t.k6)(e=>[(0,t.bF)(r,{prop:"["+e.$index+"].taxrate",rules:(0,i.R1)(P).taxrate},{default:(0,t.k6)(()=>[(0,t.bF)(J,{modelValue:e.row.taxrate,"onUpdate:modelValue":l=>e.row.taxrate=l,modelModifiers:{trim:!0},placeholder:"税率/征收率",onChange:l=>_("SetSum",e.row)},{prefix:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(e.row.taxrate&&(e.row.TaxrateList.find(l=>l.value===e.row.taxrate).flag?"服务税率":"")),1)]),default:(0,t.k6)(()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.row.TaxrateList,e=>((0,t.uX)(),(0,t.Wv)(j,{key:e.label,label:e.label,value:e.value},{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(e.label)+" "+(0,n.v_)(e.flag?"当前服务税率":""),1)]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["prop","rules"])]),_:1}),(0,t.bF)(K,{label:"税额",align:"left",width:"180"},{header:(0,t.k6)(()=>[...a[41]||(a[41]=[(0,t.Lk)("i",null,"*",-1),(0,t.Lk)("span",null,"税额",-1)])]),default:(0,t.k6)(e=>[(0,t.bF)(r,{prop:"["+e.$index+"].taxAmount",rules:(0,i.R1)(P).taxAmount},{default:(0,t.k6)(()=>[(0,t.bF)(p,{disabled:"",modelValue:e.row.taxAmount,"onUpdate:modelValue":l=>e.row.taxAmount=l,modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:1})]),_:1},8,["data","summary-method","row-class-name"])]),_:1},8,["model","rules"])]),(0,t.Lk)("div",$,[a[43]||(a[43]=(0,t.Lk)("aside",null,"价税合计(大写)",-1)),(0,t.Lk)("div",null,[(0,t.Lk)("span",null,(0,n.v_)(l.$Nzh.cn.toMoney(e.TaxSum)?.slice(3)),1),(0,t.Lk)("section",null,[a[42]||(a[42]=(0,t.Lk)("span",{class:"color"},"（小写）",-1)),(0,t.Lk)("span",null,(0,n.v_)("￥"+e.TaxSum),1)])])])]),(0,t.Lk)("footer",null,[(0,t.Lk)("div",q,[a[44]||(a[44]=(0,t.Lk)("div",{class:"top"},[(0,t.Lk)("h1",null,"备注信息")],-1)),(0,t.bF)(g,{"label-position":"top"},{default:(0,t.k6)(()=>[(0,t.bF)(r,{label:"备注"},{default:(0,t.k6)(()=>[(0,t.bF)(p,{type:"textarea",placeholder:"如开票人对文本长度等有特殊需求，应通过自定义附件要素录入",maxlength:"200","show-word-limit":"",modelValue:(0,i.R1)(X),"onUpdate:modelValue":a[24]||(a[24]=e=>(0,i.i9)(X)?X.value=e:null),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1})]),_:1})])]),(0,t.bF)(r,{label:"开票人：",class:"extNumber"},{default:(0,t.k6)(()=>[e.DigitalData.length>=1?((0,t.uX)(),(0,t.Wv)(J,{key:0,style:{width:"100px"},modelValue:(0,i.R1)(f).ext_number,"onUpdate:modelValue":a[25]||(a[25]=e=>(0,i.R1)(f).ext_number=e),modelModifiers:{trim:!0},placeholder:e.invoiceConfig.clerk,"popper-class":"popper-select"},{default:(0,t.k6)(()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.DigitalData,(l,a)=>((0,t.uX)(),(0,t.Wv)(j,{key:a,value:(l.Name||"开票人（暂无数据）")+"-"+l.name},{default:(0,t.k6)(()=>[(0,t.bF)(d.A,{item:l,invoiceCofing:e.invoiceConfig},null,8,["item","invoiceCofing"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","placeholder"])):(0,t.Q3)("",!0)]),_:1}),(0,t.Lk)("div",M,[(0,t.bF)(Q,{size:"small",onClick:a[26]||(a[26]=e=>_("saveDraft"))},{default:(0,t.k6)(()=>[...a[45]||(a[45]=[(0,t.eW)("保存草稿 ",-1)])]),_:1}),(0,t.bF)(Q,{type:"primary",size:"small",plain:"",onClick:a[27]||(a[27]=e=>_("onPreview"))},{default:(0,t.k6)(()=>[...a[46]||(a[46]=[(0,t.eW)("预览发票 ",-1)])]),_:1}),(0,t.bF)(Q,{type:"primary",size:"small",onClick:a[28]||(a[28]=e=>_("InvoiceIssuance"))},{default:(0,t.k6)(()=>[...a[47]||(a[47]=[(0,t.eW)("发票开具 ",-1)])]),_:1})])])}}};const z=(0,w.A)(P,[["__scopeId","data-v-43a75d55"]]);var O=z;const Q={class:"InvoicePreview"},X={class:"invoice"},E={class:"top"},B={class:"left"},K={class:"content"},j={class:"right"},J={class:"content"},G={class:"content"},H={class:"content"},Y={class:"message"},Z={class:"goodsname"},ee={class:"spec"},le={class:"unit"},ae={class:"num"},te={class:"price"},ne={class:"receipts"},ie={class:"taxrate"},oe={class:"taxAmount"},ue={class:"sum"},re={class:"price"},de={class:"taxAmount"},se={class:"Tax"},ce={class:"right"},me={class:"Capitalization"},pe={class:"Lowercase"},be={class:"remark"},ve={class:"purchaser text"},ke={key:0},fe={key:1},ge={class:"seller text"},he={key:0},_e={key:1},Fe={key:0,class:"remark_text text"},Le={class:"person"},ye={class:"button"};var Re={__name:"index",props:{PurchaserData:{type:Object,required:!0,default:()=>({Purchaser:!1})},SellerData:{type:Object,required:!0,default:()=>({Seller:!1})},invoiceData:{type:Object,required:!0,default:()=>({tableData:[],rulesTable:{},formTableRef:null})},remark:{type:Object,required:!0,default:()=>({remarkFlag:!1})},getSummaries:{type:Function,required:!0,default:()=>{}},TaxSum:{type:Number,required:!0,default:0},invoicePreview:{typeof:Boolean,required:!0,default:!1},getSum:{type:Function,required:!0,default:()=>{}}},emits:["update:invoicePreview"],setup(e,{emit:l}){const a=(0,u.lq)(),o=(0,t.WQ)("IssueList"),{proxy:r}=(0,t.nI)(),d=e,s=l,{PurchaserData:c,SellerData:m,invoiceData:p,remark:b,getSummaries:v}=(0,i.QW)(d),{Purchaser:k,PurchaserRef:f,Individual:g}=(0,i.QW)(d.PurchaserData),{Seller:h,SellerRef:_}=(0,i.QW)(d.SellerData),{tableData:F,rulesTable:L,formTableRef:y,isTaxIncluded:R,ext_number:w}=(0,i.QW)(d.invoiceData),x=(0,t.EW)(()=>{const e=JSON.parse(JSON.stringify(F.value));return p.value.isTaxIncluded&&e.map(e=>{e.price=Number(r.$calc(" a - b ",{a:e.price,b:e.taxAmount})),e.receipts=Number(r.$calc(" a * b ",{a:e.num,b:e.price})).toFixed(2)}),e}),S=(0,t.EW)(()=>e=>d.getSum(F.value,e)),V=(0,i.KR)(1);function C(){const e=document.querySelector(".dialog_Preview")?.clientWidth;V.value=(e-32)/1644}return window.onresize=C,(0,t.sV)(()=>{(0,t.dY)(()=>{C()})}),(l,u)=>{const r=(0,t.g2)("el-text"),d=(0,t.g2)("el-scrollbar"),p=(0,t.g2)("el-button");return(0,t.uX)(),(0,t.CE)("div",Q,[(0,t.Lk)("div",null,[(0,t.Lk)("div",{class:"box",style:(0,n.Tr)({zoom:V.value})},[(0,t.Lk)("div",X,[(0,t.Lk)("div",E,[(0,t.Lk)("div",B,[u[2]||(u[2]=(0,t.Lk)("p",null,"发票号码：",-1)),(0,t.bF)(r,null,{default:(0,t.k6)(()=>[...u[1]||(u[1]=[(0,t.eW)("-",-1)])]),_:1})]),(0,t.Lk)("div",K,[(0,t.Lk)("h1",null,"电子发票("+(0,n.v_)((0,i.R1)(o).find(e=>e.value+""===(0,i.R1)(a).query.type)?.label)+")",1)]),(0,t.Lk)("div",j,[u[4]||(u[4]=(0,t.Lk)("p",null,"发票号码：",-1)),(0,t.bF)(r,null,{default:(0,t.k6)(()=>[...u[3]||(u[3]=[(0,t.eW)("-",-1)])]),_:1})])]),(0,t.Lk)("header",null,[(0,t.Lk)("section",null,[u[7]||(u[7]=(0,t.Lk)("aside",null,[(0,t.Lk)("h1",null," 购买方信息 ")],-1)),(0,t.Lk)("div",J,[(0,t.Lk)("ul",null,[(0,t.Lk)("li",null,[u[5]||(u[5]=(0,t.Lk)("p",null,"名称：",-1)),(0,t.Lk)("span",null,(0,n.v_)((0,i.R1)(c).invoiceCompany),1)]),(0,t.Lk)("li",null,[u[6]||(u[6]=(0,t.Lk)("p",null,"统一社会信用代码/纳税人识别号：",-1)),(0,t.Lk)("span",null,(0,n.v_)((0,i.R1)(c).invoiceNo),1)])])])]),(0,t.Lk)("section",null,[u[10]||(u[10]=(0,t.Lk)("aside",null,[(0,t.Lk)("h1",null," 销售方信息 ")],-1)),(0,t.Lk)("div",G,[(0,t.Lk)("ul",null,[(0,t.Lk)("li",null,[u[8]||(u[8]=(0,t.Lk)("p",null,"名称：",-1)),(0,t.Lk)("span",null,(0,n.v_)((0,i.R1)(m).invoiceCompany),1)]),(0,t.Lk)("li",null,[u[9]||(u[9]=(0,t.Lk)("p",null,"统一社会信用代码/纳税人识别号：",-1)),(0,t.Lk)("span",null,(0,n.v_)((0,i.R1)(m).invoiceNo),1)])])])])]),(0,t.Lk)("main",null,[u[13]||(u[13]=(0,t.Fv)('<div class="top" data-v-07e474c2><div class="goodsname" data-v-07e474c2>项目名称</div><div class="spec" data-v-07e474c2>规格型号</div><div class="unit lefter" data-v-07e474c2>单位</div><div class="num lefter" data-v-07e474c2>数量</div><div class="price lefter" data-v-07e474c2>单价</div><div class="receipts lefter" data-v-07e474c2>金额</div><div class="taxrate" data-v-07e474c2>税率/征收率</div><div class="taxAmount lefter" data-v-07e474c2>税额</div></div>',1)),(0,t.Lk)("div",H,[(0,t.Lk)("div",Y,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(x.value,e=>((0,t.uX)(),(0,t.CE)("section",{key:e.id},[(0,t.Lk)("div",Z,[(0,t.Lk)("span",null,(0,n.v_)(e.goodsname),1)]),(0,t.Lk)("div",ee,[(0,t.Lk)("span",null,(0,n.v_)(e.spec),1)]),(0,t.Lk)("div",le,[(0,t.Lk)("span",null,(0,n.v_)(e.unit),1)]),(0,t.Lk)("div",ae,[(0,t.Lk)("span",null,(0,n.v_)(e.num),1)]),(0,t.Lk)("div",te,[(0,t.Lk)("span",null,(0,n.v_)(e.price),1)]),(0,t.Lk)("div",ne,[(0,t.Lk)("span",null,(0,n.v_)(e.receipts),1)]),(0,t.Lk)("div",ie,[(0,t.Lk)("span",null,(0,n.v_)(e.taxrate),1)]),(0,t.Lk)("div",oe,[(0,t.Lk)("span",null,(0,n.v_)(e.taxAmount),1)])]))),128))]),(0,t.Lk)("div",ue,[u[11]||(u[11]=(0,t.Lk)("div",{class:"total bold"},"合计",-1)),(0,t.Lk)("div",re,[(0,t.Lk)("span",null,(0,n.v_)(S.value("receipts")),1)]),u[12]||(u[12]=(0,t.Lk)("div",{class:"taxrate"},null,-1)),(0,t.Lk)("div",de,[(0,t.Lk)("span",null,(0,n.v_)(S.value("taxAmount")),1)])])])]),(0,t.Lk)("div",se,[u[15]||(u[15]=(0,t.Lk)("div",{class:"TaxSum bold"}," 价税合计（大写） ",-1)),(0,t.Lk)("div",ce,[(0,t.Lk)("div",me,(0,n.v_)(l.$Nzh.cn.toMoney(e.TaxSum)?.slice(3)),1),(0,t.Lk)("div",pe,[u[14]||(u[14]=(0,t.Lk)("div",{class:"bold"},"（小写）",-1)),(0,t.Lk)("span",null,(0,n.v_)("￥"+e.TaxSum),1)])])]),(0,t.Lk)("footer",null,[u[24]||(u[24]=(0,t.Lk)("aside",null,[(0,t.Lk)("h1",null," 备注 ")],-1)),(0,t.Lk)("div",be,[(0,t.bF)(d,null,{default:(0,t.k6)(()=>[(0,t.Lk)("section",null,[(0,t.Lk)("div",ve,[(0,t.Lk)("ul",null,[(0,i.R1)(c).phoneShow?((0,t.uX)(),(0,t.CE)("li",ke,[(0,t.Lk)("div",null,[(0,t.Lk)("p",null,[u[16]||(u[16]=(0,t.eW)("购买方地址：",-1)),(0,t.Lk)("span",null,(0,n.v_)((0,i.R1)(c).invoiceAddress),1)])]),(0,t.Lk)("div",null,[(0,t.Lk)("p",null,[u[17]||(u[17]=(0,t.eW)("电话：",-1)),(0,t.Lk)("span",null,(0,n.v_)((0,i.R1)(c).invoicePhone),1)])])])):(0,t.Q3)("",!0),(0,i.R1)(c).bankShow?((0,t.uX)(),(0,t.CE)("li",fe,[(0,t.Lk)("div",null,[(0,t.Lk)("p",null,[u[18]||(u[18]=(0,t.eW)("购方开户银行：",-1)),(0,t.Lk)("span",null,(0,n.v_)((0,i.R1)(c).invoiceAccount),1)])]),(0,t.Lk)("div",null,[(0,t.Lk)("p",null,[u[19]||(u[19]=(0,t.eW)("银行电话：",-1)),(0,t.Lk)("span",null,(0,n.v_)((0,i.R1)(c).invoiceBank),1)])])])):(0,t.Q3)("",!0)])]),(0,t.Lk)("div",ge,[(0,t.Lk)("ul",null,[(0,i.R1)(m).phoneShow?((0,t.uX)(),(0,t.CE)("li",he,[(0,t.Lk)("div",null,[(0,t.Lk)("p",null,[u[20]||(u[20]=(0,t.eW)("销售方地址：",-1)),(0,t.Lk)("span",null,(0,n.v_)((0,i.R1)(m).invoiceAddress),1)])]),(0,t.Lk)("div",null,[(0,t.Lk)("p",null,[u[21]||(u[21]=(0,t.eW)("电话：",-1)),(0,t.Lk)("span",null,(0,n.v_)((0,i.R1)(m).invoicePhone),1)])])])):(0,t.Q3)("",!0),(0,i.R1)(m).bankShow?((0,t.uX)(),(0,t.CE)("li",_e,[(0,t.Lk)("div",null,[(0,t.Lk)("p",null,[u[22]||(u[22]=(0,t.eW)("销方开户银行：",-1)),(0,t.Lk)("span",null,(0,n.v_)((0,i.R1)(m).invoiceAccount),1)])]),(0,t.Lk)("div",null,[(0,t.Lk)("p",null,[u[23]||(u[23]=(0,t.eW)("银行电话：",-1)),(0,t.Lk)("span",null,(0,n.v_)((0,i.R1)(m).invoiceBank),1)])])])):(0,t.Q3)("",!0)])]),(0,i.R1)(b).remarkMsg?((0,t.uX)(),(0,t.CE)("div",Fe,[(0,t.Lk)("ul",null,[(0,t.Lk)("li",null,(0,n.v_)((0,i.R1)(b).remarkMsg),1)])])):(0,t.Q3)("",!0)])]),_:1})])])]),(0,t.Lk)("div",Le,[u[25]||(u[25]=(0,t.Lk)("p",null,"开票人：",-1)),(0,t.Lk)("span",null,(0,n.v_)((0,i.R1)(w)?.split("-")[0]),1)])],4)]),(0,t.Lk)("div",ye,[(0,t.bF)(p,{class:"btnFour",size:"small",onClick:u[0]||(u[0]=e=>s("update:invoicePreview",!1))},{default:(0,t.k6)(()=>[...u[26]||(u[26]=[(0,t.eW)("取消 ",-1)])]),_:1})])])}}};const we=(0,w.A)(Re,[["__scopeId","data-v-07e474c2"]]);var xe=we,Se=a(78365),Ve=a(40834);const Ce={class:"MaintainVIew"},De={class:"table"};var Ie={__name:"MaintainView",emits:["SetClassName"],setup(e,{emit:l}){const a=l,{proxy:o}=(0,t.nI)(),u=(0,Ve.Pj)(),r=(0,i.Kh)({name:"",taxrate:"",formRef:null}),{name:d,taxrate:s,formRef:c}=(0,i.QW)(r);function m(e){e?.resetFields(),p()}function p(){const e={committeeId:u.state.user.committeeId,name:r.name,taxrate:r.taxrate,page:b.paginateData.page,per_page:b.paginateData.per_page,type_vue:1};b.loading=!0,o.$http.article.CommitteeInvoiceClassList(e).then(e=>{if(b.loading=!1,1===e.data.status||200===e.data.status){const l=e.data;b.tableData=l.list.list,b.paginateData={page:l.pageinfo.page,per_page:l.pageinfo.per_page,total:l.pageinfo.total},o.$message({type:"success",message:e.data.msg})}else o.$message({type:"error",message:e.data.msg})}).catch(e=>{console.error(e)})}const b=(0,i.Kh)({tableData:[],multipleTable:[],paginateData:{total:0,page:1,per_page:10},loading:!1}),{tableData:v,paginateData:k,loading:f}=(0,i.QW)(b);return(0,t.wB)(()=>b.paginateData,(e,l)=>{e&&0!==l.total&&(l&&l.page===e.page&&l.per_page===e.per_page||p())},{deep:!0}),(0,t.sV)(()=>{u.state.user.committeeId&&p()}),(e,l)=>{const o=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),d=(0,t.g2)("el-button"),s=(0,t.g2)("el-form"),b=(0,t.g2)("el-table-column"),g=(0,t.g2)("el-text"),h=(0,t.g2)("el-table"),_=(0,t.gN)("loading");return(0,t.uX)(),(0,t.CE)("div",Ce,[(0,t.bF)(s,{ref_key:"formRef",ref:c,model:r,inline:!0},{default:(0,t.k6)(()=>[(0,t.bF)(u,{label:"项目名",prop:"name"},{default:(0,t.k6)(()=>[(0,t.bF)(o,{modelValue:r.name,"onUpdate:modelValue":l[0]||(l[0]=e=>r.name=e),placeholder:"请输入项目名"},null,8,["modelValue"])]),_:1}),(0,t.bF)(u,{label:"税率/税收",prop:"taxrate"},{default:(0,t.k6)(()=>[(0,t.bF)(o,{modelValue:r.taxrate,"onUpdate:modelValue":l[1]||(l[1]=e=>r.taxrate=e),placeholder:"请输入税率/税收"},null,8,["modelValue"])]),_:1}),(0,t.bF)(u,null,{default:(0,t.k6)(()=>[(0,t.bF)(d,{size:"small",onClick:l[2]||(l[2]=e=>m((0,i.R1)(c))),loading:(0,i.R1)(f)},{default:(0,t.k6)(()=>[...l[5]||(l[5]=[(0,t.eW)("重置 ",-1)])]),_:1},8,["loading"]),(0,t.bF)(d,{size:"small",type:"primary",onClick:p,loading:(0,i.R1)(f)},{default:(0,t.k6)(()=>[...l[6]||(l[6]=[(0,t.eW)("查询",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),(0,t.Lk)("div",De,[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(h,{data:(0,i.R1)(v),onRowClick:l[3]||(l[3]=e=>a("SetClassName",e))},{default:(0,t.k6)(()=>[(0,t.bF)(b,{label:"序号"},{default:(0,t.k6)(e=>[(0,t.Lk)("span",null,(0,n.v_)(e.$index+1),1)]),_:1}),(0,t.bF)(b,{label:"项目名称"},{default:(0,t.k6)(e=>[(0,t.bF)(g,null,{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(e.row.className),1)]),_:2},1024)]),_:1}),(0,t.bF)(b,{label:"税率/征收率"},{default:(0,t.k6)(e=>[(0,t.bF)(g,null,{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(e.row.taxrate),1)]),_:2},1024)]),_:1}),(0,t.bF)(b,{label:"规格型号"},{default:(0,t.k6)(e=>[(0,t.bF)(g,null,{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(e.row.specifications),1)]),_:2},1024)]),_:1}),(0,t.bF)(b,{label:"含税标志"},{default:(0,t.k6)(e=>[(0,t.bF)(g,null,{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)("0%"===e.row.taxrate?"否":"是"),1)]),_:2},1024)]),_:1}),(0,t.bF)(b,{label:"商品和服务税收分类编码"},{default:(0,t.k6)(e=>[(0,t.bF)(g,null,{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(e.row.bm),1)]),_:2},1024)]),_:1}),(0,t.bF)(b,{label:"商品和服务分类简称"},{default:(0,t.k6)(e=>[(0,t.bF)(g,null,{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(e.row.referredName),1)]),_:2},1024)]),_:1}),(0,t.bF)(b,{label:"操作",width:"150"},{default:(0,t.k6)(e=>[(0,t.bF)(d,{size:"small",type:"primary",link:"",onClick:l=>a("SetClassName",e.row)},{default:(0,t.k6)(()=>[...l[7]||(l[7]=[(0,t.eW)("选择",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[_,(0,i.R1)(f)]]),(0,t.bF)(Se.A,{modelValue:(0,i.R1)(k),"onUpdate:modelValue":l[4]||(l[4]=e=>(0,i.i9)(k)?k.value=e:null),layout:"prev, pager, next, total"},null,8,["modelValue"])])])}}};const Ne=(0,w.A)(Ie,[["__scopeId","data-v-205b6860"]]);var Te=Ne,We=a(48016),Ae=a(67028);const Ue={class:"IssusInvoice"},$e={class:"box"};var qe={__name:"index",setup(e){const l=(0,Ve.Pj)(),{invoiceListType:a,TaxrateList:o}=(0,r.A)(),{proxy:d}=(0,t.nI)(),[s,c]=[(0,u.rd)(),(0,u.lq)()],m=(0,i.KR)({usedCreditLine:0,totalCreditLine:0,invoicedAmount:0,invoicedTax:0,invoicedBlueCount:0});function p(){const e={committee_id:l.state.user.committeeId,queryType:"1"};d.$http.article.CommitteeInvoiceGetCreditLine(e).then(e=>{const{status:l,list:a,msg:t}=e.data;200===l?Array.isArray(a)||"E0000"!==a.code||(m.value=a.result):d.$message.error(t)})}const b=(0,i.KR)("form"),v=(0,i.Kh)({form:{name:"form",title:"票样"},Invoice:{name:"Invoice",title:"表单"},IssueList:[...a],scale:1,invoicePreview:!1}),{IssueList:k,scale:f,invoicePreview:g}=(0,i.QW)(v);function h(){b.value="form"===b.value?"Invoice":"form"}(0,t.Gt)("IssueList",k);const _=(0,i.KR)(null);function F(){const e=document.querySelector(".IssusInvoice>.box");v.scale=(e.clientWidth-40)/1643}(0,t.sV)(()=>{F();const e=document.querySelector(".IssusInvoice>.box");_.value=new ResizeObserver(e=>{F()}),_.value.observe(e)}),(0,t.hi)(()=>{_.value?.disconnect()});const L={invoiceCompany:"buyername",invoiceNo:"taxnum",invoiceAddress:"address",invoicePhone:"phone",invoiceAccount:"bankaccountopening",invoiceBank:"account"},y={invoiceCompany:"",invoiceNo:"",invoiceAddress:"",invoicePhone:"",invoiceAccount:"",invoiceBank:""};let R=(0,i.Kh)({Purchaser:!1,phoneShow:!1,bankShow:!1,PurchaserRef:null,Individual:!1,...y}),w=(0,i.Kh)({Seller:!1,phoneShow:!1,bankShow:!1,SellerRef:null,...y}),x=(0,i.Kh)({row:{serialNumber:0,goodsname:"",spec:"",unit:"",num:0,price:0,receipts:"0.00",taxrate:"",taxAmount:"0.00",numberId:"",mc:""},tableData:[{id:1,serialNumber:1,goodsname:"",spec:"",unit:"",num:0,price:0,receipts:"0.00",taxrate:"",taxAmount:"0.00",numberId:"",TaxrateList:JSON.parse(JSON.stringify(o)),mc:""}],multipleTable:[],rulesTable:{goodsname:{required:!0,message:"请输入项目名称",trigger:"change"},receipts:{required:!0,message:"请输入金额（含税）",trigger:"blur"},taxrate:{required:!0,message:"请输入税率/征收率",trigger:"blur"},taxAmount:{required:!0,message:"请输入税额",trigger:"blur"}},formTableRef:null,isTaxIncluded:!1,ext_number:""});function V(e){e.num=e.num?e.num:0,e.price=e.price?e.price:0;const l=e.taxrate.slice(0,e.taxrate.length-1)/100;x.isTaxIncluded?(e.receipts=Number(d.$calc(" a * b ",{a:e.num,b:e.price})).toFixed(2),e.taxAmount=Number(d.$calc(" a / c / d",{a:e.receipts,b:l,c:1+l,d:e.num})).toFixed(2)):(e.receipts=Number(d.$calc(" a * b ",{a:e.num,b:e.price})).toFixed(2),e.taxAmount=Number(d.$calc(" a * b ",{a:e.receipts,b:l,c:e.num})).toFixed(2))}(0,t.wB)(()=>x.isTaxIncluded,e=>{e?x.tableData.map(e=>{e.price=Number(d.$calc(" a + (b / c) ",{a:e.price,b:e.taxAmount,c:e.num})),e.receipts=Number(d.$calc(" a * b ",{a:e.num,b:e.price})).toFixed(2)}):x.tableData.map(e=>{e.price=Number(d.$calc(" a - (b / c)",{a:e.price,b:e.taxAmount,c:e.num})),e.receipts=Number(d.$calc(" a * b ",{a:e.num,b:e.price})).toFixed(2)})});const C=(0,t.EW)(()=>{const e=x.tableData.reduce((e,l)=>e+(x.isTaxIncluded?Number(l.receipts):Number(d.$calc(" a + b ",{a:l.receipts,b:l.taxAmount}))),0);return e.toFixed(2)});function D(e){x.multipleTable=e}function I(){const e=x.tableData[x.tableData.length-1];e.num>0&&""!==e.taxrate&&e.receipts>0&&e.numberId?x.tableData.push({id:(new Date).getTime(),...x.row,serialNumber:e.serialNumber+1,TaxrateList:JSON.parse(JSON.stringify([...o]))}):d.$message({type:"warning",message:"请先填写完整数据，再进行添加"})}function N(){0!==x.multipleTable.length?x.tableData=x.tableData.filter((e,l)=>{if(0===l)return e;const a=x.multipleTable.find(l=>l.id===e.id);return a?void 0:e}):d.$message.error("请选择要删除的行")}function T(){x.tableData=x.tableData.map(e=>({...e,...x.row,TaxrateList:JSON.parse(JSON.stringify(o))}))}const W=(0,i.Kh)({IssueDialog:!1,IssueValue:c.query.type-0,title:"立即开票",maintain:!1,TableIndex:0}),{IssueDialog:A,IssueValue:U,title:$,maintain:q,TableIndex:M}=(0,i.QW)(W);function P(e){W.IssueDialog=!0,W.title=e}function z(){s.replace({path:"/IssueInvoice",query:{...c.query,type:W.IssueValue}}),W.title="立即开票",W.IssueDialog=!1}const Q=e=>{const{columns:l,data:a}=e,n=[];return l.forEach((e,l)=>{0===l?n[l]=(0,t.h)("div",{},[]):"项目名称"===e.label?n[l]=(0,t.h)("div",{style:{color:"#a56c56",fontWeight:"bold",marginLeft:"50px"}},["合计"]):"税率/征收率"===e.label?n[l]=(0,t.h)("div",{style:{textAlign:"center",fontWeight:"bold"}},[X(a,"receipts")]):"税额"===e.label?n[l]=(0,t.h)("div",{style:{textAlign:"right",fontWeight:"bold"}},[X(a,"taxAmount")]):n[l]=(0,t.h)("div",{},[])}),n};function X(e,l){let a="";const t=e.map(e=>(e[l]=Number(e[l]),e));return t.every(e=>Number.isNaN(e[l]))||(a=`￥ ${t.reduce((e,a)=>{const t=Number(a[l]);if(Number.isNaN(t))return e;{let t=e+a[l];return"receipts"===l&&x.isTaxIncluded&&(t-=Number(a["taxAmount"])),t}},0).toFixed(2)}`),a}function E(e){if(!e)return;const l=d.$getItem("sessionStorage","AddressPhoneAccountOpeningBank"),a=(0,i.KR)(!!l);a.value||d.$ElMessageBox({title:"提示",message:()=>(0,t.h)("div",null,[(0,t.h)("p",null,"相关信息将展示在备注栏，您可以在发票预览查看"),(0,t.h)(We.dI,{label:"十分钟不再显示",modelValue:a.value,"onUpdate:modelValue":e=>{a.value=e,d.$setItem("sessionStorage","AddressPhoneAccountOpeningBank",a.value,6e5)}})]),confirmButtonText:"确定",type:"warning",customStyle:{maxWidth:"440px"},showCancelButton:!1}).then(()=>{}).catch(()=>{})}let B=(0,i.Kh)({remarkFlag:!1,remarkMsg:"",Filler:"",Reviewer:""});const K=async()=>{let e=!0;if(!te.value.configId)return e=!1,d.$message.error("暂无开启的发票通道，请开启通道"),e;try{for(let l=0;l<x.tableData.length;l++){const a=x.tableData[l];if(!a.numberId)return d.$message.error(`第${l+1}行项目名称不正确`),void(e=!1)}}catch(l){e=!1}if(!x.ext_number)return d.$message({type:"warning",message:"请填写开票人"}),e=!1,e;try{const l=await(R.PurchaserRef?.validate());l||(e=!1)}catch(l){e=!1}try{const l=await(w.SellerRef?.validate());l||(e=!1)}catch(l){e=!1}try{const l=await(x.formTableRef?.validate());l||(e=!1)}catch(l){e=!1}return e};function j(){G(3)}async function J(){const e=await K();e&&(v.invoicePreview=!0)}const G=async(e=1)=>{const a=await K();if(a){const a={};for(const e in R)L[e]&&(a[L[e]]=R[e]);const t=(e,l)=>e&&l?3:!e&&l?2:e&&!l?1:e||l?void 0:0,n={showBankAccountType:t(w.bankShow,R.bankShow),showAddressTelType:t(w.phoneShow,R.phoneShow)};let i=JSON.parse(JSON.stringify(x.tableData));i=i.map(e=>{x.isTaxIncluded||(e.price=Number(d.$calc(" a + (b / c)",{a:e.price,b:e.taxAmount,c:e.num})),e.receipts=Number(d.$calc(" a * b ",{a:e.num,b:e.price})).toFixed(2));const l=e.goodsname.split("*")[2];return{serialNumber:e.serialNumber,detailName:l,specification:e.spec,unit:e.unit,number:e.num,dj:e.price,taxrate:e.taxrate,receipts:e.receipts,taxAmount:e.taxAmount,numberId:e.numberId,name:e.mc}});const o={type:e,invoiceId:c.query.invoiceId,committeeId:l.state.user.committeeId,invoiceType:c.query.type,...n,...a,detail:i,message:B.remarkMsg};console.log(o,"params"),o.ext_number=le.value.findIndex(e=>e.name===x.ext_number.split("-")[1])+1,d.$Loadimg.showLoading(),d.$http.article.CommitteeInvoiceAdd(o).then(l=>{d.$Loadimg.hideLoading(),1===l.data.status||200===l.data.status?(3===e?d.$message.success("保存草稿箱成功 ,三秒后跳转列表页"):d.$message.success(l.data.msg+",三秒后跳转列表页"),d.$Loadimg.showLoading(),setTimeout(()=>{d.$Loadimg.hideLoading(),s.push({path:"/blueInvoice",query:{version:c.query.version}})},3e3)):d.$message.error(l.data.msg)})}};function H(){if(!c.query.id)return;const e={id:c.query.id,type_vue:1,committeeId:l.state.user.committeeId};d.$http.article.CommitteeInvoiceDetail(e).then(e=>{if(1===e.data.status||200===e.data.status)try{const{invoiceData:l,invoiceDetail:a}=e.data.list;7===l.invoiceStatus?d.$message({type:"warning",message:l.msg}):d.$message({type:"success",message:e.data.msg}),x.tableData=a.map(e=>{const l=e.taxrate.slice(0,e.taxrate.length-1)/100;return x.isTaxIncluded||(e.dj=Number(d.$calc(" a / (1 + b) ",{a:e.dj||0,b:l})),e.receipts=Number(d.$calc(" a * b ",{a:e.number,b:e.dj})).toFixed(2)),e.taxAmount=Number(d.$calc(" a * b",{a:e.receipts,b:l})).toFixed(2),{serialNumber:e.serialNumber,goodsname:`*${e.name}*${e.detailName}`,spec:e.specification,unit:e.unit,num:e.number,price:e.dj,taxrate:e.taxrate,receipts:e.receipts,taxAmount:e.taxAmount,numberId:e.numberId,TaxrateList:JSON.parse(JSON.stringify(o)),mc:e.name}});const t={};for(const e in L)t[L[e]]=e;for(const e in l)t[e]&&(R[t[e]]=l[e]);B.remarkMsg=l.message}catch(l){console.error(l)}else d.$message({type:"error",message:e.data.msg})}).catch(e=>{console.error(e)})}function Y(e){W.maintain=!0,W.TableIndex=e}function Z(e,l){void 0!==l&&(W.TableIndex=l),x.tableData[W.TableIndex].goodsname=`*${e.referredName}*${e.className}`,x.tableData[W.TableIndex].unit=e.company,x.tableData[W.TableIndex].spec=e.specifications,x.tableData[W.TableIndex].taxrate=e.taxrate,x.tableData[W.TableIndex].numberId=e.bm,x.tableData[W.TableIndex].mc=e.referredName,x.tableData[W.TableIndex].TaxrateList.map(l=>{l.flag=e.taxrate===l.value}),V(x.tableData[W.TableIndex]),W.maintain=!1}(0,t.wB)([()=>c.query.id,()=>l.state.user.committeeId],e=>{e[0]&&e[1]&&H()},{immediate:!0});const{CodeStatus:ee,DigitalData:le,getQrCodeStatus:ae,invoiceConfig:te}=(0,Ae.A)(d);function ne(){const e={committeeId:l.state.user.committeeId,type_vue:1};d.$Loadimg.showLoading(),d.$http.article.CommitteeInvoiceConfigList(e).then(e=>{if(d.$Loadimg.hideLoading(),1===e.data.status||200===e.data.status){const{config:a,list:t}=e.data.list;try{const e=a.find(e=>t.find(l=>1===l.status&&l.invoiceConfigId===e.configId))||{};te.value=e,w.invoiceCompany=e.enterpriseName,w.invoiceNo=e.enterpriseCode,w.invoiceAddress=e.saleaddress,w.invoicePhone=e.salephone,w.invoiceAccount=e.saleaccount?.split(" ")[0],w.invoiceBank=e.saleaccount?.split(" ")[1]}catch(l){d.$message.error(e.data.msg)}}else d.$message.error(e.data.msg)})}async function ie(e="",a){e.split("*")?.length>=3&&(e=e.split("*")[2]);const t={committeeId:l.state.user.committeeId,name:e,taxrate:"",page:1,per_page:99999,type_vue:1},n=await d.$http.article.CommitteeInvoiceClassList(t);if(1===n.data.status||200===n.data.status){const e=n.data,l=e.list.list.map(e=>({value:`*${e.referredName}*${e.className}`,...e}));a(l)}}return(0,t.wB)(()=>l.state.user.committeeId,e=>{e&&(ne(),p(),ae())},{immediate:!0}),(e,l)=>{const a=(0,t.g2)("el-button"),o=(0,t.g2)("el-scrollbar"),u=(0,t.g2)("el-dialog"),r=(0,t.g2)("el-radio"),d=(0,t.g2)("el-radio-group"),s=(0,t.g2)("el-form-item");return(0,t.uX)(),(0,t.CE)("div",Ue,[(0,t.Lk)("div",$e,[(0,t.Lk)("header",null,[l[19]||(l[19]=(0,t.Lk)("div",{class:"blueLine"}," 蓝票发票开具 ",-1)),(0,t.bF)(a,{type:"primary",plain:"",onClick:h},{default:(0,t.k6)(()=>[(0,t.eW)("切换至"+(0,n.v_)(v[b.value].title)+"视图 ",1)]),_:1})]),(0,t.Lk)("main",{style:(0,n.Tr)({transform:`scale(${(0,i.R1)(f)})`})},[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(v,e=>((0,t.uX)(),(0,t.CE)(t.FK,{key:e.name},["form"===e.name&&"form"===b.value?((0,t.uX)(),(0,t.Wv)(S,{key:0,PurchaserData:(0,i.R1)(R),"onUpdate:PurchaserData":l[0]||(l[0]=e=>(0,i.i9)(R)?R.value=e:R=e),SellerData:(0,i.R1)(w),"onUpdate:SellerData":l[1]||(l[1]=e=>(0,i.i9)(w)?w.value=e:w=e),invoiceData:(0,i.R1)(x),"onUpdate:invoiceData":l[2]||(l[2]=e=>(0,i.i9)(x)?x.value=e:x=e),remark:(0,i.R1)(B),"onUpdate:remark":l[3]||(l[3]=e=>(0,i.i9)(B)?B.value=e:B=e),dataOverview:m.value,getSummaries:Q,TaxSum:C.value,DigitalData:(0,i.R1)(le),invoiceConfig:(0,i.R1)(te),queryClassListAsync:ie,onSetMaintain:Y,onSetSum:V,onIsShow:E,onSaveDraft:j,onOnPreview:J,onInvoiceIssuance:G,onReselection:P,onAddRow:I,onDeleteRow:N,onClearTable:T,onHandleSelectionTable:D,onSetClassName:Z},null,8,["PurchaserData","SellerData","invoiceData","remark","dataOverview","TaxSum","DigitalData","invoiceConfig"])):(0,t.Q3)("",!0),"Invoice"===e.name&&"Invoice"===b.value?((0,t.uX)(),(0,t.Wv)(O,{key:1,PurchaserData:(0,i.R1)(R),"onUpdate:PurchaserData":l[4]||(l[4]=e=>(0,i.i9)(R)?R.value=e:R=e),SellerData:(0,i.R1)(w),"onUpdate:SellerData":l[5]||(l[5]=e=>(0,i.i9)(w)?w.value=e:w=e),invoiceData:(0,i.R1)(x),"onUpdate:invoiceData":l[6]||(l[6]=e=>(0,i.i9)(x)?x.value=e:x=e),remark:(0,i.R1)(B),"onUpdate:remark":l[7]||(l[7]=e=>(0,i.i9)(B)?B.value=e:B=e),dataOverview:m.value,getSummaries:Q,TaxSum:C.value,DigitalData:(0,i.R1)(le),invoiceConfig:(0,i.R1)(te),queryClassListAsync:ie,onSetMaintain:Y,onSetSum:V,onIsShow:E,onSaveDraft:j,onOnPreview:J,onInvoiceIssuance:G,onReselection:P,onAddRow:I,onDeleteRow:N,onClearTable:T,onHandleSelectionTable:D,onSetClassName:Z},null,8,["PurchaserData","SellerData","invoiceData","remark","dataOverview","TaxSum","DigitalData","invoiceConfig"])):(0,t.Q3)("",!0)],64))),128))],4)]),(0,t.bF)(u,{modelValue:(0,i.R1)(g),"onUpdate:modelValue":l[13]||(l[13]=e=>(0,i.i9)(g)?g.value=e:null),style:{width:"clamp(1200px, 60vw, 1680px)"},title:"预览发票",class:"dialog_Preview"},{default:(0,t.k6)(()=>[(0,t.bF)(o,{height:"100%"},{default:(0,t.k6)(()=>[(0,t.bF)(xe,{PurchaserData:(0,i.R1)(R),"onUpdate:PurchaserData":l[8]||(l[8]=e=>(0,i.i9)(R)?R.value=e:R=e),SellerData:(0,i.R1)(w),"onUpdate:SellerData":l[9]||(l[9]=e=>(0,i.i9)(w)?w.value=e:w=e),invoiceData:(0,i.R1)(x),"onUpdate:invoiceData":l[10]||(l[10]=e=>(0,i.i9)(x)?x.value=e:x=e),remark:(0,i.R1)(B),"onUpdate:remark":l[11]||(l[11]=e=>(0,i.i9)(B)?B.value=e:B=e),invoicePreview:(0,i.R1)(g),"onUpdate:invoicePreview":l[12]||(l[12]=e=>(0,i.i9)(g)?g.value=e:null),getSummaries:Q,TaxSum:C.value,getSum:X},null,8,["PurchaserData","SellerData","invoiceData","remark","invoicePreview","TaxSum"])]),_:1})]),_:1},8,["modelValue"]),(0,t.bF)(u,{class:"IssueDialog",modelValue:(0,i.R1)(A),"onUpdate:modelValue":l[16]||(l[16]=e=>(0,i.i9)(A)?A.value=e:null),title:(0,i.R1)($),width:"600"},{default:(0,t.k6)(()=>[(0,t.bF)(s,{class:"IssueForm",label:"电子发票选择票类：",required:!0},{default:(0,t.k6)(()=>[(0,t.bF)(d,{modelValue:(0,i.R1)(U),"onUpdate:modelValue":l[14]||(l[14]=e=>(0,i.i9)(U)?U.value=e:null)},{default:(0,t.k6)(()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,i.R1)(k),e=>((0,t.uX)(),(0,t.Wv)(r,{value:e.value,key:e.label},{default:(0,t.k6)(()=>[(0,t.eW)((0,n.v_)(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,t.bF)(s,null,{default:(0,t.k6)(()=>[(0,t.bF)(a,{size:"small",onClick:l[15]||(l[15]=e=>A.value=!1)},{default:(0,t.k6)(()=>[...l[20]||(l[20]=[(0,t.eW)("取消 ",-1)])]),_:1}),(0,t.bF)(a,{type:"primary",size:"small",onClick:z},{default:(0,t.k6)(()=>[...l[21]||(l[21]=[(0,t.eW)("确认 ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue","title"]),(0,t.bF)(u,{modelValue:(0,i.R1)(q),"onUpdate:modelValue":l[17]||(l[17]=e=>(0,i.i9)(q)?q.value=e:null),title:"项目信息分类",onClosed:l[18]||(l[18]=e=>M.value=0)},{default:(0,t.k6)(()=>[(0,t.bF)(Te,{onSetClassName:Z})]),_:1},8,["modelValue"])])}}};const Me=(0,w.A)(qe,[["__scopeId","data-v-10c66f7e"]]);var Pe=Me}}]);