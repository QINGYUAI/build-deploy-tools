"use strict";(self["webpackChunkmeetingvue3"]=self["webpackChunkmeetingvue3"]||[]).push([[264],{10264:function(e,l,t){t.r(l),t.d(l,{default:function(){return W}});t(44114),t(18111),t(7588);var a=t(20641),n=t(50953),i=t(90033),m=t(77153),d=t(25844),s=t(71029),o=t(40834);const u={class:"back_text back_padding print"},c={class:"back_center_bg back_padding"},r={class:"price_box"},p={class:"priceImg"},g=["src"],h={class:"print_card"},k=["onClick"],b={class:"price_btn"},f={class:"price_addBox"},_={class:"price_box"},w={class:"priceImg"},y=["src"],v={class:"print_card"},F=["onClick"],L={class:"price_btn"},T={class:"newTemplate_box_img"},C=["src"],x={style:{"text-align":"center","margin-top":"20px"}},V=["innerHTML"],R={style:{"text-align":"center","margin-top":"20px"}};var $={__name:"print",setup(e,{expose:l}){const t=(0,s.lq)(),$=(0,s.rd)(),I=(0,o.Pj)(),{proxy:z}=(0,a.nI)(),W=(0,n.Kh)({activeName:"1",activeNameModel:"1",newTemplateShow:!1,printList:[],muList:[],mumodel:"",BaseUrl:I.state.BaseUrl,newTemplate:{name:"",width:"70",height:"90",lang:"",img:"",content:""},newTemplateRef:null,changenametc:!1,thechangelist:{},content:"",changenametc1:!1}),{activeName:X,activeNameModel:E,newTemplateShow:N,printList:U,muList:q,mumodel:M,BaseUrl:K,newTemplate:B,newTemplateRef:S,changenametc:O,thechangelist:j,content:P,changenametc1:G}=(0,n.QW)(W);function H(e){W.changenametc=!0,W.thechangelist=e}function A(e){W.changenametc1=!0,z.$Loadimg.showLoading();const l={id:e,type_vue:1,meetingId:t.query.meeting};z.$http.article.preveldzjt(l).then(e=>{z.$Loadimg.hideLoading(),1===e.data.status?(W.content=e.data.list.content,z.$message.success(e.data.msg)):z.$message.error(e.data.msg)})}function D(){if(W.thechangelist.newname){const e={id:W.thechangelist.templateId,name:W.thechangelist.newname,type_vue:1,meetingId:t.query.meeting};z.$Loadimg.showLoading(),z.$http.article.editTemplateName(e).then(e=>{z.$Loadimg.hideLoading(),1===e.data.status?(W.changenametc=!1,le()):z.$message.error(e.data.msg)})}else z.$message.error("模板名称不能为空")}function Q(e,l){(0,a.dY)(()=>{null!==W.newTemplate[l]&&(W.newTemplate[l]=W.newTemplate[l].replace(/[^\d]/g,""))})}function Y(){}function J(e){Q("",e),"width"===e?W.newTemplate.width<60?(W.newTemplate.width=60,z.$message.error("宽度下限不得小于60mm")):W.newTemplate.width>210&&(W.newTemplate.width=210,z.$message.error("宽度上限不得大于210mm")):W.newTemplate.height<40?(W.newTemplate.height=40,z.$message.error("高度下限不得小于40mm")):W.newTemplate.height>297&&(W.newTemplate.height=297,z.$message.error("高度下限不得大于297mm"))}function Z(){W.newTemplateShow=!0,ee()}function ee(){const e={type:W.activeName,sort:2,type_vue:1,meetingId:t.query.meeting};z.$Loadimg.showLoading(),z.$http.article.PrintGetList(e).then(e=>{z.$Loadimg.hideLoading(),1===e.data.status?W.muList=e.data.list:z.$message.error(e.data.msg)})}function le(e){W.activeNameModel=e?e.props.name:W.activeNameModel;const l={type:W.activeName,sort:W.activeNameModel,type_vue:1,meetingId:t.query.meeting};z.$Loadimg.showLoading(),z.$http.article.PrintGetList(l).then(e=>{z.$Loadimg.hideLoading(),1===e.data.status?(e.data.list.forEach(e=>{e.newname=e.name}),W.printList=e.data.list):z.$message.error(e.data.msg)})}function te(e){const l=e;l.invalid=1,l.type_vue=1,z.$Loadimg.showLoading(),z.$http.article.editTemplate(l).then(e=>{z.$Loadimg.hideLoading(),1===e.data.status?le():z.$message.error(e.data.msg)})}function ae(){W.newTemplateShow=!1,W.newTemplate={name:"",width:"",height:"",lang:"",mumodel:"",img:"",content:""},W.mumodel=""}function ne(e){e.validate(e=>{if(!e)return console.log("error submit!!"),!1;{const e=W.newTemplate;e.type_vue=1,e.meetingId=t.query.meeting,e.type=W.activeName,e.sort=W.activeNameModel,z.$Loadimg.showLoading(),z.$http.article.addTemplate(e).then(e=>{z.$Loadimg.hideLoading(),1===e.data.status?(z.$message.success("新增成功"),W.newTemplateShow=!1,W.newTemplate={name:"",width:"70",height:"90",lang:"",mumodel:"",img:"",content:""},W.mumodel="",le()):z.$message.error(e.data.msg)})}})}function ie(e){console.log(e),$.push({path:"editTemplate",query:{meeting:t.query.meeting,id:e}})}function me(e,l){const t=l*(70/e);return t}return(0,a.wB)(()=>W.mumodel,e=>{console.log("1111111"),W.muList.forEach(l=>{l.templateId===e&&(W.newTemplate.content=l.content,W.newTemplate.img=l.img)})}),(0,a.sV)(()=>{le()}),l({activeName:X,activeNameModel:E,newTemplateShow:N,printList:U,muList:q,mumodel:M,newTemplate:B,changenametc:O,thechangelist:j,content:P,changenametc1:G,changembname:H,preview:A,rightchange:D,handleClick:Y,OnchangeMM:J,OnnewTemplate:Z,OndeleteTemplate:te,handleClose:ae,OnaddTemplate:ne,Onedit:ie,getmbheight:me}),(e,l)=>{const t=(0,a.g2)("Edit"),s=(0,a.g2)("el-icon"),o=(0,a.g2)("el-button"),$=(0,a.g2)("Delete"),I=(0,a.g2)("FullScreen"),z=(0,a.g2)("el-button-group"),W=(0,a.g2)("el-col"),ee=(0,a.g2)("el-row"),de=(0,a.g2)("el-tab-pane"),se=(0,a.g2)("el-tabs"),oe=(0,a.g2)("el-input"),ue=(0,a.g2)("el-form-item"),ce=(0,a.g2)("el-option"),re=(0,a.g2)("el-select"),pe=(0,a.g2)("el-form"),ge=(0,a.g2)("el-dialog");return(0,a.uX)(),(0,a.CE)("div",u,[(0,a.Lk)("div",c,[(0,a.bF)(se,{modelValue:(0,n.R1)(X),"onUpdate:modelValue":l[2]||(l[2]=e=>(0,n.i9)(X)?X.value=e:null),type:"border-card",class:"demo-tabs",onTabClick:Y},{default:(0,a.k6)(()=>[(0,a.bF)(de,{label:"胸卡",name:"1"},{default:(0,a.k6)(()=>[(0,a.bF)(se,{modelValue:(0,n.R1)(E),"onUpdate:modelValue":l[1]||(l[1]=e=>(0,n.i9)(E)?E.value=e:null),class:"demo-tabs",onTabClick:le},{default:(0,a.k6)(()=>[(0,a.bF)(de,{label:"普通模板",name:"1"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",r,[(0,a.bF)(ee,{gutter:20},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(U),(e,l)=>((0,a.uX)(),(0,a.Wv)(W,{key:l,span:6,class:"price_col"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",p,[e.img?((0,a.uX)(),(0,a.CE)("img",{key:0,src:(0,n.R1)(K)+e.img,alt:"",class:"price_img",style:(0,i.Tr)({height:me(e.width,e.height)+"mm"})},null,12,g)):((0,a.uX)(),(0,a.CE)("img",{key:1,src:m,alt:"",class:"price_img",style:(0,i.Tr)({height:me(e.width,e.height)+"mm"})},null,4)),(0,a.Lk)("div",h,[(0,a.Lk)("p",null,[(0,a.eW)((0,i.v_)(e.name)+" ",1),"cn"==e.lang?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)(" （中文）")],64)):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.eW)(" （英文）")],64)),(0,a.Lk)("img",{style:{width:"12px",cursor:"pointer"},src:d,alt:"",onClick:l=>H(e)},null,8,k)]),(0,a.Lk)("p",null,(0,i.v_)(e.width)+"mm*"+(0,i.v_)(e.height)+"mm",1)])]),(0,a.Lk)("p",b,[(0,a.bF)(z,null,{default:(0,a.k6)(()=>[(0,a.bF)(o,{type:"primary",size:"small",onClick:l=>ie(e.templateId)},{default:(0,a.k6)(()=>[(0,a.bF)(s,{class:"el-icon-edit-outline",style:{"font-size":"15px"}},{default:(0,a.k6)(()=>[(0,a.bF)(t)]),_:1})]),_:1},8,["onClick"]),(0,a.bF)(o,{type:"primary",size:"small",onClick:l=>te(e)},{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"font-size":"15px"}},{default:(0,a.k6)(()=>[(0,a.bF)($)]),_:1})]),_:1},8,["onClick"]),(0,a.bF)(o,{type:"primary",size:"small",onClick:l=>A(e.templateId)},{default:(0,a.k6)(()=>[(0,a.bF)(s,{class:"el-icon-full-screen",style:{"font-size":"15px"}},{default:(0,a.k6)(()=>[(0,a.bF)(I)]),_:1})]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128)),(0,a.bF)(W,{span:6,class:"price_col"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",f,[(0,a.Lk)("p",{class:"price_add",onClick:l[0]||(l[0]=e=>Z()),style:{cursor:"pointer"}}," + ")])]),_:1})]),_:1})])]),_:1}),(0,a.bF)(de,{label:"通用母版",name:"2"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",_,[(0,a.bF)(ee,{gutter:20},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(U),(e,u)=>((0,a.uX)(),(0,a.Wv)(W,{key:u,span:6,class:"price_col"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",w,[e.img?((0,a.uX)(),(0,a.CE)("img",{key:0,src:(0,n.R1)(K)+e.img,alt:"",class:"price_img",style:(0,i.Tr)({height:me(e.width,e.height)+"mm"})},null,12,y)):((0,a.uX)(),(0,a.CE)("img",{key:1,src:m,alt:"",class:"price_img",style:(0,i.Tr)({height:me(e.width,e.height)+"mm"})},null,4)),(0,a.Lk)("div",v,[(0,a.Lk)("p",null,[(0,a.eW)((0,i.v_)(e.name)+" ",1),"cn"==e.lang?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)(" （中文）")],64)):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.eW)(" （英文）")],64)),(0,a.Lk)("img",{style:{width:"12px",cursor:"pointer"},src:d,alt:"",onClick:l=>H(e)},null,8,F)]),(0,a.Lk)("p",null,(0,i.v_)(e.width)+"mm*"+(0,i.v_)(e.height)+"mm",1)])]),(0,a.Lk)("p",L,[(0,a.bF)(z,null,{default:(0,a.k6)(()=>[(0,a.bF)(o,{type:"primary",size:"small",onClick:l=>ie(e.templateId)},{default:(0,a.k6)(()=>[(0,a.bF)(s,{class:"el-icon-edit-outline",style:{"font-size":"15px"}},{default:(0,a.k6)(()=>[(0,a.bF)(t)]),_:1})]),_:1},8,["onClick"]),(0,a.bF)(o,{type:"primary",size:"small",onClick:l=>te(e)},{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"font-size":"15px"}},{default:(0,a.k6)(()=>[(0,a.bF)($)]),_:1})]),_:1},8,["onClick"]),(0,a.bF)(o,{type:"primary",size:"small",onClick:l=>A(e.templateId)},{default:(0,a.k6)(()=>[...l[20]||(l[20]=[(0,a.Lk)("i",{class:"el-icon-full-screen",style:{"font-size":"15px"}},null,-1)])]),_:1},8,["onClick"])]),_:2},1024)])]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,a.bF)(de,{label:"桌卡",name:"2"},{default:(0,a.k6)(()=>[...l[21]||(l[21]=[(0,a.eW)("桌卡",-1)])]),_:1}),(0,a.bF)(de,{label:"自助卡",name:"3"},{default:(0,a.k6)(()=>[...l[22]||(l[22]=[(0,a.eW)("自助卡",-1)])]),_:1}),(0,a.bF)(de,{label:"分房卡",name:"4"},{default:(0,a.k6)(()=>[...l[23]||(l[23]=[(0,a.eW)("分房卡",-1)])]),_:1}),(0,a.bF)(de,{label:"缴费凭证",name:"5"},{default:(0,a.k6)(()=>[...l[24]||(l[24]=[(0,a.eW)("缴费凭证",-1)])]),_:1}),(0,a.bF)(de,{label:"日程表",name:"6"},{default:(0,a.k6)(()=>[...l[25]||(l[25]=[(0,a.eW)("日程表",-1)])]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)(ge,{"close-on-click-modal":!1,title:"新建模板",modelValue:(0,n.R1)(N),"onUpdate:modelValue":l[13]||(l[13]=e=>(0,n.i9)(N)?N.value=e:null),width:"600px","before-close":ae},{default:(0,a.k6)(()=>[(0,a.bF)(pe,{model:(0,n.R1)(B),ref_key:"newTemplateRef",ref:S,"label-width":"80px",class:"demo-dynamic"},{default:(0,a.k6)(()=>[(0,a.bF)(ue,{prop:"name",label:"模板名称",rules:[{required:!0,message:"请输入模板名称",trigger:"blur"}]},{default:(0,a.k6)(()=>[(0,a.bF)(oe,{modelValue:(0,n.R1)(B).name,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,n.R1)(B).name=e),style:{width:"275px"}},null,8,["modelValue"])]),_:1}),(0,a.bF)(ue,{prop:"width",label:"模板大小",required:""},{default:(0,a.k6)(()=>[(0,a.bF)(oe,{size:"small",modelValue:(0,n.R1)(B).width,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,n.R1)(B).width=e),placeholder:"请输入内容",style:{width:"100px"},onBlur:l[5]||(l[5]=e=>J("width")),onInput:l[6]||(l[6]=e=>Q((0,n.R1)(B).width,"width")),type:"number",min:60,max:210},null,8,["modelValue"]),l[26]||(l[26]=(0,a.eW)("mm X ",-1)),(0,a.bF)(oe,{size:"small",modelValue:(0,n.R1)(B).height,"onUpdate:modelValue":l[7]||(l[7]=e=>(0,n.R1)(B).height=e),placeholder:"请输入内容",style:{width:"100px"},onBlur:l[8]||(l[8]=e=>J("height")),onInput:l[9]||(l[9]=e=>Q((0,n.R1)(B).height,"height")),type:"number",min:40,max:297},null,8,["modelValue"]),l[27]||(l[27]=(0,a.eW)("mm ",-1))]),_:1}),(0,a.bF)(ue,{prop:"lang",label:"语种",rules:[{required:!0,message:"请选择语种",trigger:"change"}]},{default:(0,a.k6)(()=>[(0,a.bF)(re,{size:"small",modelValue:(0,n.R1)(B).lang,"onUpdate:modelValue":l[10]||(l[10]=e=>(0,n.R1)(B).lang=e),placeholder:"请选择",style:{width:"275px"}},{default:(0,a.k6)(()=>[(0,a.bF)(ce,{value:"cn",label:"中文"}),(0,a.bF)(ce,{value:"en",label:"英文"})]),_:1},8,["modelValue"])]),_:1}),(0,a.bF)(ue,{prop:"mumodel",label:"母版调用"},{default:(0,a.k6)(()=>[(0,a.bF)(re,{size:"small",modelValue:(0,n.R1)(M),"onUpdate:modelValue":l[11]||(l[11]=e=>(0,n.i9)(M)?M.value=e:null),placeholder:"请选择",style:{width:"275px"}},{default:(0,a.k6)(()=>[(0,a.bF)(ce,{value:"",label:"请选择"}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,n.R1)(q),e=>((0,a.uX)(),(0,a.Wv)(ce,{key:e.templateId,label:e.name,value:e.templateId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),(0,a.Lk)("div",T,[(0,a.Lk)("img",{src:(0,n.R1)(K)+(0,n.R1)(B).img,alt:"",style:{height:"200px","margin-left":"50px","margin-right":"20px"}},null,8,C)]),(0,a.bF)(o,{size:"small",type:"primary",onClick:l[12]||(l[12]=e=>ne((0,n.R1)(S)))},{default:(0,a.k6)(()=>[...l[28]||(l[28]=[(0,a.eW)("保存",-1)])]),_:1})]),_:1},8,["modelValue"])]),(0,a.bF)(ge,{title:"修改模板名称",modelValue:(0,n.R1)(O),"onUpdate:modelValue":l[17]||(l[17]=e=>(0,n.i9)(O)?O.value=e:null),width:"500px"},{default:(0,a.k6)(()=>[(0,a.bF)(ee,{gutter:20},{default:(0,a.k6)(()=>[(0,a.bF)(W,{span:5},{default:(0,a.k6)(()=>[...l[29]||(l[29]=[(0,a.Lk)("span",{style:{"line-height":"40px"}},"模板名称：",-1)])]),_:1}),(0,a.bF)(W,{span:19},{default:(0,a.k6)(()=>[(0,a.bF)(oe,{modelValue:(0,n.R1)(j).newname,"onUpdate:modelValue":l[14]||(l[14]=e=>(0,n.R1)(j).newname=e),placeholder:"请输入变量名称"},null,8,["modelValue"])]),_:1})]),_:1}),(0,a.Lk)("div",x,[(0,a.bF)(o,{size:"small",type:"primary",onClick:l[15]||(l[15]=e=>O.value=!1)},{default:(0,a.k6)(()=>[...l[30]||(l[30]=[(0,a.eW)("取消",-1)])]),_:1}),(0,a.bF)(o,{size:"small",type:"primary",onClick:l[16]||(l[16]=e=>D())},{default:(0,a.k6)(()=>[...l[31]||(l[31]=[(0,a.eW)("确认修改",-1)])]),_:1})])]),_:1},8,["modelValue"]),(0,a.bF)(ge,{title:"胸卡预览",modelValue:(0,n.R1)(G),"onUpdate:modelValue":l[19]||(l[19]=e=>(0,n.i9)(G)?G.value=e:null),width:"500px"},{default:(0,a.k6)(()=>[(0,a.bF)(ee,{gutter:20},{default:(0,a.k6)(()=>[(0,a.Lk)("div",{innerHTML:(0,n.R1)(P)},null,8,V)]),_:1}),(0,a.Lk)("div",R,[(0,a.bF)(o,{size:"small",type:"primary",onClick:l[18]||(l[18]=e=>G.value=!1)},{default:(0,a.k6)(()=>[...l[32]||(l[32]=[(0,a.eW)("关闭",-1)])]),_:1})])]),_:1},8,["modelValue"])])}}},I=t(66262);const z=(0,I.A)($,[["__scopeId","data-v-14dd28b4"]]);var W=z},25844:function(e,l,t){e.exports=t.p+"img/changembname.c1f195e2.png"},77153:function(e,l,t){e.exports=t.p+"img/moban.b2494526.jpg"}}]);