"use strict";(self["webpackChunkmeetingvue3"]=self["webpackChunkmeetingvue3"]||[]).push([[3814],{53814:function(e,a,t){t.r(a),t.d(a,{default:function(){return S}});t(44114),t(18111),t(7588);var l=t(20641),o=t(50953),n=t(90033),i=t(74353),s=t.n(i),d=t(71029),r=t(40834);const m={class:"back_bg back_padding"},u={class:"back_center_bg back_padding meetingSign_row"},p={class:"back_center_bg back_padding"},c={key:1},g={style:{color:"#3f3f3f"}},f={key:0},h={key:1},b={key:2},y={class:"fenye_div"},k={class:"zoomclass"},_={class:"zoomclass"},w={class:"zoomclass"},v={class:"zoomclass"},z={class:"zoomclass"},L={class:"zoomclass"};var F={__name:"yManagement",setup(e,{expose:a}){const t=(0,d.lq)(),i=(0,d.rd)(),F=(0,r.Pj)(),{proxy:V}=(0,l.nI)(),C=(0,o.KR)(null),S=(0,o.Kh)({input:"",zoominfo:{full_name:"",telephone:"",sms:"",textarea:"",dstime:"",status:1},zoomtitle:"",zoomshow:!1,options:[],value:"",tableData:[],dictTotal:0,dictCurrentPage:1,dictPageSize:10,multipleSelection:[],SmsTempList:[],SmsTempListVal:"",baseUrl:"",ycodefunction:"",telephone:"",username:"",zoomlist:[]}),{input:$,zoominfo:R,zoomtitle:x,zoomshow:T,options:W,value:U,tableData:E,dictTotal:P,dictCurrentPage:X,dictPageSize:q,multipleSelection:I,SmsTempList:K,SmsTempListVal:O,baseUrl:D,ycodefunction:Y,telephone:N,username:A,zoomlist:Q}=(0,o.QW)(S);function B(e){if(e)return e.replace(e.substring(3,7),"****")}function H(e){if(console.log(e),""===S.SmsTempListVal)V.$message.error("请选择模板");else{let a="";a=e.paper?"论文":"日程",e.labour&&(a="劳务");const l={meetingId:t.query.meeting,temp_id:S.SmsTempListVal,fullName:e.fullName,telephone:e.telephone,ycontent:"",url:S.baseUrl+"ycenter/show?ycode="+e.ycode,smodule:a,type_vue:1};V.$Loadimg.showLoading(),V.$http.article.Ycodesmssendid(l).then(e=>{V.$Loadimg.hideLoading(),1===e.data.status?V.$message.success("发送成功"):V.$message.error(e.data.msg)})}}function J(e){V.$confirm("确认删除该模板吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const a={meetingId:t.query.meeting,id:"",type_vue:1};a.id=e.id,V.$Loadimg.showLoading(),V.$http.article.delYcode(a).then(e=>{V.$Loadimg.hideLoading(),1===e.data.status?(V.$message.success("删除成功"),ae()):V.$message.error(e.data.msg)})}).catch(()=>{V.$message({type:"info",message:"已取消删除"})})}function j(e){3===e.type?(S.zoomshow=!0,S.zoomtitle="编辑zoom用户",S.zoominfo=e):i.push({path:"./yAddPersonnel",query:{id:e.id,meeting:t.query.meeting}})}function G(){i.push({path:"./yAddPersonnel",query:{meeting:t.query.meeting}})}function M(){S.zoomshow=!0,S.zoomtitle="添加zoom用户"}function Z(e){e?e.forEach(e=>{C.value.toggleRowSelection(e)}):C.value.clearSelection()}function ee(e){S.multipleSelection=e}function ae(){const e={meetingId:t.query.meeting,username:S.username,function:"",type:S.ycodefunction,telephone:S.telephone,page:S.dictCurrentPage,per_page:S.dictPageSize,type_vue:1};V.$Loadimg.showLoading(),V.$http.article.yCodeGetList(e).then(e=>{V.$Loadimg.hideLoading(),1===e.data.status?(S.tableData=e.data.list,S.dictTotal=e.data.pageinfo.total,S.dictCurrentPage=e.data.pageinfo.page,S.dictPageSize=e.data.pageinfo.per_page,te(),S.baseUrl=F.state.Url,S.zoomlist=e.data.zoom_config):V.$message.error(e.data.msg)})}function te(){S.tableData.forEach((e,a)=>{const l={meetingId:t.query.meeting,id:"",pOreS:"",i:"",type_vue:1};""===e.paper?(l.id=e.schedule,l.pOreS=2):(l.id=e.paper,l.pOreS=1),e.labour&&(l.id=e.labour,l.pOreS=3,console.log(l)),""===l.id||(V.$Loadimg.showLoading(),V.$http.article.gongnengName(l).then(e=>{if(V.$Loadimg.hideLoading(),1===e.data.status){let o="";if(1===l.pOreS)o=e.data.list.nameCn;else{o="";for(var t=0;t<e.data.list.length;t++)0!==t&&(o+=","),o+=e.data.list[t].title}return 3===l.pOreS&&(o=e.data.list.fullName),S.tableData[a]._title_name=o,!0}}))})}function le(e){let a="";return a=s()(e).format("HH:mm:ss"),a}function oe(e){S.dictPageSize=e,ae()}function ne(e){S.dictCurrentPage=e,ae()}function ie(){const e={meetingId:t.query.meeting,type_vue:1};V.$Loadimg.showLoading(),V.$http.article.getSmsTemp(e).then(e=>{V.$Loadimg.hideLoading(),1===e.data.status?S.SmsTempList=e.data.list:V.$message.error(e.data.msg)})}function se(e){V.$Loadimg.showLoading(),e.type_vue=1,V.$http.article.updateYcode(e).then(e=>{V.$Loadimg.hideLoading(),1===e.data.status?(V.$message.success("修改成功"),ae()):V.$message.error(e.data.msg)})}function de(){console.log(S.multipleSelection);let e="";if(S.multipleSelection.forEach((a,t)=>{t<S.multipleSelection.length-1?e=e+a.id+",":e+=a.id}),""===S.SmsTempListVal)return V.$message.error("请选择发送模板"),!1;if(""===e)return V.$message.error("请选择发送人员"),!1;const a={meetingId:t.query.meeting,temp_id:S.SmsTempListVal,ids:e,type_vue:1};V.$Loadimg.showLoading(),V.$http.article.Ycodeycode_all_send(a).then(e=>{V.$Loadimg.hideLoading(),1===e.data.status?V.$message.success("发送成功"):V.$message.error(e.data.msg)})}function re(e){if(!S.zoominfo.first_name)return V.$message({showClose:!0,message:"请填写姓氏",type:"error"}),!1;if(!S.zoominfo.last_name)return V.$message({showClose:!0,message:"请填写名字",type:"error"}),!1;const a=S.zoominfo;a.dstime=me(S.zoominfo.dstime),a.type=e,a.type_vue=1,a.meetingId=t.query.meeting,V.$Loadimg.showLoading(),V.$http.article.Ycode_ycode_zoom_add(a).then(e=>{V.$Loadimg.hideLoading(),1===e.data.status?(V.$message.success("添加成功"),S.zoomshow=!1,S.zoominfo.full_name="",S.zoominfo.telephone="",S.zoominfo.sms="",S.zoominfo.textarea="",S.zoominfo.dstime="",S.zoominfo.status=1,ae()):V.$message.error(e.data.msg)})}function me(){S.SmsTempList.forEach(e=>{e.id===S.zoominfo.sms&&(S.zoominfo.textarea=e.content)})}return(0,l.sV)(()=>{ae(),ie()}),a({input:$,zoominfo:R,zoomtitle:x,zoomshow:T,options:W,value:U,tableData:E,dictTotal:P,dictCurrentPage:X,dictPageSize:q,multipleSelection:I,SmsTempList:K,SmsTempListVal:O,baseUrl:D,ycodefunction:Y,telephone:N,username:A,zoomlist:Q,Onphone:B,Sendsmssendid:H,DelyCode:J,handleClick:j,Onadd:G,Onaddzoom:M,toggleSelection:Z,handleSelectionChange:ee,Ontime:le,handleSizeChange:oe,handleCurrentChange:ne,SaveList:se,batchsend:de,checkData:re}),(e,a)=>{const t=(0,l.g2)("el-input"),i=(0,l.g2)("el-col"),s=(0,l.g2)("el-option"),d=(0,l.g2)("el-select"),r=(0,l.g2)("el-button"),F=(0,l.g2)("el-row"),V=(0,l.g2)("el-table-column"),S=(0,l.g2)("el-tooltip"),$=(0,l.g2)("el-link"),W=(0,l.g2)("el-switch"),U=(0,l.g2)("el-table"),I=(0,l.g2)("el-pagination"),O=(0,l.g2)("el-time-picker"),Q=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.CE)("div",m,[(0,l.Lk)("div",u,[(0,l.bF)(F,{gutter:20},{default:(0,l.k6)(()=>[(0,l.bF)(i,{span:4,style:{display:"flex","text-wrap":"nowrap","word-break":"keep-all","align-items":"center"}},{default:(0,l.k6)(()=>[a[15]||(a[15]=(0,l.eW)(" 姓名：",-1)),(0,l.bF)(t,{size:"small",modelValue:(0,o.R1)(A),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,o.i9)(A)?A.value=e:null),placeholder:"姓名"},null,8,["modelValue"])]),_:1}),(0,l.bF)(i,{span:4,style:{display:"flex","text-wrap":"nowrap","word-break":"keep-all","align-items":"center"}},{default:(0,l.k6)(()=>[a[16]||(a[16]=(0,l.eW)(" 手机号：",-1)),(0,l.bF)(t,{size:"small",modelValue:(0,o.R1)(N),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,o.i9)(N)?N.value=e:null),placeholder:"手机号"},null,8,["modelValue"])]),_:1}),(0,l.bF)(i,{span:4,style:{display:"flex","text-wrap":"nowrap","word-break":"keep-all"}},{default:(0,l.k6)(()=>[a[17]||(a[17]=(0,l.eW)(" 功能：",-1)),(0,l.bF)(d,{size:"small",modelValue:(0,o.R1)(Y),"onUpdate:modelValue":a[2]||(a[2]=e=>(0,o.i9)(Y)?Y.value=e:null),placeholder:"请选择功能"},{default:(0,l.k6)(()=>[(0,l.bF)(s,{label:"请选择",value:""}),(0,l.bF)(s,{label:"审稿",value:"1"}),(0,l.bF)(s,{label:"日程",value:"2"}),(0,l.bF)(s,{label:"劳务",value:"3"})]),_:1},8,["modelValue"])]),_:1}),(0,l.bF)(i,{span:5},{default:(0,l.k6)(()=>[(0,l.bF)(r,{type:"primary",size:"small",onClick:a[3]||(a[3]=e=>ae())},{default:(0,l.k6)(()=>[...a[18]||(a[18]=[(0,l.eW)("查询",-1)])]),_:1}),(0,l.bF)(r,{type:"primary",size:"small",onClick:a[4]||(a[4]=e=>G())},{default:(0,l.k6)(()=>[...a[19]||(a[19]=[(0,l.eW)("添加Y码用户",-1)])]),_:1})]),_:1})]),_:1})]),(0,l.Lk)("div",p,[(0,l.bF)(U,{ref_key:"multipleTable",ref:C,stripe:"",data:(0,o.R1)(E),"tooltip-effect":"dark",style:{width:"100%"}},{default:(0,l.k6)(()=>[(0,l.bF)(V,{prop:"id",label:"编号"}),(0,l.bF)(V,{prop:"fullName",label:"姓名","show-overflow-tooltip":""},{default:(0,l.k6)(e=>[e.row.first_name?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.Lk)("span",null,(0,n.v_)(e.row.first_name),1),(0,l.Lk)("span",null,(0,n.v_)(e.row.last_name),1)],64)):((0,l.uX)(),(0,l.CE)("span",c,(0,n.v_)(e.row.fullName),1))]),_:1}),(0,l.bF)(V,{prop:"telephone",label:"手机号"},{default:(0,l.k6)(e=>[(0,l.bF)(S,{class:"item",effect:"dark",content:e.row.telephone,placement:"bottom"},{default:(0,l.k6)(()=>[(0,l.bF)(r,{link:"",style:{color:"#606266"}},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)(B(e.row.telephone)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1}),(0,l.bF)(V,{prop:"_title_name",label:"关联业务","show-overflow-tooltip":""}),(0,l.bF)(V,{label:"功能","show-overflow-tooltip":""},{default:(0,l.k6)(e=>[4===e.row.type?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)(" Y码酒店 ")],64)):(0,l.Q3)("",!0),3===e.row.type?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.eW)(" zoom会议室 ")],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[(0,l.eW)((0,n.v_)(e.row.paper?"论文审稿":"日程管理")+" ",1),a[20]||(a[20]=(0,l.Lk)("br",null,null,-1)),(0,l.Lk)("span",g,(0,n.v_)(e.row.labour?"(劳务管理)":""),1)],64))]),_:1}),(0,l.bF)(V,{prop:"address",label:"链接",width:"280px","show-overflow-tooltip":""},{default:(0,l.k6)(e=>[4===e.row.type?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)(" Y码酒店 ")],64)):(0,l.Q3)("",!0),3===e.row.type?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.eW)(" zoom会议室 ")],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[e.row.labour?((0,l.uX)(),(0,l.CE)("span",f,[(0,l.bF)($,{href:(0,o.R1)(D)+"userVam3/#/LaborServices?ycode="+e.row.ycode,target:"_blank",underline:!1},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)((0,o.R1)(D)+"userVam3/#/LaborServices?ycode="+e.row.ycode),1)]),_:2},1032,["href"])])):e.row.paper?((0,l.uX)(),(0,l.CE)("span",h,[(0,l.bF)($,{href:(0,o.R1)(D)+"userVam3/#/yJudgement?ycode="+e.row.ycode,target:"_blank",underline:!1},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)((0,o.R1)(D)+"userVam3/#/yJudgement?ycode="+e.row.ycode),1)]),_:2},1032,["href"])])):((0,l.uX)(),(0,l.CE)("span",b,[(0,l.bF)($,{href:(0,o.R1)(D)+"ycenter/show?ycode="+e.row.ycode,target:"_blank",underline:!1},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)((0,o.R1)(D)+"ycenter/show?ycode="+e.row.ycode),1)]),_:2},1032,["href"])]))],64))]),_:1}),(0,l.bF)(V,{prop:"status",label:"状态","show-overflow-tooltip":""},{default:(0,l.k6)(e=>[(0,l.bF)(W,{class:"switch","active-text":"启用","inactive-text":"关闭",modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":0,onClick:a=>se(e.row)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:1}),(0,l.bF)(V,{fixed:"right",label:"操作",width:"300"},{default:(0,l.k6)(e=>[(0,l.bF)(r,{onClick:a=>j(e.row),type:"primary",size:"small"},{default:(0,l.k6)(()=>[...a[21]||(a[21]=[(0,l.eW)("编辑",-1)])]),_:1},8,["onClick"]),(0,l.bF)(r,{type:"primary",size:"small",onClick:a=>J(e.row)},{default:(0,l.k6)(()=>[...a[22]||(a[22]=[(0,l.eW)("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),(0,l.Lk)("div",y,[(0,l.bF)(I,{layout:"prev, pager, next, total","current-page":(0,o.R1)(X),total:(0,o.R1)(P),background:"","page-size":(0,o.R1)(q),onSizeChange:oe,onCurrentChange:ne},null,8,["current-page","total","page-size"])])]),(0,l.bF)(Q,{title:(0,o.R1)(x),width:"30%","destroy-on-close":"",modelValue:(0,o.R1)(T),"onUpdate:modelValue":a[14]||(a[14]=e=>(0,o.i9)(T)?T.value=e:null)},{default:(0,l.k6)(()=>[(0,l.Lk)("div",k,[a[23]||(a[23]=(0,l.Lk)("span",null,"姓氏:",-1)),(0,l.bF)(t,{modelValue:(0,o.R1)(R).first_name,"onUpdate:modelValue":a[5]||(a[5]=e=>(0,o.R1)(R).first_name=e),class:"nameinput",placeholder:"请输入姓氏",style:{width:"80%",margin:"0 20px"},disabled:"编辑zoom用户"==(0,o.R1)(x)},null,8,["modelValue","disabled"])]),(0,l.Lk)("div",_,[a[24]||(a[24]=(0,l.Lk)("span",null,"名字:",-1)),(0,l.bF)(t,{modelValue:(0,o.R1)(R).last_name,"onUpdate:modelValue":a[6]||(a[6]=e=>(0,o.R1)(R).last_name=e),class:"nameinput",placeholder:"请输入名字",style:{width:"80%",margin:"0 20px"},disabled:"编辑zoom用户"==(0,o.R1)(x)},null,8,["modelValue","disabled"])]),(0,l.Lk)("div",w,[a[25]||(a[25]=(0,l.Lk)("span",null,"手机号:",-1)),(0,l.bF)(t,{modelValue:(0,o.R1)(R).telephone,"onUpdate:modelValue":a[7]||(a[7]=e=>(0,o.R1)(R).telephone=e),placeholder:"请输入手机号",style:{width:"80%",margin:"0 20px"}},null,8,["modelValue"])]),(0,l.Lk)("div",v,[a[26]||(a[26]=(0,l.Lk)("span",null,"短信模板:",-1)),(0,l.bF)(d,{size:"small",modelValue:(0,o.R1)(R).sms,"onUpdate:modelValue":a[8]||(a[8]=e=>(0,o.R1)(R).sms=e),placeholder:"请选择",onChange:a[9]||(a[9]=e=>me())},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,o.R1)(K),e=>((0,l.uX)(),(0,l.Wv)(s,{key:e.id,label:e.label,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),(0,l.Lk)("div",z,[(0,l.bF)(t,{type:"textarea",resize:"none",rows:3,placeholder:"此处内容为模板后追加内容",modelValue:(0,o.R1)(R).textarea,"onUpdate:modelValue":a[10]||(a[10]=e=>(0,o.R1)(R).textarea=e)},null,8,["modelValue"])]),(0,l.Lk)("div",L,[a[27]||(a[27]=(0,l.Lk)("span",null,"发送时间:",-1)),(0,l.bF)(O,{modelValue:(0,o.R1)(R).dstime,"onUpdate:modelValue":a[11]||(a[11]=e=>(0,o.R1)(R).dstime=e),size:"small",placeholder:"选择发送时间"},null,8,["modelValue"])]),(0,l.bF)(r,{type:"primary",onClick:a[12]||(a[12]=e=>re(1)),style:{"margin-top":"20px"}},{default:(0,l.k6)(()=>[...a[28]||(a[28]=[(0,l.eW)("保存",-1)])]),_:1}),(0,l.bF)(r,{type:"primary",onClick:a[13]||(a[13]=e=>re(2)),style:{"margin-top":"20px"}},{default:(0,l.k6)(()=>[...a[29]||(a[29]=[(0,l.eW)("保存并发送",-1)])]),_:1})]),_:1},8,["title","modelValue"])])}}},V=t(66262);const C=(0,V.A)(F,[["__scopeId","data-v-bc5fb9b2"]]);var S=C}}]);