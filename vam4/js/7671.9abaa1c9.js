"use strict";(self["webpackChunkmeetingvue3"]=self["webpackChunkmeetingvue3"]||[]).push([[7671],{87671:function(e,l,a){a.r(l),a.d(l,{default:function(){return T}});var t=a(20641),i=a(50953),o=a(90033),s=a(94335),r=a(71029),n=a(40834);const d={class:"back_bg back_padding exportPaper"},u={class:"back_center_bg back_padding back_text"},p={class:"exportPaper_condition"},c={key:0,class:"lev1"},g={key:1,class:"lev2"},m={key:2,class:"lev3"},v={key:3,class:"lev4"},b={key:4,class:"lev5"},k={key:5,class:"lev6"},_={key:6,class:"lev0"},h={class:"exportPaper_btn"},y={key:0,class:"mar",style:{color:"#a94442","line-height":"24px"}},w={class:"back_center_bg back_padding back_text"},f={class:"exportPaper_btn"},I={key:0,class:"mar",style:{color:"#a94442","line-height":"24px"}},C={style:{"text-align":"right"}};var x={__name:"exportPaper",setup(e,{expose:l}){const a=(0,n.Pj)(),x=(0,r.lq)(),{proxy:L}=(0,t.nI)(),X=(0,i.Kh)({leftk:"(",rightk:")",Urls:"",downbtn:!1,urlstatus:0,centerss:!0,timerxz:null,dialogVisibleXZ:!1,goUrltime:5,sourceList:[{value:"cn",label:"中文"},{value:"en",label:"英文"}],paperClass:[],paperTopic:[],reviewingOne:[{value:"",label:"全部"},{value:"en",label:"一审"}],reviewingTwo:[{value:"",label:"全部"},{value:"en",label:"一审"},{value:"cn",label:"二审"}],reviewingThree:[{value:"",label:"全部"},{value:"en",label:"一审"},{value:"cn",label:"二审"},{value:"en",label:"三审"}],submitCode:[{value:"",label:"全部"},{value:"cn",label:"未使用"},{value:"en",label:"已使用"}],dis:!1,lang:"cn",audioModel:"",paperClassId:"",paperTopicId:"",dataTwoStatus:"",paper_number:"",ids:"",xingmingdaochu:"按照:<    类型名称-栏目名称-稿件ID-标题名称-投稿时间    >格式导出",iddaochu:"按照:<    类型ID-栏目ID-稿件ID-标题名称-投稿时间           >格式导出",sjdaochu:"按照:<    投稿时间-稿件ID-标题名称-类型ID-栏目ID           >格式导出"}),{leftk:T,rightk:U,Urls:z,downbtn:F,urlstatus:R,centerss:V,timerxz:W,dialogVisibleXZ:$,goUrltime:E,sourceList:D,paperClass:Z,paperTopic:K,reviewingOne:Q,reviewingTwo:S,reviewingThree:q,submitCode:P,dis:j,lang:M,audioModel:O,paperClassId:A,paperTopicId:B,dataTwoStatus:G,paper_number:H,ids:J,xingmingdaochu:N,iddaochu:Y,sjdaochu:ee}=(0,i.QW)(X);function le(){const e={type_vue:1,meetingId:x.query.meeting,lang:X.lang};L.$Loadimg.showLoading(),L.$http.article.paperDerived(e).then(e=>{L.$Loadimg.hideLoading(),1===e.data.status?(X.paperClass=e.data.paperClass,X.paperTopic=e.data.paperTopic,X.dis=e.data.dis,X.audioModel=e.data.config.audioModel):L.$message.error(e.data.msg)})}function ae(){clearInterval(X.timerxz),X.goUrltime=5,X.dialogVisibleXZ=!1,X.downbtn=!1,X.urlstatus=0,X.Urls=""}function te(){clearInterval(X.timerxz),X.goUrltime=5,X.dialogVisibleXZ=!1,console.log(window.location.origin+"/"+X.Urls),console.log(X.Urls),window.location.href=("localhost"===window.location.hostname?"http://php7.yiyum.com":window.location.origin)+"/"+X.Urls}function ie(){window.location.href=`${window.location.origin}/vam3/#/dlowncenter?meeting=${x.query.meeting}&version=109`,clearInterval(X.timerxz),X.dialogVisibleXZ=!1,X.goUrltime=5}function oe(e){X.timerxz&&clearInterval(X.timerxz),X.leftk="(",X.rightk=")",X.goUrltime=5,X.downbtn=!1,X.dialogVisibleXZ=!0,X.timerxz=setInterval(()=>{X.goUrltime>0?(X.goUrltime--,X.urlstatus&&(X.downbtn=!0)):(clearInterval(X.timerxz),X.goUrltime="",X.leftk="",X.rightk="")},1e3);var l=new FormData;l.append("meetingId",x.query.meeting),l.append("type_vue","1"),l.append("refresh",X.lang),l.append("paperClass",X.paperClassId),l.append("paperTopic",X.paperTopicId),l.append("paperStatus",X.dataTwoStatus),l.append("paper_number",X.paper_number),l.append("type",e);const a={meetingId:x.query.meeting,type_vue:"1",refresh:X.lang,paperClass:X.paperClassId,paperTopic:X.paperTopicId,paperStatus:X.dataTwoStatus,paper_number:X.paper_number,type:e};L.$message.success("打包中"),L.$http.article.paperAbstractDownload(a).then(e=>{L.$Loadimg.hideLoading(),200===e.status?(X.urlstatus=1,X.Urls=e.data.url):(clearInterval(X.timerxz),X.goUrltime=5,X.dialogVisibleXZ=!1,L.$Loadimg.hideLoading(),L.$message({showClose:!0,message:"导出失败",type:"error"}))}).catch(e=>{clearInterval(X.timerxz),X.goUrltime=5,X.dialogVisibleXZ=!1,L.$Loadimg.hideLoading(),L.$message({showClose:!0,message:"导出失败",type:"error"})})}function se(e){var l=new FormData;l.append("meetingId",x.query.meeting),l.append("type_vue","1"),l.append("ids",X.ids),l.append("type",e),X.ids?(X.timerxz&&clearInterval(X.timerxz),X.leftk="(",X.rightk=")",X.goUrltime=5,L.$message.success("打包中"),X.downbtn=!1,X.dialogVisibleXZ=!0,X.timerxz=setInterval(()=>{console.log(X.downbtn,X.goUrltime,X.urlstatus,"data.timerxz"),X.goUrltime>0?(X.goUrltime--,X.urlstatus&&(X.downbtn=!0)):(clearInterval(X.timerxz),X.goUrltime="",X.leftk="",X.rightk="")},1e3),(0,s.A)({url:a.state.api+"/paperAttachments/downloadById",method:"post",data:l,responseType:"json",headers:{"Content-Type":"multipart/form-data",Cookies:localStorage.Cookie}}).then(e=>{L.$Loadimg.hideLoading(),1===e.data.status?0===e.data.code?(X.dialogVisibleXZ=!1,clearInterval(X.timerxz),X.goUrltime=5,L.$message.error(e.data.msg)):(X.urlstatus=1,X.Urls=e.data.url):(L.$message.error(e.data.msg),X.dialogVisibleXZ=!1,clearInterval(X.timerxz),X.goUrltime=5)}).catch(e=>{L.$Loadimg.hideLoading(),X.dialogVisibleXZ=!1,clearInterval(X.timerxz),console.log(e),X.goUrltime=5,L.$message.error(e.msg)})):L.$message.error("请输入稿件ID")}return(0,t.sV)(()=>{le()}),l({leftk:T,rightk:U,Urls:z,downbtn:F,urlstatus:R,centerss:V,timerxz:W,dialogVisibleXZ:$,goUrltime:E,sourceList:D,paperClass:Z,paperTopic:K,reviewingOne:Q,reviewingTwo:S,reviewingThree:q,submitCode:P,dis:j,lang:M,audioModel:O,paperClassId:A,paperTopicId:B,dataTwoStatus:G,paper_number:H,ids:J,xingmingdaochu:N,iddaochu:Y,sjdaochu:ee,Qx:ae,Downbtn:te,Qdtz:ie,Onexport:oe,OnexportTwo:se}),(e,l)=>{const a=(0,t.g2)("el-option"),s=(0,t.g2)("el-select"),r=(0,t.g2)("arrow-down"),n=(0,t.g2)("el-icon"),x=(0,t.g2)("el-button"),L=(0,t.g2)("el-dropdown-item"),X=(0,t.g2)("el-dropdown-menu"),z=(0,t.g2)("el-dropdown"),R=(0,t.g2)("el-input"),W=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.CE)("div",d,[(0,t.Lk)("div",u,[l[20]||(l[20]=(0,t.Lk)("div",{style:{"font-size":"16px","margin-bottom":"10px",display:"flex","align-items":"center"}},[(0,t.Lk)("div",{class:"right_bule"}),(0,t.eW)(" 根据条件导出 ")],-1)),(0,t.Lk)("div",p,[(0,t.Lk)("div",null,[l[14]||(l[14]=(0,t.eW)(" 来源 : ",-1)),(0,t.bF)(s,{size:"small",modelValue:(0,i.R1)(M),"onUpdate:modelValue":l[0]||(l[0]=e=>(0,i.i9)(M)?M.value=e:null),placeholder:"请选择来源",onChange:l[1]||(l[1]=e=>le())},{default:(0,t.k6)(()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,i.R1)(D),e=>((0,t.uX)(),(0,t.Wv)(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),(0,t.Lk)("div",null,[l[15]||(l[15]=(0,t.eW)(" 论文类别 : ",-1)),(0,t.bF)(s,{size:"small",modelValue:(0,i.R1)(A),"onUpdate:modelValue":l[2]||(l[2]=e=>(0,i.i9)(A)?A.value=e:null),placeholder:"请选择论文类别"},{default:(0,t.k6)(()=>[(0,t.bF)(a,{label:"全部",value:""}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,i.R1)(Z),e=>((0,t.uX)(),(0,t.Wv)(a,{key:e.classId,label:e.title,value:e.classId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),(0,t.Lk)("div",null,[l[16]||(l[16]=(0,t.eW)(" 论文栏目: ",-1)),(0,t.bF)(s,{size:"small",modelValue:(0,i.R1)(B),"onUpdate:modelValue":l[3]||(l[3]=e=>(0,i.i9)(B)?B.value=e:null),placeholder:"请选择论文栏目"},{default:(0,t.k6)(()=>[(0,t.bF)(a,{label:"全部",value:""}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,i.R1)(K),e=>((0,t.uX)(),(0,t.Wv)(a,{key:e.value,style:(0,o.Tr)(1==e.isLastTopic?"":"background:#ccc"),disabled:1!=e.isLastTopic&&"disabled",label:e.topicTitle,value:e.topicId},{default:(0,t.k6)(()=>[0==e.lev?((0,t.uX)(),(0,t.CE)("span",c,"  ∟ "+(0,o.v_)(e.topicTitle),1)):1==e.lev?((0,t.uX)(),(0,t.CE)("span",g,"   ∟ "+(0,o.v_)(e.topicTitle),1)):2==e.lev?((0,t.uX)(),(0,t.CE)("span",m,"    ∟ "+(0,o.v_)(e.topicTitle),1)):3==e.lev?((0,t.uX)(),(0,t.CE)("span",v,"     ∟"+(0,o.v_)(e.topicTitle),1)):4==e.lev?((0,t.uX)(),(0,t.CE)("span",b,"      ∟ "+(0,o.v_)(e.topicTitle),1)):5==e.lev?((0,t.uX)(),(0,t.CE)("span",k,"       ∟ "+(0,o.v_)(e.topicTitle),1)):((0,t.uX)(),(0,t.CE)("span",_," ∟"+(0,o.v_)(e.topicTitle),1))]),_:2},1032,["style","disabled","label","value"]))),128))]),_:1},8,["modelValue"])]),(0,t.Lk)("div",null,[l[17]||(l[17]=(0,t.eW)(" 审稿流程: ",-1)),(0,t.bF)(s,{size:"small",modelValue:(0,i.R1)(G),"onUpdate:modelValue":l[4]||(l[4]=e=>(0,i.i9)(G)?G.value=e:null),placeholder:"请选择审稿流程"},{default:(0,t.k6)(()=>[1==(0,i.R1)(O)?((0,t.uX)(!0),(0,t.CE)(t.FK,{key:0},(0,t.pI)((0,i.R1)(Q),e=>((0,t.uX)(),(0,t.Wv)(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128)):(0,t.Q3)("",!0),2==(0,i.R1)(O)?((0,t.uX)(!0),(0,t.CE)(t.FK,{key:1},(0,t.pI)((0,i.R1)(S),e=>((0,t.uX)(),(0,t.Wv)(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128)):(0,t.Q3)("",!0),3==(0,i.R1)(O)?((0,t.uX)(!0),(0,t.CE)(t.FK,{key:2},(0,t.pI)((0,i.R1)(q),e=>((0,t.uX)(),(0,t.Wv)(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128)):(0,t.Q3)("",!0)]),_:1},8,["modelValue"])]),(0,t.Lk)("div",null,[l[18]||(l[18]=(0,t.eW)(" 论文是否使用投稿码: ",-1)),(0,t.bF)(s,{size:"small",modelValue:(0,i.R1)(H),"onUpdate:modelValue":l[5]||(l[5]=e=>(0,i.i9)(H)?H.value=e:null),placeholder:"请选择审稿流程"},{default:(0,t.k6)(()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,i.R1)(P),e=>((0,t.uX)(),(0,t.Wv)(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),(0,t.Lk)("p",h,[(0,t.bF)(z,{trigger:"click"},{dropdown:(0,t.k6)(()=>[(0,t.bF)(X,null,{default:(0,t.k6)(()=>[(0,t.bF)(L,{disabled:(0,i.R1)(j),onClick:l[6]||(l[6]=e=>oe(1))},{default:(0,t.k6)(()=>[(0,t.eW)((0,o.v_)((0,i.R1)(N)),1)]),_:1},8,["disabled"]),(0,t.bF)(L,{disabled:(0,i.R1)(j),onClick:l[7]||(l[7]=e=>oe(2))},{default:(0,t.k6)(()=>[(0,t.eW)((0,o.v_)((0,i.R1)(Y)),1)]),_:1},8,["disabled"]),(0,t.bF)(L,{disabled:(0,i.R1)(j),onClick:l[8]||(l[8]=e=>oe(3))},{default:(0,t.k6)(()=>[(0,t.eW)((0,o.v_)((0,i.R1)(ee)),1)]),_:1},8,["disabled"])]),_:1})]),default:(0,t.k6)(()=>[(0,t.bF)(x,{type:"primary",size:"small"},{default:(0,t.k6)(()=>[l[19]||(l[19]=(0,t.eW)(" 导出",-1)),(0,t.bF)(n,{class:"el-icon--right"},{default:(0,t.k6)(()=>[(0,t.bF)(r)]),_:1})]),_:1})]),_:1}),(0,i.R1)(j)?((0,t.uX)(),(0,t.CE)("span",y,"没有附件下载")):(0,t.Q3)("",!0)])]),(0,t.Lk)("div",w,[l[24]||(l[24]=(0,t.Lk)("div",{style:{"font-size":"16px","margin-bottom":"10px",display:"flex","align-items":"center"}},[(0,t.Lk)("div",{class:"right_bule"}),(0,t.eW)(" 根据稿件ID导出 ")],-1)),(0,t.Lk)("div",null,[l[21]||(l[21]=(0,t.Lk)("span",{style:{"vertical-align":"top"}},"请输入稿件ID:",-1)),(0,t.bF)(R,{class:"mar",type:"textarea",autosize:{minRows:10,maxRows:10},placeholder:"请输入内容",resize:"none",modelValue:(0,i.R1)(J),"onUpdate:modelValue":l[9]||(l[9]=e=>(0,i.i9)(J)?J.value=e:null)},null,8,["modelValue"]),l[22]||(l[22]=(0,t.Lk)("span",{class:"mar",style:{color:"red"}},"稿件id之间以英文','隔开",-1))]),(0,t.Lk)("p",f,[(0,t.bF)(z,{trigger:"click"},{dropdown:(0,t.k6)(()=>[(0,t.bF)(X,null,{default:(0,t.k6)(()=>[(0,t.bF)(L,{onClick:l[10]||(l[10]=e=>se(1))},{default:(0,t.k6)(()=>[(0,t.eW)((0,o.v_)((0,i.R1)(N)),1)]),_:1}),(0,t.bF)(L,{onClick:l[11]||(l[11]=e=>se(2))},{default:(0,t.k6)(()=>[(0,t.eW)((0,o.v_)((0,i.R1)(Y)),1)]),_:1}),(0,t.bF)(L,{onClick:l[12]||(l[12]=e=>se(3))},{default:(0,t.k6)(()=>[(0,t.eW)((0,o.v_)((0,i.R1)(ee)),1)]),_:1})]),_:1})]),default:(0,t.k6)(()=>[(0,t.bF)(x,{type:"primary",size:"small"},{default:(0,t.k6)(()=>[l[23]||(l[23]=(0,t.eW)(" 导出",-1)),(0,t.bF)(n,{class:"el-icon--right"},{default:(0,t.k6)(()=>[(0,t.bF)(r)]),_:1})]),_:1})]),_:1}),(0,i.R1)(j)?((0,t.uX)(),(0,t.CE)("span",I,"没有附件下载")):(0,t.Q3)("",!0)])]),(0,t.bF)(W,{top:"35vh",title:"提示",modelValue:(0,i.R1)($),"onUpdate:modelValue":l[13]||(l[13]=e=>(0,i.i9)($)?$.value=e:null),width:"20%",center:(0,i.R1)(V),onClosed:ae},{default:(0,t.k6)(()=>[l[28]||(l[28]=(0,t.Lk)("span",null,"您导出的内容正在生成,您稍后可点击右上角下载中心查看!",-1)),l[29]||(l[29]=(0,t.Lk)("br",null,null,-1)),l[30]||(l[30]=(0,t.Lk)("br",null,null,-1)),(0,t.Lk)("div",C,[(0,t.bF)(x,{onClick:ae,size:"small"},{default:(0,t.k6)(()=>[...l[25]||(l[25]=[(0,t.eW)("取 消",-1)])]),_:1}),l[27]||(l[27]=(0,t.eW)("  ",-1)),(0,i.R1)(F)?((0,t.uX)(),(0,t.Wv)(x,{key:0,type:"primary",size:"small",onClick:te},{default:(0,t.k6)(()=>[...l[26]||(l[26]=[(0,t.eW)("下载",-1)])]),_:1})):((0,t.uX)(),(0,t.Wv)(x,{key:1,type:"primary",size:"small",onClick:ie},{default:(0,t.k6)(()=>[(0,t.eW)("前往下载中心"+(0,o.v_)((0,i.R1)(T))+(0,o.v_)((0,i.R1)(E))+(0,o.v_)((0,i.R1)(U)),1)]),_:1}))])]),_:1},8,["modelValue","center"])])}}},L=a(66262);const X=(0,L.A)(x,[["__scopeId","data-v-75fe7653"]]);var T=X}}]);