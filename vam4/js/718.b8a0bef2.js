"use strict";(self["webpackChunkmeetingvue3"]=self["webpackChunkmeetingvue3"]||[]).push([[718],{77882:function(e,t,a){a.d(t,{A:function(){return c}});a(18111),a(20116),a(61701);var s=a(20641),i=a(50953),l=a(18965);const n={class:"box"};var r={__name:"FormDesign",props:{save:{type:Function,default:()=>{}},json:{type:String,default:()=>{}},options:{type:String,default:()=>{}},fixedFields:{type:Object,default:()=>{}}},setup(e,{expose:t}){const{proxy:a}=(0,s.nI)(),r=e,o=(0,i.KR)(null),p=(0,i.KR)({fieldReadonly:!1}),c={action:"/HomeChapter/uploadChapterFile",onSuccess:(e,t)=>(t.url=e.list.full_url,t)};function d(e){return e&&Array.isArray(e)?e.map(e=>"upload"===e.type?{...e,props:{...e.props,action:c.action,onSuccess:c.onSuccess,name:"chapter_file"}}:(e.children&&Array.isArray(e.children)&&(e.children=d(e.children)),e)):e}const u=(0,i.KR)({supplierClassId:{label:"供应商分类",type:"select"},supplierName:{label:"供应商名称",type:"input"},supplierNum:{label:"供应商纳税人识别号",type:"input"},supplierUsername:{label:"公司法人",type:"input"},supplierEmail:{label:"邮件",type:"input"},supplierAddress:{label:"公司地址",type:"input"},supplierPhone:{label:"联系方式",type:"input"},supplierLang:{label:"来源：分支机构的id",type:"select"},supplierOpenBank:{label:"开户行",type:"input"},supplierAccount:{label:"银行卡号",type:"input"},supplierBankName:{label:"开户行姓名",type:"input"},supplierImg:{label:"营业执照",type:"upload"},supplierUserImg:{label:"法人证件照",type:"upload"},meltName:{label:"报销名称",type:"input"},meltReceivable:{label:"报销金额",type:"input"},meltContract:{label:"合同图片",type:"upload"},...r.fixedFields});function m(e){const t=o.value.getRule();if(Object.keys(u.value).find(t=>e.field===t))return o.value.setRule(t),a.$message.error("固定字段不允许删除"),!0}function f(){const e=o.value.getFormDescription();r.save({json:o.value.getJson(),options:o.value.getOptionsJson(),fields:e})}return(0,s.wB)(()=>r.json,()=>{let e=l.A.parseJson(r.json);e=d(e),o.value.setRule(e),o.value.setOption(l.A.parseJson(r.options))}),(0,s.sV)(()=>{let e=l.A.parseJson(r.json);e=d(e),o.value.setRule(e),o.value.setOption(l.A.parseJson(r.options))}),t({designer:o}),(e,t)=>{const a=(0,s.g2)("el-button"),i=(0,s.g2)("fc-designer");return(0,s.uX)(),(0,s.CE)("div",n,[(0,s.bF)(i,{ref_key:"designer",ref:o,height:"100vh",config:p.value,onDelete:m},{handle:(0,s.k6)(()=>[(0,s.bF)(a,{type:"primary",size:"small",onClick:f},{default:(0,s.k6)(()=>[...t[0]||(t[0]=[(0,s.eW)("保存",-1)])]),_:1})]),_:1},8,["config"])])}}},o=a(66262);const p=(0,o.A)(r,[["__scopeId","data-v-5a260905"]]);var c=p},80718:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});a(18111),a(22489),a(7588),a(61701),a(33110);var s=a(20641),i=a(50953),l=a(90033),n=a(77882),r=a(40787),o=a(95531),p=a(40834);const c={class:"ReimbursementSetting"},d={style:{display:"flex","align-items":"center",gap:"10px"}};var u={__name:"SealApply",setup(e){const{proxy:t}=(0,s.nI)(),a=(0,p.Pj)(),u=(0,i.Kh)({editableTabsValue:"",editableTabs:[],fixedFields:{meetingId:{label:"会议名称",type:"input"},chapterName:{label:"用章合同名称",type:"input"},chapterPrice:{label:"用章金额",type:"input"},chapterImg:{label:"合同附件",type:"upload"},SizeAndAmount:{label:"大写金额",type:"input"}}}),{editableTabsValue:m,editableTabs:f,fixedFields:h}=(0,i.QW)(u),g=(e,a)=>{I({...e,type:a}),t.$message.success("排序成功")},y=(e,a)=>{"add"===a?r.s.prompt("请输入类别","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"请输入标签名称",inputPlaceholder:"请输入标签名称",inputPattern:/^[\s\S]+$/}).then(({value:e})=>{k({chapterClassName:e})}).catch(()=>{(0,o.nk)({type:"info",message:"取消输入"})}):"remove"===a&&t.$confirm("确认删除该服务项吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const t=f.value,a=t.filter(t=>t.chapterClassId===e)[0];1!==a.chapterClassStatus?k({...a,chapterClassInvalid:1}):(0,o.nk)({type:"warning",message:"该服务项已启用，无法删除"})}).catch(()=>{(0,o.nk)({type:"info",message:"取消删除"})})},_=e=>{r.s.prompt("","修改类别",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"请输入标签名称",inputPlaceholder:"请输入标签名称",inputPattern:/^[\s\S]+$/,inputValue:f.value[e].chapterClassName}).then(({value:t})=>{const a=f.value[e];k({...a,chapterClassName:t})}).catch(()=>{(0,o.nk)({type:"info",message:"取消修改"})})};function v(e){b(e)}function C(){t.$Loadimg.showLoading();const e={type_vue:1,committeeId:a.state.user.committeeId};t.$http.seal.chapterClassList(e).then(e=>{if(t.$Loadimg.hideLoading(),1===e.data.status||200===e.data.status){if(e.data.list&&e.data.list.length>0){const t=e.data.list.map(e=>({...e,content:{json:"[]",options:"{}",fields:""}})).toSorted((e,t)=>e.priority-t.priority);f.value=t,m.value=t[0].chapterClassId,b(m.value)}}else t.$message.error(e.data.msg)}).catch(e=>{console.log(e,"err")})}function b(e){t.$Loadimg.showLoading();const s={type_vue:1,committeeId:a.state.user.committeeId,classId:e};t.$http.seal.chapterField(s).then(a=>{t.$Loadimg.hideLoading(),1===a.data.status||200===a.data.status?a.data.list.json?f.value.forEach(t=>{t.chapterClassId===e&&(t.content=a.data.list)}):f.value.forEach(t=>{t.chapterClassId===e&&(t.content={json:"[]",options:"{}",fields:""})}):t.$message.error(a.data.msg)}).catch(e=>{console.log(e,"err")})}const F={json:'[{"type":"select","field":"meetingId","title":"会议名称","info":"","$required":true,"_fc_id":"id_Fomlm8yafs2iasc","name":"ref_Fgcem8yafs2iatc","display":true,"hidden":false,"_fc_drag_tag":"select","props":{"_optionType":1,"remote":false}},{"type":"input","field":"chapterName","title":"合同名称","info":"","$required":true,"_fc_id":"id_F7yum8yafslwavc","name":"ref_Fc02m8yafslwawc","display":true,"hidden":false,"_fc_drag_tag":"input"},{"type":"input","field":"Fc1bm90r2pqhaqc","title":"签约代表姓名","info":"","$required":true,"_fc_id":"id_Fsycm90r2pqharc","name":"ref_Flg8m90r2pqhasc","display":true,"hidden":false,"_fc_drag_tag":"input"},{"type":"input","field":"chapterPrice","title":"金额","info":"","$required":true,"_fc_id":"id_Ff0gm8yafswaayc","name":"ref_Fczhm8yafswaazc","display":true,"hidden":false,"_fc_drag_tag":"input"},{"type":"input","field":"SizeAndAmount","title":"大写金额","info":"","$required":false,"_fc_id":"id_F4bqm9sfif0kakc","name":"ref_Fuanm9sfif0kalc","display":true,"hidden":false,"_fc_drag_tag":"input","props":{"readonly":true}},{"type":"upload","field":"chapterImg","title":"合同附件","info":"","$required":true,"props":{"action":"/HomeChapter/uploadChapterFile","onSuccess":"[[FORM-CREATE-PREFIX-(res, file) => {file.url = res.list.full_url;return file;}-FORM-CREATE-SUFFIX]]","listType":"text","name":"chapter_file","withCredentials":true},"_fc_id":"id_Fl2mm8yafu1kb1c","name":"ref_Ftoam8yafu1kb2c","display":true,"hidden":false,"_fc_drag_tag":"upload"}]',options:"{\"form\":{\"inline\":false,\"hideRequiredAsterisk\":false,\"labelPosition\":\"right\",\"size\":\"default\",\"labelWidth\":\"125px\"},\"resetBtn\":{\"show\":false,\"innerText\":\"重置\"},\"submitBtn\":{\"show\":false,\"innerText\":\"提交\"},\"onChange\":\"[[FORM-CREATE-PREFIX-function onChange(field,value,options){if(field=='chapterPrice'){function numberToChinese(num){if(isNaN(num))return'非数字';num=Number(num);const chineseDigits=['零','壹','贰','叁','肆','伍','陆','柒','捌','玖'];const chineseUnits=['','拾','佰','仟','万','拾','佰','仟','亿','拾','佰','仟','兆'];const numStr=num.toFixed(2).toString();const parts=numStr.split('.');const integerPart=parts[0];const decimalPart=parts.length>1?parts[1]:'';let result='';const length=integerPart.length;if(parseInt(integerPart)===0){result=chineseDigits[0];}else{for(let i=0;i<length;i++){const digit=parseInt(integerPart[i]);const position=length-i-1;if(digit!==0){result+=chineseDigits[digit]+chineseUnits[position];}else{if(i<length-1&&integerPart[i+1]!=='0'){result+=chineseDigits[0];}if(position===4||position===8){result+=chineseUnits[position];}}}result=result.replace(/零+/g,'零');if(result.endsWith('零')){result=result.slice(0,-1);}}result+='元';if(decimalPart==='00'){result+='整';}else{const jiao=parseInt(decimalPart[0]);const fen=parseInt(decimalPart[1]);if(jiao!==0){result+=chineseDigits[jiao]+'角';}if(fen!==0){result+=chineseDigits[fen]+'分';}else if(jiao!==0&&fen===0){result+='整';}}return result;};const form=options.api.form;form.SizeAndAmount=numberToChinese(form.chapterPrice);}}-FORM-CREATE-SUFFIX]]\"}",fields:[{_fc_id:"id_Fomlm8yafs2iasc",type:"select",field:"meetingId",title:"会议名称",name:"ref_Fgcem8yafs2iatc",props:{_optionType:1,remote:!1}},{_fc_id:"id_F7yum8yafslwavc",type:"input",field:"chapterName",title:"合同名称",name:"ref_Fc02m8yafslwawc",props:[]},{_fc_id:"id_Fsycm90r2pqharc",type:"input",field:"Fc1bm90r2pqhaqc",title:"签约代表姓名",name:"ref_Flg8m90r2pqhasc",props:[]},{_fc_id:"id_Ff0gm8yafswaayc",type:"input",field:"chapterPrice",title:"金额",name:"ref_Fczhm8yafswaazc",props:[]},{_fc_id:"id_F4bqm9sfif0kakc",type:"input",field:"SizeAndAmount",title:"大写金额",name:"ref_Fuanm9sfif0kalc",props:{readonly:!0}},{_fc_id:"id_Fl2mm8yafu1kb1c",type:"upload",field:"chapterImg",title:"合同附件",name:"ref_Ftoam8yafu1kb2c",props:{action:"/HomeChapter/uploadChapterFile",listType:"text",name:"chapter_file",withCredentials:!0}}]};function I(e){t.$Loadimg.showLoading();const s={id:e.chapterClassId||"",type_vue:1,committeeId:a.state.user.committeeId,name:e.chapterClassName,chapterClassId:"",chapterClassStatus:1,invalid:0,priority:e.priority||0,type:e.type};t.$http.seal.chapterClassSort(s).then(e=>{t.$Loadimg.hideLoading(),1===e.data.status||200===e.data.status?(t.$message.success(e.data.msg),C()):t.$message.error(e.data.msg)}).catch(e=>{console.log(e,"err")})}function k(e){t.$Loadimg.showLoading();let s={id:e.chapterClassId||"",type_vue:1,committeeId:a.state.user.committeeId,name:e.chapterClassName,chapterClassId:"",chapterClassStatus:1,invalid:0,priority:e.priority||0};e.chapterClassId?(s.chapterClassId=e.chapterClassId,s.chapterClassStatus=e.chapterClassStatus,s.invalid=e.chapterClassInvalid,s.priority=e.priority||0):delete s.chapterClassId,t.$http.seal.chapterClassSave(s).then(a=>{const{chapterClassId:s}=a.data.list;t.$Loadimg.hideLoading(),1===a.data.status||200===a.data.status?(t.$message.success(a.data.msg),e.chapterClassId?C():$({...F,chapterClassId:s})):t.$message.error(a.data.msg)}).catch(e=>{console.log(e,"err")})}function $({json:e,options:s,fields:i,chapterClassId:l}){t.$Loadimg.showLoading();const n={json:e,options:s,fields:i},r={type_vue:1,committeeId:a.state.user.committeeId,jsonData:JSON.stringify(n),classId:l||m.value};t.$http.seal.saveChapterField(r).then(e=>{t.$Loadimg.hideLoading(),1===e.data.status||200===e.data.status?l?C():t.$message.success(e.data.msg):t.$message.error(e.data.msg)}).catch(e=>{console.log(e,"err")})}return(0,s.wB)(()=>a.state.user.committeeId,e=>{e&&C()},{immediate:!0}),(e,t)=>{const a=(0,s.g2)("el-text"),r=(0,s.g2)("el-switch"),o=(0,s.g2)("ArrowUp"),p=(0,s.g2)("el-icon"),u=(0,s.g2)("ArrowDown"),C=(0,s.g2)("Edit"),b=(0,s.g2)("el-tab-pane"),F=(0,s.g2)("el-tabs");return(0,s.uX)(),(0,s.CE)("div",c,[(0,s.bF)(F,{modelValue:(0,i.R1)(m),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,i.i9)(m)?m.value=e:null),type:"card",editable:"",class:"demo-tabs",onEdit:y,onTabChange:v},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,i.R1)(f),(e,t)=>((0,s.uX)(),(0,s.Wv)(b,{key:e.priority,label:e.chapterClassName,name:e.chapterClassId},{label:(0,s.k6)(()=>[(0,s.bF)(a,{style:{"margin-right":"10px"}},{default:(0,s.k6)(()=>[(0,s.eW)((0,l.v_)(e.chapterClassName),1)]),_:2},1024),(0,s.bF)(r,{modelValue:e.chapterClassStatus,"onUpdate:modelValue":t=>e.chapterClassStatus=t,"active-value":1,"inactive-value":2,onChange:t=>k(e),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"启用","inactive-text":"关闭","inline-prompt":"",style:{margin:"10px"}},null,8,["modelValue","onUpdate:modelValue","onChange"]),(0,s.Lk)("div",d,[0!==t?((0,s.uX)(),(0,s.Wv)(p,{key:0,onClick:t=>g(e,"up")},{default:(0,s.k6)(()=>[(0,s.bF)(o)]),_:1},8,["onClick"])):(0,s.Q3)("",!0),t!==(0,i.R1)(f).length-1?((0,s.uX)(),(0,s.Wv)(p,{key:1,onClick:t=>g(e,"down")},{default:(0,s.k6)(()=>[(0,s.bF)(u)]),_:1},8,["onClick"])):(0,s.Q3)("",!0),(0,s.bF)(p,{onClick:e=>_(t)},{default:(0,s.k6)(()=>[(0,s.bF)(C)]),_:1},8,["onClick"])])]),default:(0,s.k6)(()=>[e.content?((0,s.uX)(),(0,s.Wv)(n.A,{key:0,save:$,json:e.content.json,options:e.content.options,fixedFields:(0,i.R1)(h)},null,8,["json","options","fixedFields"])):(0,s.Q3)("",!0)]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])])}}},m=a(66262);const f=(0,m.A)(u,[["__scopeId","data-v-1455579d"]]);var h=f}}]);