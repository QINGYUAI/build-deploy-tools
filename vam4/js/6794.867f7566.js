"use strict";(self["webpackChunkmeetingvue3"]=self["webpackChunkmeetingvue3"]||[]).push([[6794],{56794:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});a(18111),a(22489),a(7588),a(61701),a(33110);var s=a(20641),l=a(50953),i=a(90033),n=a(77882),p=a(40787),o=a(95531),r=a(40834);const u={class:"ReimbursementSetting"},d={style:{display:"flex","align-items":"center",gap:"10px"}};var c={__name:"ReimbursementSetting",setup(e){const{proxy:t}=(0,s.nI)(),a=(0,r.Pj)(),c=(0,l.Kh)({editableTabsValue:"",editableTabs:[]}),{editableTabsValue:m,editableTabs:f}=(0,l.QW)(c),g=(e,a)=>{F({...e,type:a}),t.$message.success("排序成功")},h=(e,a)=>{"add"===a?p.s.prompt("请输入类别","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"请输入标签名称",inputPlaceholder:"请输入标签名称",inputPattern:/^[\s\S]+$/}).then(({value:e})=>{I({supplierClassName:e})}).catch(()=>{(0,o.nk)({type:"info",message:"取消输入"})}):"remove"===a&&t.$confirm("确认删除该服务项吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=f.value;let t=m.value;const a=e.filter(e=>e.supplierClassId===t)[0];1!==a.supplierClassStatus?I({...a,supplierClassInvalid:1}):(0,o.nk)({type:"warning",message:"该服务项已启用，无法删除"})}).catch(()=>{(0,o.nk)({type:"info",message:"取消删除"})})},v=e=>{p.s.prompt("","修改类别",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"请输入标签名称",inputPlaceholder:"请输入标签名称",inputPattern:/^[\s\S]+$/,inputValue:f.value[e].supplierClassName}).then(({value:t})=>{const a=f.value[e];I({...a,supplierClassName:t})}).catch(()=>{(0,o.nk)({type:"info",message:"取消修改"})})};function y(e){C(e)}function _(){t.$Loadimg.showLoading();const e={type_vue:1,committeeId:a.state.user.committeeId};t.$http.supplier.SupplierSupplierClassList(e).then(e=>{if(t.$Loadimg.hideLoading(),1===e.data.status||200===e.data.status){if(e.data.list&&e.data.list.length>0){const t=e.data.list.map(e=>({...e,content:{json:"[]",options:"{}",fields:""}})).toSorted((e,t)=>e.priority-t.priority);f.value=t,m.value=t[0].supplierClassId,C(m.value)}}else t.$message.error(e.data.msg)}).catch(e=>{console.log(e,"err")})}function C(e){t.$Loadimg.showLoading();const s={type_vue:1,committeeId:a.state.user.committeeId,classId:e};t.$http.supplier.SupplierSupplierMeltField(s).then(a=>{t.$Loadimg.hideLoading(),1===a.data.status||200===a.data.status?a.data.list.json?f.value.forEach(t=>{t.supplierClassId===e&&(t.content=a.data.list)}):f.value.forEach(t=>{t.supplierClassId===e&&(t.content={json:"[]",options:"{}",fields:""})}):t.$message.error(a.data.msg)}).catch(e=>{console.log(e,"err")})}const b={json:'[{"type":"input","field":"meltName","title":"报销名称","info":"","$required":false,"_fc_id":"id_Fl0cm5qhvz84amc","name":"ref_Fngkm5qhvz84anc","display":true,"hidden":false,"_fc_drag_tag":"input"},{"type":"input","field":"meltReceivable","title":"应报销金额","info":"","$required":false,"_fc_id":"id_Fez1m5qhv4wcagc","name":"ref_Fcium5qhv4wcahc","display":true,"hidden":false,"_fc_drag_tag":"input"},{"type":"upload","field":"meltContract","title":"合同图片","info":"","$required":false,"props":{"action":"/HomeChapter/uploadChapterFile","onSuccess":"[[FORM-CREATE-PREFIX-function anonymous(res,file) {file.url = res.data.url;}-FORM-CREATE-SUFFIX]]"},"_fc_id":"id_Fi1xm5qhxvxdavc","name":"ref_Fv32m5qhwd1aaqc","display":true,"hidden":false,"_fc_drag_tag":"upload"},{"type":"upload","field":"meltDetails","title":"报销明细图片","info":"","$required":false,"props":{"action":"/HomeChapter/uploadChapterFile","onSuccess":"[[FORM-CREATE-PREFIX-function anonymous(res,file) {file.url = res.data.url;}-FORM-CREATE-SUFFIX]]"},"_fc_id":"id_Fb3gm5qhxycoayc","name":"ref_Fcm9m5qhwlu0atc","display":true,"hidden":false,"_fc_drag_tag":"upload"}]',options:'{"form":{"inline":false,"hideRequiredAsterisk":false,"labelPosition":"right","size":"default","labelWidth":"125px"},"resetBtn":{"show":false,"innerText":"重置"},"submitBtn":{"show":false,"innerText":"提交"}}',fields:[{_fc_id:"id_Fl0cm5qhvz84amc",type:"input",field:"meltName",title:"报销名称",name:"ref_Fngkm5qhvz84anc",props:{}},{_fc_id:"id_Fez1m5qhv4wcagc",type:"input",field:"meltReceivable",title:"应报销金额",name:"ref_Fcium5qhv4wcahc",props:{}},{_fc_id:"id_Fi1xm5qhxvxdavc",type:"upload",field:"meltContract",title:"合同图片",name:"ref_Fv32m5qhwd1aaqc",props:{action:"/"}},{_fc_id:"id_Fb3gm5qhxycoayc",type:"upload",field:"meltDetails",title:"报销明细图片",name:"ref_Fcm9m5qhwlu0atc",props:{action:"/"}}]};function F(e){t.$Loadimg.showLoading();const s={id:e.supplierClassId||"",type_vue:1,committeeId:a.state.user.committeeId,name:e.supplierClassName,supplierClassId:"",supplierClassStatus:1,invalid:0,priority:e.priority||0,type:e.type};t.$http.supplier.SupplierSupplierClassSort(s).then(e=>{t.$Loadimg.hideLoading(),1===e.data.status||200===e.data.status?(t.$message.success(e.data.msg),_()):t.$message.error(e.data.msg)}).catch(e=>{console.log(e,"err")})}function I(e){t.$Loadimg.showLoading();let s={type_vue:1,committeeId:a.state.user.committeeId,supplierClassName:e.supplierClassName,supplierClassId:"",supplierClassStatus:1,supplierClassInvalid:0,priority:e.priority||0};e.supplierClassId?(s.supplierClassId=e.supplierClassId,s.supplierClassStatus=e.supplierClassStatus,s.supplierClassInvalid=e.supplierClassInvalid,s.priority=e.priority||0):delete s.supplierClassId,t.$http.supplier.SupplierSupplierClassSave(s).then(a=>{const{supplierClassId:s}=a.data.list;t.$Loadimg.hideLoading(),1===a.data.status||200===a.data.status?(t.$message.success(a.data.msg),e.supplierClassId?_():k({...b,supplierClassId:s})):t.$message.error(a.data.msg)}).catch(e=>{console.log(e,"err")})}function k({json:e,options:s,fields:l,supplierClassId:i}){t.$Loadimg.showLoading();const n={json:e,options:s,fields:l},p={type_vue:1,committeeId:a.state.user.committeeId,jsonData:JSON.stringify(n),classId:i||m.value};t.$http.supplier.SupplierSaveSupplierMeltField(p).then(e=>{t.$Loadimg.hideLoading(),1===e.data.status||200===e.data.status?i?_():t.$message.success(e.data.msg):t.$message.error(e.data.msg)}).catch(e=>{console.log(e,"err")})}return(0,s.wB)(()=>a.state.user.committeeId,e=>{e&&_()},{immediate:!0}),(e,t)=>{const a=(0,s.g2)("el-text"),p=(0,s.g2)("el-switch"),o=(0,s.g2)("ArrowUp"),r=(0,s.g2)("el-icon"),c=(0,s.g2)("ArrowDown"),_=(0,s.g2)("Edit"),C=(0,s.g2)("el-tab-pane"),b=(0,s.g2)("el-tabs");return(0,s.uX)(),(0,s.CE)("div",u,[(0,s.bF)(b,{modelValue:(0,l.R1)(m),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,l.i9)(m)?m.value=e:null),type:"card",editable:"",class:"demo-tabs",onEdit:h,onTabChange:y},{default:(0,s.k6)(()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,l.R1)(f),(e,t)=>((0,s.uX)(),(0,s.Wv)(C,{key:e.priority,label:e.supplierClassName,name:e.supplierClassId},{label:(0,s.k6)(()=>[(0,s.bF)(a,{style:{"margin-right":"10px"}},{default:(0,s.k6)(()=>[(0,s.eW)((0,i.v_)(e.supplierClassName),1)]),_:2},1024),(0,s.bF)(p,{modelValue:e.supplierClassStatus,"onUpdate:modelValue":t=>e.supplierClassStatus=t,"active-value":1,"inactive-value":2,onChange:t=>I(e),"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"启用","inactive-text":"关闭","inline-prompt":"",style:{margin:"10px"}},null,8,["modelValue","onUpdate:modelValue","onChange"]),(0,s.Lk)("div",d,[0!==t?((0,s.uX)(),(0,s.Wv)(r,{key:0,onClick:t=>g(e,"up")},{default:(0,s.k6)(()=>[(0,s.bF)(o)]),_:1},8,["onClick"])):(0,s.Q3)("",!0),t!==(0,l.R1)(f).length-1?((0,s.uX)(),(0,s.Wv)(r,{key:1,onClick:t=>g(e,"down")},{default:(0,s.k6)(()=>[(0,s.bF)(c)]),_:1},8,["onClick"])):(0,s.Q3)("",!0),(0,s.bF)(r,{onClick:e=>v(t)},{default:(0,s.k6)(()=>[(0,s.bF)(_)]),_:1},8,["onClick"])])]),default:(0,s.k6)(()=>[e.content?((0,s.uX)(),(0,s.Wv)(n.A,{key:0,save:k,json:e.content.json,options:e.content.options},null,8,["json","options"])):(0,s.Q3)("",!0)]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])])}}},m=a(66262);const f=(0,m.A)(c,[["__scopeId","data-v-456b5ba6"]]);var g=f},77882:function(e,t,a){a.d(t,{A:function(){return u}});a(18111),a(20116),a(61701);var s=a(20641),l=a(50953),i=a(18965);const n={class:"box"};var p={__name:"FormDesign",props:{save:{type:Function,default:()=>{}},json:{type:String,default:()=>{}},options:{type:String,default:()=>{}},fixedFields:{type:Object,default:()=>{}}},setup(e,{expose:t}){const{proxy:a}=(0,s.nI)(),p=e,o=(0,l.KR)(null),r=(0,l.KR)({fieldReadonly:!1}),u={action:"/HomeChapter/uploadChapterFile",onSuccess:(e,t)=>(t.url=e.list.full_url,t)};function d(e){return e&&Array.isArray(e)?e.map(e=>"upload"===e.type?{...e,props:{...e.props,action:u.action,onSuccess:u.onSuccess,name:"chapter_file"}}:(e.children&&Array.isArray(e.children)&&(e.children=d(e.children)),e)):e}const c=(0,l.KR)({supplierClassId:{label:"供应商分类",type:"select"},supplierName:{label:"供应商名称",type:"input"},supplierNum:{label:"供应商纳税人识别号",type:"input"},supplierUsername:{label:"公司法人",type:"input"},supplierEmail:{label:"邮件",type:"input"},supplierAddress:{label:"公司地址",type:"input"},supplierPhone:{label:"联系方式",type:"input"},supplierLang:{label:"来源：分支机构的id",type:"select"},supplierOpenBank:{label:"开户行",type:"input"},supplierAccount:{label:"银行卡号",type:"input"},supplierBankName:{label:"开户行姓名",type:"input"},supplierImg:{label:"营业执照",type:"upload"},supplierUserImg:{label:"法人证件照",type:"upload"},meltName:{label:"报销名称",type:"input"},meltReceivable:{label:"报销金额",type:"input"},meltContract:{label:"合同图片",type:"upload"},...p.fixedFields});function m(e){const t=o.value.getRule();if(Object.keys(c.value).find(t=>e.field===t))return o.value.setRule(t),a.$message.error("固定字段不允许删除"),!0}function f(){const e=o.value.getFormDescription();p.save({json:o.value.getJson(),options:o.value.getOptionsJson(),fields:e})}return(0,s.wB)(()=>p.json,()=>{let e=i.A.parseJson(p.json);e=d(e),o.value.setRule(e),o.value.setOption(i.A.parseJson(p.options))}),(0,s.sV)(()=>{let e=i.A.parseJson(p.json);e=d(e),o.value.setRule(e),o.value.setOption(i.A.parseJson(p.options))}),t({designer:o}),(e,t)=>{const a=(0,s.g2)("el-button"),l=(0,s.g2)("fc-designer");return(0,s.uX)(),(0,s.CE)("div",n,[(0,s.bF)(l,{ref_key:"designer",ref:o,height:"100vh",config:r.value,onDelete:m},{handle:(0,s.k6)(()=>[(0,s.bF)(a,{type:"primary",size:"small",onClick:f},{default:(0,s.k6)(()=>[...t[0]||(t[0]=[(0,s.eW)("保存",-1)])]),_:1})]),_:1},8,["config"])])}}},o=a(66262);const r=(0,o.A)(p,[["__scopeId","data-v-5a260905"]]);var u=r}}]);