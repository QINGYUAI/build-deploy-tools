"use strict";(self["webpackChunkmeetingvue3"]=self["webpackChunkmeetingvue3"]||[]).push([[8879],{98879:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});var l=a(20641),i=a(50953),n=a(90033),s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACn0lEQVRYR+2WQZLSUBCGu4MvuBpYWuUEYeMkK+EGzAmGOYF4AmdO4HgC8QTiCWROIDcAV0E3UMlY5U4qK82TtPVCXgyZJC/BoWYz2ZCqUN3f+7v/7odwzw/ec354ANhbgcUxG4GGr8MSEo1Ml1/uU869AOyWfoUAbwjgrUgq3y3Hv6oKURnAfgJt1NmMAN/LhDGQ73esH7CqAlEZYGHoE0LoPvb8bmcNa5Fs2YTmryN9jgQz0/XPDwZgHz/qo6Z9JqJXlsvHyUS2wYaI+IGC4NS6+TMtC1FJgYXB5gSwtlzeFwkWLXaBgI0Txw97wTbYFBEapsN7dw4gT6htqPf8O59vAXQSv6bjhwf59pR1gxrOshTKAyqlgKjx7yO2JIJry+VDGSwNEKkwRoSzusc7skeK1CgFsPU8DOsebyeDZgFEsCsIYGze8AtVKZQAW9vpS+H5tM+zAEIV5JwoYUs1gMGmgNi2HL+dPk0eQASxQqKl6fLTvUsgbYe0OT9xN5NKANKyClsWKmC39BUQraTtqgD8syU+Mx2/U9kFwuMA+I4K6lhUghCgoH8kUKYC0nYQwMeiTl602BoAG3IOZJ0yctDLPFtmAtgGE14epG2XTiAGzwapWTR6pS2JYJKcIbkKyGkGQJemw0cqH5f5LsuZnKK5AOE8B2iaLu+qgn81agNAraF7/Fo19cQeAYCfaVvulEAEJKx9KrPR5H+3kGq18iwdA2xrpc+A4Ivp+gPV6eVyKgsQLi9DnwDCi7rn96RiMUCV8SmCRc0VLqa6x8eqEuTZMgmwwoAmZRaISp2i79Fl9kwOpx0AIJpmWeV/Et6ansdsRBoO5G6JAaRVBMRdJrwVC7GfbNodF4jGAoD4wnEgkHHyPqlcxweCiMM+APwFvTd3MNxQfhgAAAAASUVORK5CYII=",o=a(71029);const d={class:"statistical back_padding back_center_bg back_text"},u=["innerHTML"],c=["innerHTML"],m=["innerHTML"],r={key:0,class:"xuanz"},g=["onClick"],p=["onClick"],b={class:"block pagination"};var k={__name:"statistical",props:["activeName","SmsCountList"],setup(e,{expose:t}){const a=(0,o.lq)(),{proxy:s}=(0,l.nI)(),k=e,{activeName:v,SmsCountList:h}=(0,i.QW)(k),L=(0,i.Kh)({input:"",dialogVisible:!0,multipleSelection:[],dictTotal:0,dictCurrentPage:1,dictPageSize:10,SmsListData:[],temp_id:"",label_id:"",match:"",labelData:[]}),{input:_,dialogVisible:C,multipleSelection:f,dictTotal:w,dictCurrentPage:y,dictPageSize:S,SmsListData:A,temp_id:W,label_id:R,match:F,labelData:N}=(0,i.QW)(L);function V(e){if(e)return e.replace(e.substring(3,7),"****")}function I(){"sms"===k.activeName?M():E()}function z(e){L.dictPageSize=e,"sms"===k.activeName?M():E()}function K(e){L.dictCurrentPage=e,"sms"===k.activeName?M():E()}function T(){}function M(){const e={meetingId:a.query.meeting,type_vue:"1",temp_id:L.temp_id,label_id:L.label_id,match:L.match,page:L.dictCurrentPage,per_page:L.dictPageSize};console.log(e),L.SmsListData=[],s.$http.article.getSmsRecord(e).then(e=>{1===e.data.status?(L.SmsListData=e.data.list,L.dictCurrentPage=e.data.pageinfo.page,L.dictPageSize=e.data.pageinfo.per_page,L.dictTotal=e.data.pageinfo.total):s.$message.error(e.data.msg)})}function E(){const e={meetingId:a.query.meeting,type_vue:"1",temp_id:L.temp_id,label_id:L.label_id,match:L.match,page:L.dictCurrentPage,per_page:L.dictPageSize};L.SmsListData=[],s.$Loadimg.showLoading(),s.$http.article.getMailRecord(e).then(e=>{s.$Loadimg.hideLoading(),1===e.data.status?(L.SmsListData=e.data.list,L.dictCurrentPage=e.data.pageinfo.page,L.dictPageSize=e.data.pageinfo.per_page,L.dictTotal=e.data.pageinfo.total):s.$message.error(e.data.msg)})}function U(e){const t={meetingId:a.query.meeting,type_vue:"1",labelId:e.labelId,content:e.content};s.$Loadimg.showLoading(),s.$http.article.cancelSendAll(t).then(e=>{s.$Loadimg.hideLoading(),1===e.data.status?M():s.$message.error(e.data.msg)})}function X(e){const t={meetingId:a.query.meeting,type_vue:"1",id:e.id,content:e.content};s.$Loadimg.showLoading(),s.$http.article.smsSendCancel(t).then(e=>{s.$Loadimg.hideLoading(),1===e.data.status?M():s.$message.error(e.data.msg)})}function P(){const e={meetingId:a.query.meeting,type_vue:"1"};s.$Loadimg.showLoading(),s.$http.article.getlabel(e).then(e=>{s.$Loadimg.hideLoading(),1===e.data.status?L.labelData=e.data.list:s.$message.error(e.data.msg)})}return(0,l.wB)(()=>k.SmsCountList,()=>{console.log(k.SmsCountList)}),(0,l.wB)(()=>k.activeName,()=>{"sms"===k.activeName?M():E()}),(0,l.sV)(()=>{"sms"===k.activeName&&(P(),M()),"mail"===k.activeName&&E()}),t({activeName:v,SmsCountList:h,input:_,dialogVisible:C,multipleSelection:f,dictTotal:w,dictCurrentPage:y,dictPageSize:S,SmsListData:A,temp_id:W,label_id:R,match:F,labelData:N,Onphone:V,Selget:I,handleSizeChange:z,handleCurrentChange:K,handleClick:T,cancelsendall:U,cancelsend:X}),(e,t)=>{const a=(0,l.g2)("el-option"),s=(0,l.g2)("el-select"),o=(0,l.g2)("el-col"),k=(0,l.g2)("el-input"),L=(0,l.g2)("el-button"),_=(0,l.g2)("el-row"),C=(0,l.g2)("el-table-column"),f=(0,l.g2)("el-tooltip"),T=(0,l.g2)("el-table"),M=(0,l.g2)("el-pagination");return(0,l.uX)(),(0,l.CE)("div",d,[(0,l.bF)(_,{gutter:20,class:"select"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{span:5},{default:(0,l.k6)(()=>[2===(0,i.R1)(h).thenum?((0,l.uX)(),(0,l.Wv)(s,{key:0,size:"small",modelValue:(0,i.R1)(W),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,i.i9)(W)?W.value=e:null),placeholder:"选择签模板名称"},{default:(0,l.k6)(()=>[(0,l.bF)(a,{value:""},{default:(0,l.k6)(()=>[...t[5]||(t[5]=[(0,l.eW)("选择签模板名称",-1)])]),_:1}),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,i.R1)(h),e=>((0,l.uX)(),(0,l.Wv)(a,{key:e.tempName,label:e.tempName,value:e.tempId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):1===(0,i.R1)(h).thenum?((0,l.uX)(),(0,l.Wv)(s,{key:1,size:"small",modelValue:(0,i.R1)(W),"onUpdate:modelValue":t[1]||(t[1]=e=>(0,i.i9)(W)?W.value=e:null),placeholder:"选择签模板名称"},{default:(0,l.k6)(()=>[(0,l.bF)(a,{value:""},{default:(0,l.k6)(()=>[...t[6]||(t[6]=[(0,l.eW)("选择签模板名称",-1)])]),_:1}),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,i.R1)(h),e=>((0,l.uX)(),(0,l.Wv)(a,{key:e.id,label:e.label,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(0,l.Q3)("",!0)]),_:1}),"sms"===(0,i.R1)(v)?((0,l.uX)(),(0,l.Wv)(o,{key:0,span:5},{default:(0,l.k6)(()=>[(0,l.bF)(s,{size:"small",modelValue:(0,i.R1)(R),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,i.i9)(R)?R.value=e:null),placeholder:"请选择批次号"},{default:(0,l.k6)(()=>[(0,l.bF)(a,{value:""},{default:(0,l.k6)(()=>[...t[7]||(t[7]=[(0,l.eW)("请选择批次号",-1)])]),_:1}),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,i.R1)(N),e=>((0,l.uX)(),(0,l.Wv)(a,{key:e.title,label:e.title,value:e.labelId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):(0,l.Q3)("",!0),(0,l.bF)(o,{span:5},{default:(0,l.k6)(()=>[(0,l.bF)(k,{size:"small",modelValue:(0,i.R1)(F),"onUpdate:modelValue":t[3]||(t[3]=e=>(0,i.i9)(F)?F.value=e:null),placeholder:"收件人、电话、模板内容"},null,8,["modelValue"])]),_:1}),(0,l.bF)(o,{span:5},{default:(0,l.k6)(()=>[(0,l.bF)(L,{type:"primary",size:"small",onClick:t[4]||(t[4]=e=>I())},{default:(0,l.k6)(()=>[...t[8]||(t[8]=[(0,l.eW)("查询",-1)])]),_:1})]),_:1})]),_:1}),(0,l.bF)(T,{data:(0,i.R1)(A),stripe:"","tooltip-effect":"dark",style:{width:"100%"}},{default:(0,l.k6)(()=>[(0,l.bF)(C,{prop:"id",label:"id"}),(0,l.bF)(C,{prop:"fullname",label:"发送人"}),(0,l.bF)(C,{prop:"participantName",label:"接收人"}),(0,l.bF)(C,{prop:"sendTime",label:"发送时间"}),"sms"===(0,i.R1)(v)?((0,l.uX)(),(0,l.Wv)(C,{key:0,prop:"telephone",label:"电话"},{default:(0,l.k6)(e=>[(0,l.bF)(f,{class:"item",effect:"dark",content:e.row.telephone,placement:"bottom"},{default:(0,l.k6)(()=>[(0,l.bF)(L,{link:"",style:{color:"#606266"}},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)(V(e.row.telephone)),1)]),_:2},1024)]),_:2},1032,["content"])]),_:1})):((0,l.uX)(),(0,l.Wv)(C,{key:1,prop:"address",label:"邮箱"})),(0,l.bF)(C,{prop:"label",label:"模板名称"},{default:(0,l.k6)(e=>[2===(0,i.R1)(h).thenum?((0,l.uX)(),(0,l.CE)("div",{key:0,innerHTML:e.row.label},null,8,u)):((0,l.uX)(),(0,l.CE)("div",{key:1,innerHTML:e.row.subject},null,8,c))]),_:1}),(0,l.bF)(C,{prop:"content",width:"500",label:"模板内容"},{default:(0,l.k6)(e=>[(0,l.Lk)("div",{innerHTML:e.row.content},null,8,m)]),_:1}),(0,l.bF)(C,{label:"该次发送条数"},{default:(0,l.k6)(e=>[(0,l.eW)("发送"+(0,n.v_)(e.row.times)+"条",1)]),_:1}),"sms"===(0,i.R1)(v)?((0,l.uX)(),(0,l.Wv)(C,{key:2,prop:"title",label:"批次"})):(0,l.Q3)("",!0),"sms"===(0,i.R1)(v)?((0,l.uX)(),(0,l.Wv)(C,{key:3,label:"操作"},{default:(0,l.k6)(e=>[(0,l.bF)(L,{class:"g_btn",size:"small",onClick:t=>e.row.book=!e.row.book,style:(0,n.Tr)([e.row.planTime&&1==e.row.tag?"background-color: #428bca":"background-color: #666666",{color:"#fff"}]),disabled:!e.row.planTime||1!=e.row.tag},{default:(0,l.k6)(()=>[...t[9]||(t[9]=[(0,l.eW)("取消预约",-1)])]),_:1},8,["onClick","style","disabled"]),e.row.book?((0,l.uX)(),(0,l.CE)("div",r,[(0,l.Lk)("div",{onClick:t=>X(e.row),style:{cursor:"pointer"}},"单个取消",8,g),(0,l.Lk)("div",{onClick:t=>U(e.row),style:{cursor:"pointer"}}," 取消全批次 ",8,p)])):(0,l.Q3)("",!0)]),_:1})):(0,l.Q3)("",!0)]),_:1},8,["data"]),(0,l.Lk)("div",b,[(0,l.bF)(M,{layout:"prev, pager, next, total","current-page":(0,i.R1)(y),total:(0,i.R1)(w),background:"","page-size":(0,i.R1)(S),onSizeChange:z,onCurrentChange:K},null,8,["current-page","total","page-size"])])])}}},v=a(66262);const h=(0,v.A)(k,[["__scopeId","data-v-d4591db6"]]);var L=h;const _={class:"back_bg back_padding"},C={class:"templateNotice back_padding back_text"},f={class:"remainin"},w={style:{"font-size":"16px",color:"rgb(255, 0, 0)"}},y={class:"templateNotice_list back_text"},S={class:"templateNotice_li"},A={class:"remainin",style:{"text-align":"right"}},W={style:{"font-size":"16px",color:"rgb(255, 0, 0)"}},R={key:0,class:"back_bg back_padding"};var F={__name:"templateNotice",setup(e,{expose:t}){const a=(0,o.lq)(),{proxy:d}=(0,l.nI)(),u=(0,i.KR)(null),c=(0,i.KR)(null),m=(0,i.Kh)({activeName:"sms",MailCountList:[],SmsCountList:[],msgtotals:"",totals:"",numrow:6,screenWidth:document.body.clientWidth}),{activeName:r,MailCountList:g,SmsCountList:p,msgtotals:b,totals:k,numrow:v,screenWidth:h}=(0,i.QW)(m);function F(){I(),V(),N()}function N(){window.onresize=()=>(()=>{window.screenWidth=document.body.clientWidth,m.screenWidth=window.screenWidth})(),console.log(m.screenWidth)}function V(){const e={meetingId:a.query.meeting,type_vue:"1"};d.$Loadimg.showLoading(),d.$http.article.getSmsCount(e).then(e=>{d.$Loadimg.hideLoading(),1===e.data.status?(m.SmsCountList=e.data.list,m.SmsCountList.thenum=2,m.msgtotals=e.data.msgtotals,m.totals=e.data.totals):d.$message.error(e.data.msg)})}function I(){const e={meetingId:a.query.meeting,type_vue:"1"};d.$Loadimg.showLoading(),d.$http.article.getmailCount(e).then(e=>{d.$Loadimg.hideLoading(),1===e.data.status?(m.MailCountList=e.data.list,m.MailCountList.thenum=1):d.$message.error(e.data.msg)})}function z(e){u.value.saveSend(e,m.sms_label)}return(0,l.wB)(()=>m.screenWidth,e=>{m.screenWidth=e,console.log("data.screenWidth",m.screenWidth),m.screenWidth<1400||1400===m.screenWidth?m.numrow=8:m.numrow=6}),F(),t({activeName:r,MailCountList:g,SmsCountList:p,msgtotals:b,totals:k,numrow:v,screenWidth:h,Statisticals:c,handleClick:z,Statistical:L}),(e,t)=>{const a=(0,l.g2)("el-col"),o=(0,l.g2)("el-row"),d=(0,l.g2)("el-tab-pane"),u=(0,l.g2)("el-tabs");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",_,[(0,l.bF)(u,{type:"border-card",modelValue:(0,i.R1)(r),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,i.i9)(r)?r.value=e:null)},{default:(0,l.k6)(()=>[(0,l.bF)(d,{label:"短信统计",name:"sms"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",C,[t[3]||(t[3]=(0,l.Lk)("p",{class:"templateNotice_text"},[(0,l.eW)("短信统计管理 "),(0,l.Lk)("span",{class:"templateNotice_red"},[(0,l.Lk)("img",{src:s,alt:""}),(0,l.eW)(" 注意：如果模板字数超过67个字，那么实际发送条数会与发送记录不符。")])],-1)),(0,l.Lk)("p",f,[t[1]||(t[1]=(0,l.eW)("剩余信息条数",-1)),(0,l.Lk)("span",w,(0,n.v_)((0,i.R1)(b)),1),t[2]||(t[2]=(0,l.eW)("条",-1))])]),(0,l.Lk)("div",y,[(0,l.bF)(o,{gutter:80},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,i.R1)(p),e=>((0,l.uX)(),(0,l.Wv)(a,{span:(0,i.R1)(v),key:e.name},{default:(0,l.k6)(()=>[(0,l.Lk)("p",S,[(0,l.Lk)("span",null,(0,n.v_)(e.tempName),1),(0,l.Lk)("span",null,(0,n.v_)(e.total?e.total:0)+"条",1)])]),_:2},1032,["span"]))),128))]),_:1}),(0,l.Lk)("p",A,[t[4]||(t[4]=(0,l.eW)("发送总条数",-1)),(0,l.Lk)("span",W,(0,n.v_)((0,i.R1)(k)),1),t[5]||(t[5]=(0,l.eW)("条",-1))])])]),_:1}),(0,l.bF)(d,{label:"邮件统计",name:"mail"},{default:(0,l.k6)(()=>[(0,l.bF)((0,i.R1)(L),{ref_key:"Statisticals",ref:c,activeName:(0,i.R1)(r),SmsCountList:(0,i.R1)(g)},null,8,["activeName","SmsCountList"])]),_:1})]),_:1},8,["modelValue"])]),"sms"==(0,i.R1)(r)?((0,l.uX)(),(0,l.CE)("div",R,[(0,l.bF)((0,i.R1)(L),{activeName:(0,i.R1)(r),SmsCountList:(0,i.R1)(p),ref_key:"Statisticals",ref:c},null,8,["activeName","SmsCountList"])])):(0,l.Q3)("",!0)],64)}}};const N=(0,v.A)(F,[["__scopeId","data-v-e07269be"]]);var V=N}}]);