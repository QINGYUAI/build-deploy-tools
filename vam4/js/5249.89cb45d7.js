"use strict";(self["webpackChunkmeetingvue3"]=self["webpackChunkmeetingvue3"]||[]).push([[5249],{45249:function(e,a,t){t.r(a),t.d(a,{default:function(){return L}});var l=t(20641),o=t(50953),s=t(90033),i=t(86244),n=t(71029);const r={class:"back_text back_padding passageway"},d={class:"back_center_bg back_padding"},g=["href"],u={class:"btn_div_passageway"},p={class:"back_center_bg back_padding"},c={key:0},y={key:1},m={key:2},b={key:3},k={key:0},w={key:1},h=["href"],f={class:"block"},C={class:"dialog-footer"};var _={__name:"passageway",setup(e,{expose:a}){const t=(0,n.lq)(),{proxy:_}=(0,l.nI)(),v=(0,o.Kh)({centerDialogVisible:!1,tableData:[],dialogVisible:!1,dictTotal:0,dictCurrentPage:1,dictPageSize:10,rolelist:{roleName:"",passagewayType:"1",workType:[]},ifxinzeng:1,mid:t.query.meeting,Url:window.location.protocol+"//"+("localhost"===window.location.hostname?"php7.yiyum.com":window.location.host)+"/vam3"}),{centerDialogVisible:F,tableData:L,dialogVisible:R,dictTotal:V,dictCurrentPage:T,dictPageSize:x,rolelist:$,ifxinzeng:z,mid:W,Url:E}=(0,o.QW)(v);function X(e){v.dictPageSize=e,P()}function Q(e){v.dictCurrentPage=e,P()}function P(){const e={meetingId:t.query.meeting,page:v.dictCurrentPage,per_page:v.dictPageSize,type_vue:1};_.$Loadimg.showLoading(),_.$http.article.Passageway_plist(e).then(e=>{_.$Loadimg.hideLoading(),200===e.data.status&&(v.tableData=e.data.list,v.dictTotal=e.data.pageinfo.total,v.dictPageSize=e.data.pageinfo.per_page)})}function S(){const e={roleName:"",passagewayType:"1",workType:[]};v.rolelist=e,v.ifxinzeng=1,v.dialogVisible=!0}function I(e){for(var a in e)v.rolelist[a]=e[a];v.rolelist.passagewayType=String(v.rolelist.passagewayType),v.ifxinzeng=2,v.dialogVisible=!0}function K(){}function D(){if(v.rolelist.roleName)if(v.rolelist.workType.length<1)_.$message({showClose:!0,message:"角色权限不能为空",type:"error"});else if(1===v.ifxinzeng){const e=v.rolelist;e.meetingId=t.query.meeting,e.type_vue=1,_.$Loadimg.showLoading(),_.$http.article.Passageway_addlist(e).then(e=>{_.$Loadimg.hideLoading(),200===e.data.status?(_.$message({showClose:!0,message:"新增成功！",type:"success"}),v.dialogVisible=!1,P()):_.$message({showClose:!0,message:e.data.msg,type:"error"})})}else{const e=v.rolelist;e.type_vue=1,_.$Loadimg.showLoading(),_.$http.article.Passageway_Savelist(e).then(e=>{_.$Loadimg.hideLoading(),200===e.data.status?(_.$message({showClose:!0,message:"修改成功！",type:"success"}),v.dialogVisible=!1,P()):_.$message({showClose:!0,message:"修改失败！",type:"error"})})}else _.$message({showClose:!0,message:"角色名称不能为空",type:"error"})}function N(e){const a=e;a.status=0===a.status?1:0,a.type_vue=1,_.$Loadimg.showLoading(),_.$http.article.Passageway_Savelist(a).then(e=>{_.$Loadimg.hideLoading(),200===e.data.status?(_.$message({showClose:!0,message:"修改成功！",type:"success"}),v.dialogVisible=!1,P()):_.$message({showClose:!0,message:"修改失败！",type:"error"})})}function U(e){_.$confirm("确定要删除当前角色？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const a=e;a.invalid=0===a.invalid?1:0,a.type_vue=1,_.$Loadimg.showLoading(),_.$http.article.Passageway_Savelist(a).then(e=>{_.$Loadimg.hideLoading(),200===e.data.status?(_.$message({showClose:!0,message:"删除成功！",type:"success"}),v.dialogVisible=!1,P()):_.$message({showClose:!0,message:"删除失败！",type:"error"})})}).catch(()=>{_.$message({type:"info",message:"已取消删除"})})}return(0,l.sV)(()=>{P()}),a({centerDialogVisible:F,tableData:L,dialogVisible:R,dictTotal:V,dictCurrentPage:T,dictPageSize:x,rolelist:$,ifxinzeng:z,mid:W,Url:E,QRCode:i.A,handleSizeChange:X,handleCurrentChange:Q,addrole:S,eitrole:I,handleClick:K,saverole:D,jinyongrole:N,shanchurole:U}),(e,a)=>{const t=(0,l.g2)("el-button"),n=(0,l.g2)("el-dialog"),_=(0,l.g2)("el-table-column"),v=(0,l.g2)("el-table"),z=(0,l.g2)("el-pagination"),P=(0,l.g2)("el-input"),q=(0,l.g2)("el-checkbox"),M=(0,l.g2)("el-checkbox-group"),A=(0,l.g2)("el-tab-pane"),B=(0,l.g2)("el-tabs");return(0,l.uX)(),(0,l.CE)("div",r,[(0,l.Lk)("div",d,[(0,l.Lk)("p",null,[a[10]||(a[10]=(0,l.eW)(" 统一部署链接：",-1)),(0,l.Lk)("a",{href:(0,o.R1)(E)+"/#/clientManagement?meetingid="+(0,o.R1)(W)+"&version=109",style:{color:"blue"},target:"_blank"},(0,s.v_)((0,o.R1)(E)+"/#/clientManagement?meetingid="+(0,o.R1)(W)),9,g),(0,l.bF)(t,{class:"ewm",type:"primary",size:"small",onClick:a[0]||(a[0]=e=>F.value=!0)},{default:(0,l.k6)(()=>[...a[9]||(a[9]=[(0,l.eW)("二维码",-1)])]),_:1})]),(0,l.bF)(n,{modelValue:(0,o.R1)(F),"onUpdate:modelValue":a[1]||(a[1]=e=>(0,o.i9)(F)?F.value=e:null),width:"30%",center:""},{default:(0,l.k6)(()=>[(0,l.bF)((0,o.R1)(i.A),{ref:"qrcode",QRCodetext:(0,o.R1)(E)+"/#/clientManagement?meetingid="+(0,o.R1)(W)+"&version=109"},null,8,["QRCodetext"])]),_:1},8,["modelValue"]),(0,l.Lk)("div",u,[(0,l.bF)(t,{type:"primary",size:"small",onClick:a[2]||(a[2]=e=>S())},{default:(0,l.k6)(()=>[...a[11]||(a[11]=[(0,l.eW)("新增角色",-1)])]),_:1})])]),(0,l.Lk)("div",p,[(0,l.bF)(v,{data:(0,o.R1)(L),style:{width:"100%"}},{default:(0,l.k6)(()=>[(0,l.bF)(_,{prop:"reportId",label:"通道ID"}),(0,l.bF)(_,{prop:"roleName",label:"角色名称"}),(0,l.bF)(_,{prop:"passagewayType",label:"通道类型"},{default:(0,l.k6)(e=>[1==e.row.passagewayType?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)(" 人工通道 ")],64)):2==e.row.passagewayType?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.eW)(" 自助机 ")],64)):(0,l.Q3)("",!0)]),_:1}),(0,l.bF)(_,{prop:"workType",label:"功能类型"},{default:(0,l.k6)(e=>[e.row.workType&&1==e.row.passagewayType?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(e.row.workType,e=>((0,l.uX)(),(0,l.CE)(l.FK,{key:e},[1==e?((0,l.uX)(),(0,l.CE)("span",c," 签到    ")):2==e?((0,l.uX)(),(0,l.CE)("span",y," 财务    ")):3==e?((0,l.uX)(),(0,l.CE)("span",m," 人员    ")):4==e?((0,l.uX)(),(0,l.CE)("span",b," 注册    ")):(0,l.Q3)("",!0)],64))),128)):e.row.workType&&2==e.row.passagewayType?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:1},(0,l.pI)(e.row.workType,e=>((0,l.uX)(),(0,l.CE)(l.FK,{key:e},[1==e?((0,l.uX)(),(0,l.CE)("span",k," 签到    ")):2==e?((0,l.uX)(),(0,l.CE)("span",w," 注册    ")):(0,l.Q3)("",!0)],64))),128)):(0,l.Q3)("",!0)]),_:1}),(0,l.bF)(_,{prop:"clientNumber",label:"设备编号"}),(0,l.bF)(_,{prop:"status",label:"状态"},{default:(0,l.k6)(e=>[1==e.row.status?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)(" 启用 ")],64)):0==e.row.status?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.eW)(" 禁用 ")],64)):(0,l.Q3)("",!0)]),_:1}),(0,l.bF)(_,{prop:"url",label:"链接地址",width:"480"},{default:(0,l.k6)(e=>[(0,l.Lk)("a",{href:(0,o.R1)(E)+"/#/clientManagement?meetingid="+e.row.meetingId+"&reportid="+e.row.reportId+"&version=109",target:"_blank"},(0,s.v_)((0,o.R1)(E)+"/#/clientManagement?meetingid="+e.row.meetingId+"&reportid="+e.row.reportId),9,h)]),_:1}),(0,l.bF)(_,{label:"操作",width:"200"},{default:(0,l.k6)(e=>[(0,l.bF)(t,{size:"small",type:"primary",class:"table_btn",onClick:a=>I(e.row)},{default:(0,l.k6)(()=>[...a[12]||(a[12]=[(0,l.eW)("管理",-1)])]),_:1},8,["onClick"]),(0,l.bF)(t,{type:"primary",size:"small",class:"table_btn",onClick:a=>N(e.row)},{default:(0,l.k6)(()=>[1==e.row.status?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)(" 禁用 ")],64)):0==e.row.status?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.eW)(" 启用 ")],64)):(0,l.Q3)("",!0)]),_:2},1032,["onClick"]),(0,l.bF)(t,{size:"small",type:"primary",onClick:a=>U(e.row)},{default:(0,l.k6)(()=>[...a[13]||(a[13]=[(0,l.eW)("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),(0,l.Lk)("div",f,[(0,l.bF)(z,{layout:"sizes,prev, pager, next, total","current-page":(0,o.R1)(T),total:(0,o.R1)(V),background:"","page-size":(0,o.R1)(x),onSizeChange:X,onCurrentChange:Q},null,8,["current-page","total","page-size"])])]),(0,l.bF)(n,{modelValue:(0,o.R1)(R),"onUpdate:modelValue":a[8]||(a[8]=e=>(0,o.i9)(R)?R.value=e:null),title:"新增角色",width:"30%","before-close":e.handleClose,"destroy-on-close":""},{footer:(0,l.k6)(()=>[(0,l.Lk)("span",C,[(0,l.bF)(t,{type:"primary",onClick:a[7]||(a[7]=e=>D())},{default:(0,l.k6)(()=>[...a[20]||(a[20]=[(0,l.eW)("保存",-1)])]),_:1})])]),default:(0,l.k6)(()=>[(0,l.Lk)("p",null,[a[14]||(a[14]=(0,l.eW)(" 角色名称:",-1)),(0,l.bF)(P,{modelValue:(0,o.R1)($).roleName,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,o.R1)($).roleName=e),placeholder:"请输入大会名称",style:{width:"200px","margin-left":"20px"}},null,8,["modelValue"])]),(0,l.bF)(B,{modelValue:(0,o.R1)($).passagewayType,"onUpdate:modelValue":a[6]||(a[6]=e=>(0,o.R1)($).passagewayType=e),class:"demo-tabs",onTabClick:K},{default:(0,l.k6)(()=>[(0,l.bF)(A,{label:"人工通道",name:"1"},{default:(0,l.k6)(()=>[(0,l.bF)(M,{modelValue:(0,o.R1)($).workType,"onUpdate:modelValue":a[4]||(a[4]=e=>(0,o.R1)($).workType=e)},{default:(0,l.k6)(()=>[(0,l.bF)(q,{key:"1",label:"1",border:""},{default:(0,l.k6)(()=>[...a[15]||(a[15]=[(0,l.eW)("签到功能",-1)])]),_:1}),(0,l.bF)(q,{key:"2",label:"2",border:""},{default:(0,l.k6)(()=>[...a[16]||(a[16]=[(0,l.eW)("财务功能",-1)])]),_:1}),(0,l.bF)(q,{key:"3",label:"3",border:""},{default:(0,l.k6)(()=>[...a[17]||(a[17]=[(0,l.eW)("人员信息管理",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),(0,l.bF)(A,{label:"自助机",name:"2"},{default:(0,l.k6)(()=>[(0,l.bF)(M,{modelValue:(0,o.R1)($).workType,"onUpdate:modelValue":a[5]||(a[5]=e=>(0,o.R1)($).workType=e)},{default:(0,l.k6)(()=>[(0,l.bF)(q,{key:"1",label:"1",border:""},{default:(0,l.k6)(()=>[...a[18]||(a[18]=[(0,l.eW)("签到功能",-1)])]),_:1}),(0,l.bF)(q,{key:"2",label:"2",border:""},{default:(0,l.k6)(()=>[...a[19]||(a[19]=[(0,l.eW)("注册功能",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","before-close"])])}}},v=t(66262);const F=(0,v.A)(_,[["__scopeId","data-v-26657dd9"]]);var L=F},86244:function(e,a,t){t.d(a,{A:function(){return g}});var l=t(20641),o=t(79118),s=t.n(o),i=t(50953);const n={class:"boxshow"};var r={__name:"qrcodejs2",props:{QRCodetext:{type:String,default:""},width:{type:Number,default:300},height:{type:Number,default:300}},setup(e,{expose:a}){const t=e,{QRCodetext:o}=(0,i.QW)(t),r=(0,i.KR)(null);function d(){r.value.innerHTML="";const e=new(s())(r.value,{width:t.width,height:t.height,text:t.QRCodetext?t.QRCodetext:"",colorDark:"#000",colorLight:"#fff",correctLevel:s().CorrectLevel.H});return e}return(0,l.wB)(()=>t.QRCodetext,()=>{(0,l.dY)(()=>{d()})}),(0,l.sV)(()=>{(0,l.dY)(()=>{d()})}),a({QRCodetext:o}),(e,a)=>((0,l.uX)(),(0,l.CE)("div",n,[(0,l.Lk)("div",{class:"qrcode",ref_key:"qrcodeContainer",ref:r},null,512)]))}};const d=r;var g=d}}]);