"use strict";(self["webpackChunkmeetingvue3"]=self["webpackChunkmeetingvue3"]||[]).push([[9799],{78365:function(e,t,a){a.d(t,{A:function(){return n}});var l=a(20641),s=a(50953);const r={class:"paginated"};var i={__name:"index",props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){const a=e,i=t,o=(0,s.Kh)({page:1,per_page:10,total:0});(0,l.wB)(()=>a.modelValue,e=>{a.modelValue&&(o.page=e.page,o.per_page=e.per_page,o.total=e.total)});const{page:n,per_page:p,total:d}=(0,s.QW)(o),u=e=>{o.per_page=e},c=e=>{o.page=e};return(0,l.wB)(()=>o,e=>{i("update:modelValue",{...e})},{deep:!0}),(e,t)=>{const a=(0,l.g2)("el-pagination");return(0,l.uX)(),(0,l.CE)("div",r,[(0,l.bF)(a,(0,l.v6)({"current-page":(0,s.R1)(n),"onUpdate:currentPage":t[0]||(t[0]=e=>(0,s.i9)(n)?n.value=e:null),"page-size":(0,s.R1)(p),"onUpdate:pageSize":t[1]||(t[1]=e=>(0,s.i9)(p)?p.value=e:null),"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:(0,s.R1)(d),size:"small",onSizeChange:u,onCurrentChange:c},e.$attrs),null,16,["current-page","page-size","total"])])}}};const o=i;var n=o},89799:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});a(18111),a(22489),a(20116),a(7588),a(61701);var l=a(20641),s=a(90033),r=a(50953),i=a(78365),o=a(40834),n=(a(69112),({type:e,$vm:t,route:a,store:l})=>{const s=(0,r.Kh)({ServiceItems:[],departmentList:[]}),{ServiceItems:i,departmentList:o}=(0,r.QW)(s),n=(e,t)=>{let a=[];if(e.supplierClassId){let t=[];try{const a=JSON.parse(e.supplierClassId);t=Array.isArray(a)?JSON.parse(e.supplierClassId)||[]:e.supplierClassId?e.supplierClassId.split(","):[]}catch(l){t=e.supplierClassId?e.supplierClassId.split(","):[]}a=t.map(e=>{const t=i.value.find(t=>t.supplierClassId==e);return{name:t?t.supplierClassName:"",id:t?t.supplierClassId:""}})}if(t){const e=i.value.find(e=>e.supplierClassId==t);return{name:e?e.supplierClassName:"",id:e?e.supplierClassId:"",...e}}return a};function p(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){console.error(t)}if(Array.isArray(e))e.forEach(e=>{p(e)});else{if("object"!=typeof e)return e;if("[object Object]"!==Object.prototype.toString.call(e))return[];for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=p(e[t]))}return e}function d(e){return"false"!==e&&("true"===e||e)}function u({form:e,list:t,FixedFields:a,customField:l,fieldName:s,fieldVal:r}){for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&Object.keys(a).includes(i)){const a=t[i];e.value[i]=a}l&&l.length>0&&l.forEach(t=>{try{const a=JSON.parse(t[r]);Array.isArray(a)?e.value[t[s]]=p(a)||[]:e.value[t[s]]="object"==typeof a?p(a)||[]:d(t[r])}catch(a){e.value[t[s]]=d(t[r])}})}return{showClass:n,ServiceItems:i,departmentList:o,SetCustomField:u}}),p=a(97149),d=a(71029);const u={class:"SealDetail"},c={class:"section"},m={style:{display:"flex","flex-direction":"column"}},g={key:0,style:{display:"flex","align-items":"center"}},v={class:"section"};var h={__name:"SealDetail",props:{dialogData:{type:Object,default:()=>({})}},setup(e){const t=(0,o.Pj)(),a=(0,d.lq)(),i=e,{proxy:h}=(0,l.nI)(),{SetCustomField:y}=n({type:"Get",$vm:h,route:a,committeeSiteId:1}),f=(0,r.KR)([]),b=(0,r.KR)(i.dialogData.chapterClassId),I="localhost"===location.hostname?"/api":"",k=(0,r.Kh)({step:[],active:0,processList:[{num:101,value:"wait"},{num:201,value:"success"},{num:301,value:"error"}]}),{step:_,active:w,processList:C}=(0,r.QW)(k),F=(0,r.Kh)({fields:[],json:"[]",options:"{}",form:{},fApi:{},loading:!1,FixedFields:{meetingId:"",chapterName:"",chapterPrice:"",chapterImg:"",committeeDepartmentId:""}}),{json:$,options:L,form:S,fApi:D,loading:R,FixedFields:j}=(0,r.QW)(F),V=(0,r.KR)([]);function A(e){const t={type_vue:"1",id:e};h.$http.article.getDepartment(t).then(e=>{1===e.data.status||200===e.data.status?V.value=e.data.list:h.$message.error(e.data.msg)})}(0,l.wB)(()=>t.state.user.committeeSiteId,()=>{t.state.user.committeeSiteId&&A(t.state.user.committeeSiteId)},{immediate:!0}),(0,l.wB)(()=>[V.value,D.value],e=>{e[0]&&e[0].length&&e[1].updateRule&&(0,l.dY)(()=>{const e=V.value.map(e=>({label:e.title,value:e.committeeDepartmentId}));D.value.updateRule("committeeDepartmentId",{options:e})})},{immediate:!0});(0,r.KR)({});function x(){h.$Loadimg.showLoading();const e={type_vue:1,committeeId:h.$store.state.user.committeeId};h.$http.seal.chapterClassList(e).then(e=>{h.$Loadimg.hideLoading(),1===e.data.status||200===e.data.status?e.data.list&&e.data.list.length>0&&(f.value=e.data.list):h.$message.error(e.data.msg)}).catch(e=>{console.log(e,"err")})}const K=async({chapterId:e,committeeDepartmentId:t,committeeId:a})=>{try{if(!i.dialogData||!i.dialogData.chapterId)return;const l=await h.$http.seal.getChapterDetail({chapterId:e,committeeDepartmentId:t,committeeId:a});if(1===l.data.status||200===l.data.status){const{chapterId:e,custom_fields:t,approvalConfig:a,applyInfo:s}=l.data.list;Array.isArray(s)||(s=[s]),_.value=a.content?JSON.parse(a.content):[],_.value.forEach((e,t)=>{const a=s.find(t=>t.chapterApplyUid==e.user_id);a?(e.chapterApplyTime=a.chapterApplyTime,e.chapterApplyRemark=a.chapterApplyRemark,e.signName=a.signName,e.process=C.value.find(e=>e.num==a.chapterApplyStatus).value,"success"==e.process&&(w.value=t+1)):e.process="wait"}),y({form:S,list:l.data.list,FixedFields:j.value,customField:t,fieldName:"chapterKeyId",fieldVal:"chapterVal"}),S.value.chapterId=JSON.parse(e),delete S.value.chapterId,S.value.chapterImg=l.data.list.chapterImg?l.data.list.chapterImg.split(";"):[]}else h.$message.error(l.message||"获取章详情失败")}catch(l){console.error("获取章详情异常:",l),h.$message.error("获取章详情异常")}};function W(e){h.$Loadimg.showLoading();const a={type_vue:1,committeeId:t.state.user.committeeId,classId:e};h.$http.seal.chapterField(a).then(e=>{if(h.$Loadimg.hideLoading(),1===e.data.status||200===e.data.status){const{json:t,options:a}=e.data.list;t?(F.json=t,F.options=a):(F.json="[]",F.options="{}"),R.value=!0}else h.$message.error(e.data.msg)}).catch(e=>{console.log(e,"err")})}const O=async(e="")=>{try{const t={Gstypesend:1,meetingid:e,type_vue:1,subject:"",department:"",hide:""},a=await h.$http.article.getAllMeeting(t);if(200===a.status)if(200===a.data.status||1===a.data.status){const{list:t}=a.data;t.length>0&&e&&K({chapterId:i.dialogData.chapterId,committeeDepartmentId:a.data.list[0].committeeDepartmentId,committeeId:a.data.list[0].committeeId})}else h.$message.error(a.data.msg||"获取会议列表失败")}catch(t){console.error("获取会议列表失败",t),h.$message.error("获取会议列表失败")}};function N(){i.dialogData&&(i.dialogData.meetingId||i.dialogData.committeeDepartmentId)&&(i.dialogData.meetingId&&O(i.dialogData.meetingId),i.dialogData.committeeDepartmentId&&K({chapterId:i.dialogData.chapterId,committeeDepartmentId:i.dialogData.committeeDepartmentId,committeeId:h.$store.state.user.committeeId}),W(i.dialogData.chapterClassId),x())}return(0,l.sV)(()=>{N()}),(e,t)=>{const a=(0,l.g2)("el-text"),o=(0,l.g2)("el-image"),n=(0,l.g2)("el-step"),d=(0,l.g2)("el-steps"),h=(0,l.g2)("el-tab-pane"),y=(0,l.g2)("el-tabs");return(0,l.uX)(),(0,l.CE)("div",u,[(0,l.Lk)("div",c,[(0,l.Lk)("section",null,[(0,l.bF)(d,{active:(0,r.R1)(w),"align-center":"","finish-status":"success"},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,r.R1)(_),(i,p)=>((0,l.uX)(),(0,l.Wv)(n,{key:p,title:i.full_name,status:i.process},{description:(0,l.k6)(()=>[(0,l.Lk)("div",m,[(0,l.bF)(a,null,{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(i.name),1)]),_:2},1024),(0,l.bF)(a,null,{default:(0,l.k6)(()=>[(0,l.eW)(" 审核时间："+(0,s.v_)(i.chapterApplyTime?e.$dayjs(i.chapterApplyTime).format("YYYY-MM-DD HH:mm:ss"):"-"),1)]),_:2},1024),(0,l.bF)(a,null,{default:(0,l.k6)(()=>[(0,l.eW)(" 审核备注："+(0,s.v_)(i.chapterApplyRemark||"暂无备注"),1)]),_:2},1024),(0,l.bF)(a,null,{default:(0,l.k6)(()=>[t[3]||(t[3]=(0,l.eW)(" 电子签名： ",-1)),i.signName?((0,l.uX)(),(0,l.Wv)(o,{key:0,style:{width:"100px"},src:(0,r.R1)(I)+i.signName,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[(0,r.R1)(I)+i.signName],"show-progress":"",fit:"cover"},null,8,["src","preview-src-list"])):(0,l.Q3)("",!0)]),_:2},1024)])]),_:2},1032,["title","status"]))),128))]),_:1},8,["active"])])]),(0,r.R1)(S).signName?((0,l.uX)(),(0,l.CE)("div",g,[t[4]||(t[4]=(0,l.Lk)("h4",null,"电子签名：",-1)),(0,l.bF)(o,{style:{width:"100px"},src:(0,r.R1)(I)+(0,r.R1)(S).signName,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[(0,r.R1)(I)+(0,r.R1)(S).signName],"show-progress":"",fit:"cover"},null,8,["src","preview-src-list"])])):(0,l.Q3)("",!0),(0,l.bF)(y,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=e=>b.value=e)},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(f.value,e=>((0,l.uX)(),(0,l.CE)(l.FK,{key:e.chapterClassId},[i.dialogData.chapterClassId==e.chapterClassId?((0,l.uX)(),(0,l.Wv)(h,{key:0,label:e.chapterClassName,name:e.chapterClassId},null,8,["label","name"])):(0,l.Q3)("",!0)],64))),128))]),_:1},8,["modelValue"]),(0,l.Lk)("div",v,[(0,r.R1)(R)?((0,l.uX)(),(0,l.Wv)(p.A,{key:0,rule:(0,r.R1)($),option:(0,r.R1)(L),modelValue:(0,r.R1)(S),"onUpdate:modelValue":t[1]||(t[1]=e=>(0,r.i9)(S)?S.value=e:null),api:(0,r.R1)(D),"onUpdate:api":t[2]||(t[2]=e=>(0,r.i9)(D)?D.value=e:null),disabled:!0,keyId:"meltKeyId"},null,8,["rule","option","modelValue","api"])):(0,l.Q3)("",!0)])])}}},y=a(66262);const f=(0,y.A)(h,[["__scopeId","data-v-1843bbe9"]]);var b=f;const I={class:"SealApplyList MinHeight"},k={class:"box"},_={class:"search-form"},w={class:"table-container"},C={key:0},F={key:1},$={key:1},L={key:1},S={class:"pagination"},D={style:{width:"100%",display:"flex","justify-content":"center"}};var R={__name:"SealApplyList",setup(e){const{proxy:t}=(0,l.nI)(),a=(0,o.Pj)(),n=(0,r.KR)(!1),p=(0,r.KR)(!1),d=(0,r.KR)([]),u=(0,r.KR)([]),c=(0,r.KR)({}),m=(0,r.KR)([]);function g(){t.$Loadimg.showLoading();const e={type_vue:1,committeeId:t.$store.state.user.committeeId};t.$http.seal.chapterClassList(e).then(e=>{t.$Loadimg.hideLoading(),1===e.data.status||200===e.data.status?e.data.list&&e.data.list.length>0&&(m.value=e.data.list):t.$message.error(e.data.msg)}).catch(e=>{console.log(e,"err")})}const v=(0,r.Kh)({meetingId:"",chapterStatus:""}),h=(0,r.KR)({page:1,per_page:10,total:0}),y=(0,r.KR)(!1),f=(0,r.KR)({}),R=(0,r.KR)([]),j=async e=>{if(""!==e){p.value=!0;try{const a={Gstypesend:1,meetingid:"",type_vue:1,subject:e,department:"",hide:""},l=await t.$http.article.getAllMeeting(a);200!==l.status||200!==l.data.status&&1!==l.data.status?t.$message.error(l.data.msg||"搜索会议失败"):(u.value=l.data.list||[],u.value.forEach(e=>{c.value[e.id]=e.subject}))}catch(a){console.error("搜索会议失败",a)}finally{p.value=!1}}else x()},V=e=>{const t={1:{type:"info",text:"待提交"},2:{type:"warning",text:"待审核"},3:{type:"success",text:"审核通过"},4:{type:"danger",text:"审核拒绝"}};return t[e]||{type:"",text:""}},A=e=>{y.value=!0,f.value=e},x=async()=>{p.value=!0;try{const e={Gstypesend:1,meetingid:"",type_vue:1,subject:"",department:"",hide:""},a=await t.$http.article.getAllMeeting(e);200===a.status&&(200===a.data.status||1===a.data.status?(u.value=a.data.list||[],u.value.forEach(e=>{c.value[e.id]=e.subject})):t.$message.error(a.data.msg||"获取会议列表失败"))}catch(e){console.error("获取会议列表失败",e),t.$message.error("获取会议列表失败")}finally{p.value=!1}},K=async()=>{n.value=!0,t.$Loadimg.showLoading();try{const e={page:h.value.page,per_page:h.value.per_page,meetingId:v.meetingId||"",chapterStatus:v.chapterStatus||""},a=await t.$http.seal.getChapterList(e);1===a.data.status||200===a.data.status?(d.value=a.data.list,h.value={page:a.data.page,per_page:a.data.per_page,total:a.data.total},await W(a.data.list)):t.$message.error(a?.data?.msg||"获取用章申请列表失败")}catch(e){console.error("获取用章申请列表失败",e),t.$message.error("获取用章申请列表失败")}finally{n.value=!1,t.$Loadimg.hideLoading()}},W=async e=>{const a=e.filter(e=>e.meetingId&&0!==e.meetingId&&!c.value[e.meetingId]).map(e=>e.meetingId);0!==a.length&&await Promise.all(a.map(async e=>{try{const a={Gstypesend:1,meetingid:e,type_vue:1,subject:"",department:"",hide:""},l=await t.$http.article.getAllMeeting(a);200===l.status&&(200===l.data.status||1===l.data.status)&&l.data.list.length>0&&(c.value[e]=l.data.list[0].subject)}catch(a){console.error(`获取会议ID ${e} 的名称失败`,a)}}))},O=("localhost"===location.hostname?"/api":"")+"/CommitteeChapter/uploadChapterFile",N=(e,t)=>{X(e.list.full_url,t)},X=async(e,a)=>{const l={chapterId:a.chapterId,contract_img:e},s=await t.$http.seal.saveChapterList(l);1===s.data.status||200===s.data.status?K():t.$message.error(s.data.msg||"上传失败")};function E(e){const a={type_vue:"1",id:e};t.$http.article.getDepartment(a).then(e=>{1===e.data.status||200===e.data.status?R.value=e.data.list:t.$message.error(e.data.msg)})}(0,l.wB)(()=>a.state.user.committeeSiteId,()=>{a.state.user.committeeSiteId&&E(a.state.user.committeeSiteId)},{immediate:!0});const z=e=>{window.open(e,"_blank")};return(0,l.wB)(()=>h.value,(e,t)=>{t&&t.page===e.page&&t.per_page===e.per_page||t&&0!==t.total&&K()},{deep:!0}),(0,l.sV)(()=>{x(),g()}),(0,l.wB)(()=>a.state.user.committeeId,e=>{e&&K()},{immediate:!0}),(e,t)=>{const a=(0,l.g2)("el-option"),r=(0,l.g2)("el-select"),o=(0,l.g2)("el-form-item"),n=(0,l.g2)("el-button"),g=(0,l.g2)("el-form"),x=(0,l.g2)("el-table-column"),W=(0,l.g2)("el-tag"),X=(0,l.g2)("el-upload"),E=(0,l.g2)("el-table"),P=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.CE)("div",I,[(0,l.Lk)("div",k,[t[9]||(t[9]=(0,l.Lk)("div",{class:"title"},[(0,l.Lk)("span",{class:"right_bule"}),(0,l.Lk)("span",null,"用章申请列表")],-1)),(0,l.Lk)("div",_,[(0,l.bF)(g,{model:v,inline:"",size:"default"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{label:"用章会议"},{default:(0,l.k6)(()=>[(0,l.bF)(r,{style:{width:"192px"},modelValue:v.meetingId,"onUpdate:modelValue":t[0]||(t[0]=e=>v.meetingId=e),placeholder:"请选择用章会议",size:"small",filterable:"",remote:"","remote-method":j,loading:p.value,"reserve-keyword":""},{default:(0,l.k6)(()=>[(0,l.bF)(a,{label:"全部",value:""}),(0,l.bF)(a,{label:"其他",value:"0"}),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(u.value,e=>((0,l.uX)(),(0,l.Wv)(a,{key:e.id,label:e.subject,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1}),(0,l.bF)(o,{label:"申请状态"},{default:(0,l.k6)(()=>[(0,l.bF)(r,{modelValue:v.chapterStatus,"onUpdate:modelValue":t[1]||(t[1]=e=>v.chapterStatus=e),style:{width:"192px"},placeholder:"请选择申请状态",size:"small"},{default:(0,l.k6)(()=>[(0,l.bF)(a,{label:"全部",value:""}),(0,l.bF)(a,{label:"待提交",value:"1"}),(0,l.bF)(a,{label:"待审核",value:"2"}),(0,l.bF)(a,{label:"审核通过",value:"3"}),(0,l.bF)(a,{label:"审核拒绝",value:"4"})]),_:1},8,["modelValue"])]),_:1}),(0,l.bF)(o,null,{default:(0,l.k6)(()=>[(0,l.bF)(n,{type:"primary",onClick:K,size:"small"},{default:(0,l.k6)(()=>[...t[5]||(t[5]=[(0,l.eW)("搜索",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),(0,l.Lk)("div",w,[(0,l.bF)(E,{data:d.value,style:{width:"100%"}},{default:(0,l.k6)(()=>[(0,l.bF)(x,{prop:"departmentName",label:"分会名称"},{default:(0,l.k6)(e=>[(0,l.eW)((0,s.v_)(R.value.find(t=>t.committeeDepartmentId===e.row.committeeDepartmentId)?.title||"--"),1)]),_:1}),(0,l.bF)(x,{prop:"meetingId",label:"会议名称"},{default:(0,l.k6)(e=>[0===e.row?.meetingId?((0,l.uX)(),(0,l.CE)("span",C,"其他")):((0,l.uX)(),(0,l.CE)("span",F,(0,s.v_)(c.value[e.row?.meetingId]||"--"),1))]),_:1}),(0,l.bF)(x,{prop:"chapterClassId",label:"用章类型"},{default:(0,l.k6)(e=>[(0,l.eW)((0,s.v_)(m.value.find(t=>t.chapterClassId===e.row.chapterClassId)?.chapterClassName||"--"),1)]),_:1}),(0,l.bF)(x,{prop:"chapterName",label:"合同名称"}),(0,l.bF)(x,{prop:"chapterPrice",label:"合同金额"},{default:(0,l.k6)(e=>[(0,l.eW)((0,s.v_)(e.row.chapterPrice||"--"),1)]),_:1}),(0,l.bF)(x,{prop:"chapterStatus",label:"审批状态"},{default:(0,l.k6)(e=>[e.row.chapterStatus?((0,l.uX)(),(0,l.Wv)(W,{key:0,type:V(e.row.chapterStatus).type,size:"small"},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(V(e.row.chapterStatus).text),1)]),_:2},1032,["type"])):((0,l.uX)(),(0,l.CE)("span",$,"--"))]),_:1}),(0,l.bF)(x,{prop:"contractImg",label:"合同附件"},{default:(0,l.k6)(e=>[e.row.contractImg?((0,l.uX)(),(0,l.Wv)(n,{key:0,type:"primary",link:"",onClick:t=>z(e.row.contractImg)},{default:(0,l.k6)(()=>[...t[6]||(t[6]=[(0,l.eW)("下载",-1)])]),_:1},8,["onClick"])):((0,l.uX)(),(0,l.CE)("span",L,"--"))]),_:1}),(0,l.bF)(x,{prop:"operation",label:"操作"},{default:(0,l.k6)(e=>[(0,l.bF)(n,{type:"primary",link:"",onClick:t=>A(e.row)},{default:(0,l.k6)(()=>[...t[7]||(t[7]=[(0,l.eW)("查看",-1)])]),_:1},8,["onClick"]),3===e.row.chapterStatus?((0,l.uX)(),(0,l.Wv)(X,{key:0,action:O,"on-success":t=>N(t,e.row),"show-file-list":!1,name:"chapter_file"},{default:(0,l.k6)(()=>[(0,l.bF)(n,{type:"primary",link:""},{default:(0,l.k6)(()=>[...t[8]||(t[8]=[(0,l.eW)("上传合同",-1)])]),_:1})]),_:1},8,["on-success"])):(0,l.Q3)("",!0)]),_:1})]),_:1},8,["data"]),(0,l.Lk)("div",S,[(0,l.bF)(i.A,{modelValue:h.value,"onUpdate:modelValue":t[2]||(t[2]=e=>h.value=e),layout:"prev, pager, next, sizes, total","page-sizes":[10,20,30,50]},null,8,["modelValue"])])])]),(0,l.bF)(P,{modelValue:y.value,"onUpdate:modelValue":t[4]||(t[4]=e=>y.value=e),title:"用章详情",width:"50%"},{footer:(0,l.k6)(()=>[(0,l.Lk)("div",D,[(0,l.bF)(n,{type:"primary",onClick:t[3]||(t[3]=e=>y.value=!1)},{default:(0,l.k6)(()=>[...t[10]||(t[10]=[(0,l.eW)("关闭",-1)])]),_:1})])]),default:(0,l.k6)(()=>[y.value?((0,l.uX)(),(0,l.Wv)(b,{key:0,dialogData:f.value},null,8,["dialogData"])):(0,l.Q3)("",!0)]),_:1},8,["modelValue"])])}}};const j=(0,y.A)(R,[["__scopeId","data-v-b64622dc"]]);var V=j},97149:function(e,t,a){a.d(t,{A:function(){return n}});a(44114),a(18111),a(61701),a(33110);var l=a(20641),s=a(18965),r=a(50953),i={__name:"FormCreate",props:{modelValue:{type:Object,default:()=>{}},rule:{type:[String,Array],default:()=>[]},option:{type:[String,Object],default:()=>({})},api:{type:Object,default:()=>{}},FixedFields:{type:Object,default:()=>{}},json:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","update:api","submit"],setup(e,{emit:t}){const{proxy:a}=(0,l.nI)(),i=e,o=(0,r.KR)([]),n=(0,r.KR)({}),p=(0,r.KR)(!1);(0,l.sV)(()=>{if(i.json?(o.value=s.A.parseJson(i.rule),n.value=s.A.parseJson(i.option)):(o.value=i.rule,n.value=i.option),i.disabled){const e=s.A.parseJson(i.option);e.submitBtn.show=!1,n.value=e}(0,l.dY)(()=>{p.value=!0})});const d=t,u=(0,l.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}}),c=(0,l.EW)({get(){return i.api},set(e){d("update:api",e)}}),m=e=>"string"===typeof e?e:e instanceof Object?JSON.stringify(e):e||null===e||void 0===e||!1===e?e:"";function g(e,t){const a=t.toJson(),l=i.FixedFields,s=[];for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r))if(Object.prototype.hasOwnProperty.call(l,r))l[r]=m(e[r]);else{const t=v(e[r]);s.push({supplierKeyId:r,supplierVal:m(t)})}d("submit",{formData:e,fixedFields:l,val:s,supplierKey:a})}function v(e){if(Array.isArray(e))return e.map(e=>v(e));if(e instanceof Object){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=m(e[t]));return e}return e||""}return(0,l.sV)(()=>{}),(t,a)=>{const s=(0,l.g2)("FormCreate",!0);return p.value?((0,l.uX)(),(0,l.Wv)(s,{key:0,rule:o.value,option:n.value,modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),api:c.value,"onUpdate:api":a[1]||(a[1]=e=>c.value=e),onSubmit:g,disabled:e.disabled},null,8,["rule","option","modelValue","api","disabled"])):(0,l.Q3)("",!0)}}};const o=i;var n=o}}]);