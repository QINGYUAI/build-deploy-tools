"use strict";(self["webpackChunkmeetingvue3"]=self["webpackChunkmeetingvue3"]||[]).push([[9378],{9378:function(e,a,t){t.r(a),t.d(a,{default:function(){return Ce}});t(44114),t(18111),t(22489),t(20116),t(7588),t(61701),t(18237),t(69112),t(33110);var l=t(20641),n=t(50953),s=t(90033),i=t(53751),o=(t(64772),t(13596)),d=t(20354),u=t.n(d);var r=t(66262);var c=t(71029),m=t(40834);const p={class:"content","data-group":""},g={key:0,class:"ItemOut","data-item":"","data-change":"","data-group":""},h={"data-item":""},f={"data-item":""},v={"data-group":""},y=["innerHTML"],k={key:0,class:"list","data-group":""},b={key:0,class:"item","data-item":"","data-wrap":""},w={class:"name"},C=["innerHTML"],L={key:1,class:"Jobs"},x=["innerHTML"],_={key:1,class:"SpeechTime"},F=["innerHTML"],R={key:3,class:"Content"},$={class:"name"},V={class:"right"},N={key:0,style:{width:"108px",border:"50%",height:"108px",overflow:"hidden","border-radius":"50%"}},I=["src"],E={key:0,class:"footer"},X=["innerHTML"],S={key:1,class:"Jobs"};var z={__name:"ScheduleSection",props:{data:{type:Object,default(){return{TableData:[],ClassList:[]}}}},emits:["ready"],setup(e,{expose:a,emit:t}){function i(e){const a={meetingId:r.query.meeting,type_vue:1,sid:e};z.$http.schedule.SubsectionHeader(a).then(e=>{if(1===e.data.status||200===e.data.status){const a=e.data?.list?.data?.templateColor||{};if(a.content){const e=a.content;document.documentElement.style.setProperty("--schedule-color-text",e.color1),document.documentElement.style.setProperty("--schedule-color-main",e.color2)}}}).catch(e=>{console.error(e)})}const o=(0,m.Pj)(),d=e,u=t,r=(0,c.lq)(),{proxy:z}=(0,l.nI)(),W=(0,n.Kh)({title:"",ClassData:[],defaultClass:[],defaultClassId:[{id:"",Class:[]}],innerContent:[],lang:"cn",UpLang:"Cn",ScheduleRef:null}),{defaultClass:T,defaultClassId:U,innerContent:D,lang:M,UpLang:K,ScheduleRef:B}=(0,n.QW)(W);async function J(){D.value=[];const e=d.data.TableData.filter(e=>e.status&&1===e.status);e&&e.length>0&&z.$Loadimg.showLoading(),await e.map(async(a,t)=>{const n=await Q(a.id);n.content=JSON.parse(n.content)||[],n.content=n.content.map(async(e,a)=>{if(e.content&&e.content.length>0){const t=n.userList.filter(e=>(e.number||0)==a)||{};e.content=e.content.map(async(a,l)=>{const n=t.find(e=>(e.numberId||0)==l)||{};if(a={...a,...n},0==e.invalid&&0==a.invalid){const e=await O(a.uid);a.nameCn=e?.nameCn||"",a.nameEn=e?.nameEn||"",a.portrait=e?.portrait||""}return a[M.value+"Content"]||a[M.value+"SpeechTime"]||(a.first=!0),a}),await Promise.all(e.content).then(a=>{e.content=a})}else{const t=n.contentList.find(e=>(e.numberId||0)==a)||{};e={...e,...t}}return e}),await Promise.all(n.content).then(e=>{n.content=e}),a={...a,content:n.content},D.value.push(a),D.value=D.value.toSorted((e,a)=>e.number-a.number),t==e.length-1&&(setTimeout(()=>{z.$Loadimg.hideLoading()},1e3),(0,l.dY)(()=>{u("ready")}))})}async function Q(e){const a={meetingId:r.query.meeting,id:e},t=await z.$http.schedule.SubsectionGetListDetail(a);return 1===t.data.status||200===t.data.status?t.data.list:(console.log("获取详情数据失败"),{})}async function O(e){const a={id:e,meetingId:r.query.meeting,type_vue:1},t=await z.$http.schedule.GetexpertId(a);if(1===t.data.status||200===t.data.status)return t.data.list;console.log("获取嘉宾对应数据失败")}function q(e,a){W.lang=e,W.UpLang="cn"===e?"Cn":"En",i(a)}return(0,l.sV)(async()=>{await J()}),a({init:q,ScheduleRef:B}),(e,a)=>((0,l.uX)(),(0,l.CE)("div",{class:"ScheduleSection",ref_key:"ScheduleRef",ref:B},[(0,l.Lk)("div",p,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,n.R1)(D),e=>((0,l.uX)(),(0,l.CE)(l.FK,{key:e.id},[e.status?((0,l.uX)(),(0,l.CE)("div",g,[((0,l.uX)(),(0,l.CE)("div",{key:e.id,"data-group":""},[(0,l.Lk)("header",h,[(0,l.Lk)("p",f,(0,s.v_)(e[(0,n.R1)(M)+"Name"]),1)]),(0,l.Lk)("section",v,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.content,e=>((0,l.uX)(),(0,l.CE)(l.FK,{key:e.id},[1==e.type&&1==e.status&&0==e.invalid?((0,l.uX)(),(0,l.CE)("div",{key:0,"data-item":"",class:"RichText",innerHTML:e[(0,n.R1)(M)+"Content"]},null,8,y)):2==e.type&&1==e.status&&0==e.invalid?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[Array.isArray(e.content)?((0,l.uX)(),(0,l.CE)("div",k,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.content,e=>((0,l.uX)(),(0,l.CE)(l.FK,{key:e.id},[e.status&&0==e.invalid?((0,l.uX)(),(0,l.CE)("div",b,[(0,l.Lk)("div",{class:(0,s.C4)(["title",{FirstTitle:!e.first}])},(0,s.v_)(e[(0,n.R1)(M)+"Title"]),3),(0,l.Lk)("div",{class:(0,s.C4)(["main",{FirstMain:!e.first}])},[(0,l.Lk)("div",{class:(0,s.C4)(["left",{DistinguishedGuest:!e.first}])},[e.first?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.Lk)("div",w,["0 0"!==e["name"+(0,n.R1)(K)]?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)((0,s.v_)(e["name"+(0,n.R1)(K)]),1)],64)):(0,l.Q3)("",!0)]),e[(0,n.R1)(M)+"Jobs"]?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"Jobs",innerHTML:`<p>${e[(0,n.R1)(M)+"Jobs"]}</p>`},null,8,C)):((0,l.uX)(),(0,l.CE)("div",L))],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[e[(0,n.R1)(M)+"SpeechTime"]?((0,l.uX)(),(0,l.CE)("p",{key:0,class:"SpeechTime",innerHTML:`<p>${e[(0,n.R1)(M)+"SpeechTime"]}</p>`},null,8,x)):((0,l.uX)(),(0,l.CE)("p",_)),e[(0,n.R1)(M)+"Content"]?((0,l.uX)(),(0,l.CE)("p",{key:2,class:"Content",innerHTML:`<p>${e[(0,n.R1)(M)+"Content"]}</p>`},null,8,F)):((0,l.uX)(),(0,l.CE)("p",R)),(0,l.Lk)("div",$,["0 0"!==e["name"+(0,n.R1)(K)]?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)((0,s.v_)(e["name"+(0,n.R1)(K)]),1)],64)):(0,l.Q3)("",!0)])],64))],2),(0,l.Lk)("div",V,[e.portrait?((0,l.uX)(),(0,l.CE)("div",N,[(0,l.Lk)("img",{width:"108",height:"108",src:(0,n.R1)(o).state.origin+"/data/public/upload/image/"+e.portrait,alt:"",style:(0,s.Tr)({opacity:e.portrait?"1":"0"})},null,12,I)])):(0,l.Q3)("",!0)])],2),e.first?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",E,[e[(0,n.R1)(M)+"Jobs"]?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"Jobs",innerHTML:`<p>${e[(0,n.R1)(M)+"Jobs"]}</p>`},null,8,X)):((0,l.uX)(),(0,l.CE)("div",S))]))])):(0,l.Q3)("",!0)],64))),128))])):(0,l.Q3)("",!0)],64)):(0,l.Q3)("",!0)],64))),128))])]))])):(0,l.Q3)("",!0)],64))),128))])],512))}};const W=(0,r.A)(z,[["__scopeId","data-v-15dacf1b"]]);var T=W,U=(t(78365),t(48548));const D={style:{"text-align":"right"}};var M={__name:"indexVue",setup(e,{expose:a}){const t=(0,c.lq)(),i=(0,n.Kh)({dialogVisibleXZ:!1,centerss:!0,downbtn:!0,leftk:"(",rightk:")",goUrltime:10,urlstatus:0,Urls:"",timerxz:null}),{dialogVisibleXZ:o,centerss:d,downbtn:u,leftk:r,rightk:m,goUrltime:p,urlstatus:g,Urls:h,timerxz:f}=(0,n.QW)(i);function v(){console.log(window.location.origin+"/"+i.Urls),console.log(i.Urls),window.location.href=("localhost"===window.location.hostname?"http://php7.yiyum.com":window.location.origin)+"/"+i.Urls,i.dialogVisibleXZ=!1,i.timerxz&&clearInterval(i.timerxz),i.goUrltime=5}function y(){i.timerxz&&clearInterval(i.timerxz),i.goUrltime=5,window.location.href=`${"localhost"===window.location.hostname?"http://php7.yiyum.com":window.location.origin}/vam3/#/dlowncenter?meeting=${t.query.meeting}&version=109`,i.dialogVisibleXZ=!1}function k(){i.leftk="(",i.rightk=")",i.goUrltime=5,i.downbtn=!1,i.dialogVisibleXZ=!0,i.timerxz=setInterval(()=>{i.goUrltime>0?(i.goUrltime--,i.urlstatus&&(i.downbtn=!0)):(i.goUrltime="",i.leftk="",i.rightk="")},1e3)}function b(){i.dialogVisibleXZ=!1,i.timerxz&&clearInterval(i.timerxz),i.goUrltime=5}return a({dialogVisibleXZ:o,centerss:d,downbtn:u,leftk:r,rightk:m,goUrltime:p,urlstatus:g,Urls:h,timerxz:f,init:k,Downbtn:v,Qdtz:y}),(e,a)=>{const t=(0,l.g2)("el-button"),i=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(i,{top:"35vh",title:"提示",modelValue:(0,n.R1)(o),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.i9)(o)?o.value=e:null),width:"20%",center:(0,n.R1)(d)},{default:(0,l.k6)(()=>[a[4]||(a[4]=(0,l.Lk)("span",null,"您导出的内容正在生成,您稍后可点击右上角下载中心查看!",-1)),a[5]||(a[5]=(0,l.Lk)("br",null,null,-1)),a[6]||(a[6]=(0,l.Lk)("br",null,null,-1)),(0,l.Lk)("div",D,[(0,l.bF)(t,{onClick:b,size:"small"},{default:(0,l.k6)(()=>[...a[1]||(a[1]=[(0,l.eW)("取 消 ",-1)])]),_:1}),a[3]||(a[3]=(0,l.eW)("  ",-1)),(0,n.R1)(u)?((0,l.uX)(),(0,l.Wv)(t,{key:0,type:"primary",size:"small",onClick:v},{default:(0,l.k6)(()=>[...a[2]||(a[2]=[(0,l.eW)("下载 ",-1)])]),_:1})):((0,l.uX)(),(0,l.Wv)(t,{key:1,type:"primary",size:"small",onClick:y},{default:(0,l.k6)(()=>[(0,l.eW)("前往下载中心"+(0,s.v_)((0,n.R1)(r))+(0,s.v_)((0,n.R1)(p))+(0,s.v_)((0,n.R1)(m)),1)]),_:1}))])]),_:1},8,["modelValue","center"])}}};const K=M;var B=K;const J={class:"schedule_view"},Q={class:"operate"},O={class:"left"},q={class:"right"},G={class:"table"},A={key:0,style:{display:"flex","align-items":"center","justify-content":"center"}},P={class:"cellSort"},H=["onClick"],j=["onClick"],Z={style:{"min-height":"300px"}},Y={class:"left"},ee={class:"top"},ae={class:"nodeClass"},te={class:"input"},le={class:"btn"},ne={style:{transform:"rotate(180deg)"},t:"1727166707525",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3452","data-spm-anchor-id":"a313x.search_index.0.i2.14543a81RR7zm2",width:"12",height:"12"},se={class:"list"},ie=["onClick"],oe={key:0},de={key:1,class:"left"},ue={class:"btn"},re={class:"list"},ce=["onClick"],me={key:0,class:"left"},pe={style:{"min-width":"180px"}},ge={style:{"min-width":"180px"}},he={key:1,class:"left"},fe={class:"btn"},ve={key:0},ye={class:"btn"},ke={style:{"margin-left":"5px"},t:"1727247980879",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4267",width:"12",height:"12"};var be={__name:"index",setup(e){const[a,t,{proxy:d}]=[(0,c.rd)(),(0,c.lq)(),(0,l.nI)()],r=(0,n.Kh)({loading:!1}),{loading:m}=(0,n.QW)(r);function p(){a.push({path:"/add_schedule_view",query:t.query})}function g(){E.dialogClass=!0}function h(){Ne.value=!0}const f=(0,n.Kh)({ruleForm:{groupId:"",name:"",classId:"",status:""}}),{ruleForm:v}=(0,n.QW)(f);function y(){V()}function k(){v.value={groupId:"",name:"",classId:"",status:""},V()}const b=(0,n.Kh)({TableData:[],columns:[{prop:"id",label:"id"},{prop:"name",label:"中/英名称",scope:!0},{prop:"group",label:"工作组",scope:!0},{prop:"class",label:"中/英类别",scope:!0},{prop:"status",label:"状态",scope:!0}],pageInfo:{page:1,per_page:10,total:0}}),{TableData:w,columns:C,pageInfo:L}=(0,n.QW)(b);function x(e){let a={cn:"",en:""};return a=_(e,a,z.value),a}function _(e,a,t){for(const l of t){if(e===l.id)return a.cn+=l.cnClassName,a.en+=l.enClassName,a;if(l.children&&l.children.length>0){let t={cn:a.cn,en:a.en};if(t=_(e,t,l.children),t.cn!==a.cn||t.en!==a.en)return a.cn=l.cnClassName+"/"+t.cn,a.en=l.enClassName+"/"+t.en,a}}return a}function F(e,a=0,t){const l={...e,status:1==e.status?1:2,type_vue:1};a&&(l.invalid=a),d.$Loadimg.showLoading(),d.$http.schedule.SubsectionAddList(l).then(async e=>{d.$Loadimg.hideLoading(),200===e.data.status||1===e.data.status?await V("init",t||e.data.msg):d.$message({type:"error",message:e.data.msg})}).catch(e=>{console.error(e)})}function R(e){a.push({path:"/add_schedule_view",query:{...t.query,id:e.id}})}function $(e){d.$ElMessageBox.confirm("确定删除该小节数据吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{F(e,1,"删除成功")}).catch(()=>{d.$message({type:"info",message:"取消删除"})})}async function V(e,a){e||d.$Loadimg.showLoading();const l={type_vue:1,name:"",status:"",groupId:"",classId:"",...v.value,meetingId:t.query.meeting};d.$http.schedule.SubsectionSubsectionList(l).then(t=>{d.$Loadimg.hideLoading(),200===t.data.status||1===t.data.status?(w.value=t.data.list.toSorted((e,a)=>e.number-a.number)||[],e||d.$message({type:"success",message:a||t.data.msg}),a&&d.$message({type:"success",message:a||t.data.msg})):d.$message({type:"error",message:t.data.msg})}).catch(e=>{console.error(e)})}function N(e,a){const l=w.value.findIndex(e=>e.id===a),n=w.value.length-1;let s=0;if("up"===e){const e=w.value.findLastIndex((e,a)=>0===e.invalid&&a<l);s=-1!==e?e:0}else if("down"===e){const e=w.value.findIndex((e,a)=>0===e.invalid&&a>l);s=-1!==e?e:n-1}JSON.parse(JSON.stringify(w.value));const i=JSON.parse(JSON.stringify(w.value[l])),o=JSON.parse(JSON.stringify(w.value[s]));i.number=w.value[s].number,o.number=w.value[l].number,document.startViewTransition?document.startViewTransition(()=>{w.value=w.value.map((e,a)=>(a===l&&(e=o),a===s&&(e=i),e))}):w.value=w.value.map((e,a)=>(a===l&&(e=o),a===s&&(e=i),e));const u={type_vue:1,meetingId:t.query.meeting,list:[i,o]};d.$Loadimg.showLoading(),d.$http.schedule.SaveListNumber(u).then(async e=>{200===e.data.status||1===e.data.status?await V("init",e.data.msg):d.$message({type:"error",message:e.data.msg})}).catch(e=>{console.error(e)})}function I({rowIndex:e}){return"--i:"+e}(0,l.wB)(()=>L.value,(e,a)=>{e.page===a.page&&e.per_page===a.per_page||V()});const E=(0,n.Kh)({defaultClass:[],dialogClass:!1,dialogClassData:[],treeRef:null}),X={children:"children",label:"cnClassName",value:"id"},{dialogClass:S,dialogClassData:z,treeRef:W,defaultClass:D}=(0,n.QW)(E);function M(){be()}function K(e){Ce(e.pid,e,e.id)}async function be(e,a){const l={meetingId:t.query.meeting,type_vue:1,name:""};e||d.$Loadimg.showLoading(),d.$http.schedule.SubsectionClassList(l).then(t=>{e||d.$Loadimg.hideLoading(),200===t.data.status||1===t.data.status?(e||d.$message({type:"success",message:t.data.msg}),a&&d.$message({type:"success",message:a||t.data.msg}),z.value=we(t.data.ClassList)||[]):d.$message({type:"error",message:t.data.msg})}).catch(e=>{console.error(e)})}function we(e){return e.map(e=>{e.children&&e.children.length>0&&(we(e.children),e.children=e.children.toSorted((e,a)=>e.number-a.number))}),e.toSorted((e,a)=>e.number-a.number)}function Ce(e=0,a,l,n){const s={pid:e,meetingId:t.query.meeting,cnClassName:"",enClassName:"",number:"",type_vue:1};l&&(s.id=l,s.cnClassName=a.cnClassName,s.enClassName=a.enClassName,n&&(s.invalid=n)),d.$Loadimg.showLoading(),d.$http.schedule.SubsectionAddClassList(s).then(e=>{d.$Loadimg.hideLoading(),200===e.data.status||1===e.data.status?(d.$message({type:"success",message:e.data.msg}),be("init")):d.$message({type:"error",message:e.data.msg})})}function Le(e,a,t){let l="此操作将永久删除该类别, 是否继续?";t.children&&(l="子类将被一起删除是否确认?"),d.$ElMessageBox.confirm(l,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Ce(t.pid,t,e,1)}).catch(()=>{d.$message({type:"warning",message:"取消删除!"})})}const xe=e=>{let a=!1;return e?.parent?.childNodes&&e?.parent?.childNodes.length>1&&(a=!0),a},_e=(e,a={})=>{let t=!1,l=[];l=0!==a?.data.pid?a?.parent.data.children:a?.parent.data;const n=l.findIndex(e=>e.id===a.data.id);return(0===n&&"up"===e||n===l.length-1&&"down"===e)&&(t=!0),t};function Fe(e,a,t,l){let n=[];return e.map(s=>{l&&s.id===l&&(s.children=t),s.id===a?n=e:0===n.length&&s.children&&s.children?.length>0&&(n=Fe(s.children,a))}),n}function Re(e,a,l,n){let s=Fe(z.value,a);const i=JSON.parse(JSON.stringify(s)),o=s.findIndex(e=>e.id===a),u=s.length-1;let r=0;if("up"===e){const e=s.findLastIndex((e,a)=>0===e.invalid&&a<o);r=-1!==e?e:0}else if("down"===e){const e=s.findIndex((e,a)=>0===e.invalid&&a>o);r=-1!==e?e:u-1}const c=JSON.parse(JSON.stringify(s[o])),m=JSON.parse(JSON.stringify(s[r]));c.number=i[r].number,m.number=i[o].number;const p={type_vue:1,meetingId:t.query.meeting,list:[c,m]};d.$Loadimg.showLoading(),d.$http.schedule.SaveClassNumber(p).then(async e=>{200===e.data.status||1===e.data.status?(d.$Loadimg.hideLoading(),await be("init",e.data.msg)):d.$message({type:"error",message:e.data.msg})}).catch(e=>{console.error(e)})}const $e=(0,n.Kh)({GroupData:[],GroupDialog:!1,GroupName:"",GroupNameStatus:1,groupIndex:""}),{GroupData:Ve,GroupDialog:Ne,GroupName:Ie,GroupNameStatus:Ee,groupIndex:Xe}=(0,n.QW)($e);function Se(){Ie.value="",ze()}async function ze(e){const a={meetingId:t.query.meeting,type_vue:1,name:""};e||d.$Loadimg.showLoading(),d.$http.schedule.SubsectionGetGroupingList(a).then(a=>{e||d.$Loadimg.hideLoading(),200===a.data.status||1===a.data.status?(e||d.$message({type:"success",message:a.data.msg}),Ve.value=a.data.GetGroupingList||[]):d.$message({type:"error",message:a.data.msg})}).catch(e=>{console.error(e)})}function We(e,a,l,n){if(""===Ie.value&&!e)return void d.$message({type:"warning",message:"工作组名称不能为空"});const s={meetingId:t.query.meeting,name:Ie.value,status:Ee.value,type_vue:1};e&&(s.id=e,s.name=a,s.status=l,n&&(s.invalid=n)),d.$Loadimg.showLoading(),d.$http.schedule.SubsectionAddGroupingList(s).then(e=>{d.$Loadimg.hideLoading(),200===e.data.status||1===e.data.status?(d.$message({type:"success",message:e.data.msg}),ze("init"),Ie.value=""):d.$message({type:"error",message:e.data.msg})}).catch(e=>{console.error(e)})}function Te(e,a){""!==a.name?(We(a.id,a.name,a.status),a.edit=!1):d.$message({type:"warning",message:"工作组名称不能为空"})}function Ue(e,a){d.$ElMessageBox.confirm("此操作将删除工作组, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{We(a.id,a.name,a.status,1)}).catch(()=>{d.$message({type:"info",message:"已取消删除"})})}const De=(0,n.Kh)({initTaskData:[],TaskData:[],TaskDialog:!1,TaskForm:{cnName:"",enName:""},taskIndex:0}),{initTaskData:Me,TaskData:Ke,TaskDialog:Be,TaskForm:Je,taskIndex:Qe}=(0,n.QW)(De);function Oe(){He(),Be.value=!0}function qe(){Je.value={cnName:"",enName:""},He("init")}function Ge(){""!==Je.value.cnName||""!==Je.value.enName?(Ke.value.push({...Je.value}),Je.value={cnName:"",enName:""},Ae()):d.$message({type:"warning",message:"任务名称不能为空"})}function Ae(e){if(e&&(""===e["cnName"]||""===e["enName"]))return void d.$message({type:"warning",message:"任务名称不能为空"});const a={},l={};let n=!0;if(Ke.value.map(e=>{a[e["cnName"]]?a[e["cnName"]]+=1:a[e["cnName"]]=1,l[e["enName"]]?l[e["enName"]]+=1:l[e["enName"]]=1}),Object.values(a).map(e=>{if(e>1)return d.$message({type:"warning",message:"中文任务重复，请检查"}),void(n=!1)}),Object.values(l).map(e=>{if(e>1)return d.$message({type:"warning",message:"英文任务重复，请检查"}),void(n=!1)}),!n)return;Ke.value=Ke.value.map(e=>(e.edit=!1,e));const s={meetingId:t.query.meeting,list:JSON.stringify(Ke.value),type_vue:1};d.$Loadimg.showLoading(),d.$http.schedule.TaskAdd(s).then(e=>{d.$Loadimg.hideLoading(),200===e.data.status||1===e.data.status?(d.$message({type:"success",message:e.data.msg}),He("init")):d.$message({type:"error",message:e.data.msg})}).catch(e=>{console.error(e)})}function Pe(e,a){d.$ElMessageBox.confirm("此操作将删除任务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Ke.value.splice(e,1),Ae()}).catch(()=>{d.$message({type:"info",message:"已取消删除"})})}async function He(e){const a={meetingId:t.query.meeting,name:"",type_vue:1};e||d.$Loadimg.showLoading(),d.$http.schedule.GetTaskList(a).then(a=>{e||d.$Loadimg.hideLoading(),Ke.value=JSON.parse(a.data.list)||[],Me.value=JSON.parse(a.data.list)||[]}).catch(e=>{console.error(e)})}const je=(0,n.Kh)({ExportDialog:!1,ScheduleRef:null,sid:"",lang:"cn"}),{ExportDialog:Ze,ScheduleRef:Ye}=(0,n.QW)(je);function ea(e,a){Ze.value=!0,je.sid=e,je.lang="pccn"===a?"cn":"en",(0,l.dY)(()=>{Ye?.value.init(je.lang,e)})}async function aa(){}async function ta(){const e=Ye?.value.ScheduleRef,a=e.querySelector(".content");let t=1;const l=20,n=Math.ceil(a.children.length/l);d.$Loadimg.showLoading({text:"导出中，数据较多，请耐心等待"}),m.value=!0;const s=[];setTimeout(async()=>{while(t<=n){console.log((t-1)*l,t*l,"(page - 1) * length, page * length");const e=await la({children:[...a.children].slice((t-1)*l,t*l)},{name:n+"-"+t});console.log(e,"pdf"),s.push({page:t,pdf:e}),t++,t>n&&(d.$Loadimg.hideLoading(),m.value=!1)}})}async function la(e,{name:a}){var t=210,l=297,n=Math.floor(2400*l/t/2);const s={};function i(e,a,t){a&&(s[t]?e>0&&s[t].content.push(e):s[t]={arr:[],content:[e],height:a})}function r(e,a,t){[...e.children].map((e,l)=>{const{["item"]:n,["group"]:s,["wrap"]:o}=e.dataset;if(null!=s)r(e,a,t);else if(null!=n){const{offsetHeight:n}=e;let s=Math.floor(n+7);null!=o&&(l+1)%2==0&&(s=0),i(s,Math.ceil(a),t)}})}const c=new o.Ay("p","mm","a4");var m=[...e.children];const p=m.map((e,a)=>{const{offsetHeight:t}=e;return t>n&&r(e,t,a),u()(e,{allowTaint:!1,taintTest:!1,logging:!1,useCORS:!0,dpi:1*window.devicePixelRatio,scale:2,backgroundColor:"rgb(238, 238, 238)"})});for(const o in s)if(Object.prototype.hasOwnProperty.call(s,o)){const e=s[o];e.content.reduce((a,t)=>(a+=t,a>n&&(e.arr.push(Math.ceil(a-t-8)),a=t),a),0);const a=e.arr.reduce((e,a)=>e+a,0),t=e.height-a;e.arr.push(t),e.arr=e.arr.map(e=>2*e)}console.log(s,"cutOff"),await Promise.all(p).then(e=>{e.forEach(async(e,a)=>{a>0&&c.addPage(),await na(c,e,s[a])}),c.save(a+".pdf"),d.$message.success("导出成功!")}).catch(e=>{console.error("Error generating PDF:",e)});const g=await c.output("arraybuffer");return g}async function na(e,a,t){e.setFillColor(238,238,238);var l=a.getContext("2d"),n=210,s=297,i=Math.floor(s*a.width/n),o=0;let d=0;if(t)while(o<a.height){if(d>=t.arr.length)break;var u=document.createElement("canvas");u.width=a.width,u.height=Math.min(i,t.arr[d]),u.getContext("2d").putImageData(l.getImageData(0,o,a.width,Math.min(i,t.arr[d])),0,0),e.addImage(u.toDataURL("image/jpeg",1),"JPEG",0,0,n,Math.min(s,n*u.height/u.width)),o+=t.arr[d],o<a.height&&o<a.height-2&&e.addPage(),d++}else while(o<a.height){u=document.createElement("canvas");u.width=a.width,u.height=Math.min(i,a.height-o),u.getContext("2d").putImageData(l.getImageData(0,o,a.width,Math.min(i,a.height-o)),0,0),e.addImage(u.toDataURL("image/jpeg",1),"JPEG",0,0,n,Math.min(s,n*u.height/u.width)),o+=i,o<a.height&&e.addPage()}}window.ExportTable=ea;const sa=(0,n.KR)(null);function ia(){const e={meetingId:t.query.meeting,type_vue:1};d.$http.schedule.SubsectionSubexceldao(e).then(e=>{1!==e.data.status&&200!==e.data.status||(sa.value.urlstatus=1,sa.value.Urls=e.data.url)}).catch(e=>{}),sa.value.init()}return(0,l.sV)(async()=>{d.$Loadimg.showLoading(),await be("init"),await ze("init"),await He("init"),await V("init")}),(e,a)=>{const t=(0,l.g2)("el-option"),o=(0,l.g2)("el-select"),d=(0,l.g2)("el-form-item"),u=(0,l.g2)("el-input"),r=(0,l.g2)("el-text"),c=(0,l.g2)("el-tooltip"),f=(0,l.g2)("el-tree-select"),b=(0,l.g2)("el-button"),L=(0,l.g2)("el-form"),_=(0,l.g2)("el-switch"),V=(0,l.g2)("el-table-column"),E=(0,l.g2)("el-table"),D=(0,l.g2)("el-tree"),be=(0,l.g2)("el-dialog"),we=(0,l.g2)("EditPen"),Fe=(0,l.g2)("el-icon");return(0,l.uX)(),(0,l.CE)("div",J,[(0,l.Lk)("div",Q,[(0,l.Lk)("div",O,[(0,l.bF)(L,{model:(0,n.R1)(v),inline:!0},{default:(0,l.k6)(()=>[(0,l.bF)(d,{label:"工作组："},{default:(0,l.k6)(()=>[(0,l.bF)(o,{class:"default-select",size:"small",modelValue:(0,n.R1)(v).groupId,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,n.R1)(v).groupId=e),placeholder:"请选择工作组"},{default:(0,l.k6)(()=>[(0,l.bF)(t,{label:"全部",value:""}),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,n.R1)(Ve),e=>((0,l.uX)(),(0,l.Wv)(t,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,l.bF)(d,{label:"小节名称："},{default:(0,l.k6)(()=>[(0,l.bF)(u,{modelValue:(0,n.R1)(v).name,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,n.R1)(v).name=e),placeholder:"请输入小节名称"},null,8,["modelValue"])]),_:1}),(0,l.bF)(d,{label:"类别："},{default:(0,l.k6)(()=>[(0,l.bF)(f,{modelValue:(0,n.R1)(v).classId,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,n.R1)(v).classId=e),data:[{id:"",cnClassName:"全部",enClassName:"All"},...(0,n.R1)(z)],props:X,"render-after-expand":!1,style:{width:"260px","min-height":"28px"}},{default:(0,l.k6)(({data:{cnClassName:e,enClassName:a}})=>[(0,l.bF)(c,{class:"box-item",effect:"dark",content:`中文（${e}） / 英文（${a}）`,placement:"top-start"},{default:(0,l.k6)(()=>[(0,l.bF)(r,null,{default:(0,l.k6)(()=>[(0,l.eW)(" 中文（"+(0,s.v_)(e)+"） / 英文（"+(0,s.v_)(a)+"） ",1)]),_:2},1024)]),_:2},1032,["content"])]),_:1},8,["modelValue","data"])]),_:1}),(0,l.bF)(d,{label:"状态：",style:{"margin-right":"12px"}},{default:(0,l.k6)(()=>[(0,l.bF)(o,{class:"default-select",size:"small",modelValue:(0,n.R1)(v).status,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,n.R1)(v).status=e),placeholder:"请选择状态"},{default:(0,l.k6)(()=>[(0,l.bF)(t,{label:"全部",value:""}),(0,l.bF)(t,{label:"启用",value:"1"}),(0,l.bF)(t,{label:"禁用",value:"2"})]),_:1},8,["modelValue"])]),_:1}),(0,l.bF)(d,null,{default:(0,l.k6)(()=>[(0,l.bF)(b,{type:"primary",size:"small",onClick:y},{default:(0,l.k6)(()=>[...a[15]||(a[15]=[(0,l.eW)("搜索",-1)])]),_:1}),(0,l.bF)(b,{type:"default",size:"small",onClick:k},{default:(0,l.k6)(()=>[...a[16]||(a[16]=[(0,l.eW)("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),(0,l.Lk)("div",q,[(0,l.bF)(b,{type:"primary",size:"small",onClick:g},{default:(0,l.k6)(()=>[...a[17]||(a[17]=[(0,l.eW)("管理类别",-1)])]),_:1}),(0,l.bF)(b,{type:"primary",size:"small",onClick:p},{default:(0,l.k6)(()=>[...a[18]||(a[18]=[(0,l.eW)("新增小节",-1)])]),_:1}),(0,l.bF)(b,{type:"primary",size:"small",onClick:h},{default:(0,l.k6)(()=>[...a[19]||(a[19]=[(0,l.eW)(" 工作组",-1)])]),_:1}),(0,l.bF)(b,{type:"primary",size:"small",onClick:Oe},{default:(0,l.k6)(()=>[...a[20]||(a[20]=[(0,l.eW)("管理任务类型",-1)])]),_:1}),(0,l.bF)(b,{type:"primary",size:"small",onClick:ia},{default:(0,l.k6)(()=>[...a[21]||(a[21]=[(0,l.eW)("导出Excel",-1)])]),_:1})])]),(0,l.Lk)("div",G,[a[27]||(a[27]=(0,l.Lk)("div",{class:"title"},[(0,l.Lk)("h2",null,"小节列表")],-1)),(0,n.R1)(w).length>0?((0,l.uX)(),(0,l.Wv)(i.F,{key:0},{default:(0,l.k6)(()=>[((0,l.uX)(),(0,l.Wv)(E,{key:(0,n.R1)(w).length,"row-style":I,data:(0,n.R1)(w),"row-key":"number"},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,n.R1)(C),e=>((0,l.uX)(),(0,l.Wv)(V,{prop:e.prop,key:e.label,label:e.label},(0,l.eX)({_:2},[e.scope?{name:"default",fn:(0,l.k6)(t=>["class"===e.prop?((0,l.uX)(),(0,l.CE)("div",A,[(0,l.bF)(c,{class:"box-item",effect:"dark",content:x(t.row.classId).cn,placement:"top-start"},{default:(0,l.k6)(()=>[(0,l.bF)(r,{style:{cursor:"pointer",width:"70px",display:"inline-block","max-width":"100%","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"}},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(x(t.row.classId).cn),1)]),_:2},1024)]),_:2},1032,["content"]),(0,l.bF)(r,{style:{display:"inline-flex","align-items":"center"}},{default:(0,l.k6)(()=>[...a[22]||(a[22]=[(0,l.eW)("-",-1)])]),_:1}),(0,l.bF)(c,{class:"box-item",effect:"dark",content:x(t.row.classId).en,placement:"top-start"},{default:(0,l.k6)(()=>[(0,l.bF)(r,{style:{cursor:"pointer",width:"70px",display:"inline-block","max-width":"100%","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"}},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(x(t.row.classId).en),1)]),_:2},1024)]),_:2},1032,["content"])])):"status"===e.prop?((0,l.uX)(),(0,l.Wv)(_,{key:1,modelValue:t.row.status,"onUpdate:modelValue":e=>t.row.status=e,"active-value":1,"inactive-value":2,onChange:e=>F(t.row,0),"inline-prompt":"","active-text":"开启","inactive-text":"关闭"},null,8,["modelValue","onUpdate:modelValue","onChange"])):"group"===e.prop?((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[(0,l.eW)((0,s.v_)((0,n.R1)(Ve).find(e=>e.id==t.row.groupId)?.name),1)],64)):"name"===e.prop?((0,l.uX)(),(0,l.CE)(l.FK,{key:3},[(0,l.eW)((0,s.v_)(t.row.cnName)+" / "+(0,s.v_)(t.row.enName),1)],64)):(0,l.Q3)("",!0)]),key:"0"}:void 0]),1032,["prop","label"]))),128)),(0,l.bF)(V,{label:"移动",width:"90"},{default:(0,l.k6)(e=>[(0,l.Lk)("div",P,[((0,l.uX)(),(0,l.CE)("svg",{onClick:a=>N("up",e.row.id),t:"1726626103685",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"15405",width:"30",height:"30"},[...a[23]||(a[23]=[(0,l.Lk)("path",{d:"M512 85.312A426.88 426.88 0 0 0 85.44 512a426.88 426.88 0 0 0 426.688 426.688A426.816 426.816 0 0 0 938.688 512a426.816 426.816 0 0 0-426.624-426.688z m150.656 427.968a31.68 31.68 0 0 1-45.248 0L544.064 439.936v221.44c0 17.472-14.528 32-32 32a32.256 32.256 0 0 1-32-32v-221.44L406.656 513.28a32.192 32.192 0 0 1-45.248 0 32.192 32.192 0 0 1 0-45.184l128-128a32.192 32.192 0 0 1 45.248 0l128 128a32.192 32.192 0 0 1 0 45.184z",fill:"var(--el-color-primary)","p-id":"15406"},null,-1)])],8,H)),((0,l.uX)(),(0,l.CE)("svg",{style:{transform:"rotate(180deg)"},onClick:a=>N("down",e.row.id),t:"1726626103685",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"15405",width:"30",height:"30"},[...a[24]||(a[24]=[(0,l.Lk)("path",{d:"M512 85.312A426.88 426.88 0 0 0 85.44 512a426.88 426.88 0 0 0 426.688 426.688A426.816 426.816 0 0 0 938.688 512a426.816 426.816 0 0 0-426.624-426.688z m150.656 427.968a31.68 31.68 0 0 1-45.248 0L544.064 439.936v221.44c0 17.472-14.528 32-32 32a32.256 32.256 0 0 1-32-32v-221.44L406.656 513.28a32.192 32.192 0 0 1-45.248 0 32.192 32.192 0 0 1 0-45.184l128-128a32.192 32.192 0 0 1 45.248 0l128 128a32.192 32.192 0 0 1 0 45.184z",fill:"var(--el-color-primary)","p-id":"15406"},null,-1)])],8,j))])]),_:1}),(0,l.bF)(V,{label:"操作"},{default:(0,l.k6)(e=>[(0,l.bF)(b,{type:"primary",size:"small",onClick:a=>R(e.row)},{default:(0,l.k6)(()=>[...a[25]||(a[25]=[(0,l.eW)("修改",-1)])]),_:1},8,["onClick"]),(0,l.bF)(b,{type:"info",size:"small",onClick:a=>$(e.row)},{default:(0,l.k6)(()=>[...a[26]||(a[26]=[(0,l.eW)("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]))]),_:1})):(0,l.Q3)("",!0)]),(0,l.bF)(be,{title:"管理类别",modelValue:(0,n.R1)(S),"onUpdate:modelValue":a[5]||(a[5]=e=>(0,n.i9)(S)?S.value=e:null),class:"dialogClass",width:"600px",onClosed:M},{default:(0,l.k6)(()=>[(0,l.Lk)("section",Z,[(0,l.Lk)("main",null,[(0,l.Lk)("div",Y,[(0,l.Lk)("div",ee,[a[31]||(a[31]=(0,l.Lk)("p",null,"中/英子类名称:",-1)),(0,l.Lk)("div",null,[a[28]||(a[28]=(0,l.eW)("(",-1)),(0,l.Lk)("p",null,[(0,l.bF)(b,{style:{"--el-button-hover-bg-color":"var(--el-color-info)","--el-button-hover-border-color":"var(--el-color-info)"},size:"small",type:"info",icon:(0,n.R1)(U.Plus),circle:""},null,8,["icon"])]),a[29]||(a[29]=(0,l.eW)("可添加中文/英文子类下的分类) ",-1))]),(0,l.bF)(b,{style:{"margin-left":"12px"},type:"primary",size:"small",onClick:a[4]||(a[4]=e=>Ce())},{default:(0,l.k6)(()=>[...a[30]||(a[30]=[(0,l.eW)("添加",-1)])]),_:1})]),(0,n.R1)(z).length?((0,l.uX)(),(0,l.Wv)(D,{key:0,ref_key:"treeRef",ref:W,style:{"max-width":"800px","margin-top":"20px"},class:"filter-tree",data:(0,n.R1)(z),props:X,"default-expand-all":"","node-key":"number"},{default:(0,l.k6)(({node:e,data:t})=>[(0,l.Lk)("div",ae,[(0,l.Lk)("div",te,[(0,l.bF)(u,{modelValue:t.cnClassName,"onUpdate:modelValue":e=>t.cnClassName=e,onBlur:e=>K(t),size:"small",style:{width:"240px"},placeholder:"请输入中文类别名称"},null,8,["modelValue","onUpdate:modelValue","onBlur"]),(0,l.bF)(u,{modelValue:t.enClassName,"onUpdate:modelValue":e=>t.enClassName=e,onBlur:e=>K(t),size:"small",style:{width:"240px","margin-left":"10px"},placeholder:"请输入英文类别名称"},null,8,["modelValue","onUpdate:modelValue","onBlur"]),0==t.pid?((0,l.uX)(),(0,l.Wv)(b,{key:0,size:"small",type:"primary",icon:(0,n.R1)(U.Plus),circle:"",onClick:(0,i.D$)(e=>Ce(t.id,t),["stop"])},null,8,["icon","onClick"])):(0,l.Q3)("",!0),(0,l.bF)(b,{class:"delClass",size:"small",type:"primary",icon:(0,n.R1)(U.Delete),circle:"",onClick:(0,i.D$)(a=>Le(t.id,e,t),["stop"])},null,8,["icon","onClick"])]),(0,l.Lk)("div",le,[xe(e)?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.bF)(b,{size:"small",type:_e("up",e)?"info":"primary",circle:"",onClick:(0,i.D$)(a=>Re("up",t.id,t,e),["stop"]),class:(0,s.C4)({SortBtnFlag:_e("up",e)})},{default:(0,l.k6)(()=>[...a[32]||(a[32]=[(0,l.Lk)("svg",{t:"1727166707525",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3452","data-spm-anchor-id":"a313x.search_index.0.i2.14543a81RR7zm2",width:"12",height:"12"},[(0,l.Lk)("path",{d:"M532.51664938 101.02807906L532.51664938 101.02807906 532.51664938 101.02807906c-21.70624313-8.90851969-47.53001438-4.41780469-65.06212782 13.21024313L171.24671094 413.74053969c-11.48437406 11.66281219-17.27980406 26.85507188-17.27980406 42.04445344 0 15.43497469 5.92302375 30.85843781 17.7546825 42.52125093 23.5069425 23.20090969 61.30435594 23.03014594 84.56762343-0.47679656L445.81927063 312.75844531l-1e-8 560.04141188c0 33.01793344 33.42373875 59.80777031 66.43303875 59.80777031s66.42056719-26.79079594 66.42056719-59.80777031l0-556.86404625 187.03479 179.84830312c23.37934875 23.32658437 61.23912 23.27286094 84.56474531-0.11704031 23.37838969-23.44170656 23.18843813-61.24007906-0.12759375-84.56474531L552.32625875 114.12032281c-0.06235781-0.0546825-0.12663375-0.0546825-0.17843906-0.11704031-0.06523594-0.05372344-0.06523594-0.11608125-0.11704031-0.17843906-5.57190188-5.49995063-12.03504-9.45055219-18.78214594-12.31996688C533.00495844 101.38879438 532.76032437 101.09043687 532.51664938 101.02807906L532.51664938 101.02807906z","p-id":"3453",fill:"#ffffff"})],-1)])]),_:1},8,["type","onClick","class"]),(0,l.bF)(b,{type:_e("down",e)?"info":"primary",size:"small",circle:"",onClick:(0,i.D$)(a=>Re("down",t.id,t,e),["stop"]),class:(0,s.C4)({SortBtnFlag:_e("down",e)})},{default:(0,l.k6)(()=>[((0,l.uX)(),(0,l.CE)("svg",ne,[...a[33]||(a[33]=[(0,l.Lk)("path",{d:"M532.51664938 101.02807906L532.51664938 101.02807906 532.51664938 101.02807906c-21.70624313-8.90851969-47.53001438-4.41780469-65.06212782 13.21024313L171.24671094 413.74053969c-11.48437406 11.66281219-17.27980406 26.85507188-17.27980406 42.04445344 0 15.43497469 5.92302375 30.85843781 17.7546825 42.52125093 23.5069425 23.20090969 61.30435594 23.03014594 84.56762343-0.47679656L445.81927063 312.75844531l-1e-8 560.04141188c0 33.01793344 33.42373875 59.80777031 66.43303875 59.80777031s66.42056719-26.79079594 66.42056719-59.80777031l0-556.86404625 187.03479 179.84830312c23.37934875 23.32658437 61.23912 23.27286094 84.56474531-0.11704031 23.37838969-23.44170656 23.18843813-61.24007906-0.12759375-84.56474531L552.32625875 114.12032281c-0.06235781-0.0546825-0.12663375-0.0546825-0.17843906-0.11704031-0.06523594-0.05372344-0.06523594-0.11608125-0.11704031-0.17843906-5.57190188-5.49995063-12.03504-9.45055219-18.78214594-12.31996688C533.00495844 101.38879438 532.76032437 101.09043687 532.51664938 101.02807906L532.51664938 101.02807906z","p-id":"3453",fill:"#ffffff"},null,-1)])]))]),_:1},8,["type","onClick","class"])],64)):(0,l.Q3)("",!0)])])]),_:1},8,["data"])):(0,l.Q3)("",!0)])])])]),_:1},8,["modelValue"]),(0,l.bF)(be,{title:"工作组",modelValue:(0,n.R1)(Ne),"onUpdate:modelValue":a[9]||(a[9]=e=>(0,n.i9)(Ne)?Ne.value=e:null),class:"dialogGroup",width:"800px",onClosed:Se},{default:(0,l.k6)(()=>[(0,l.Lk)("section",null,[(0,l.bF)(d,null,{default:(0,l.k6)(()=>[(0,l.bF)(u,{style:{width:"180px","margin-right":"12px"},modelValue:(0,n.R1)(Ie),"onUpdate:modelValue":a[6]||(a[6]=e=>(0,n.i9)(Ie)?Ie.value=e:null),placeholder:"新增工作组名称",onInput:a[7]||(a[7]=()=>{(0,n.R1)(Ie).length>30&&(e.$message({type:"warning",message:"最多输入30个字符"}),Ie.value=(0,n.R1)(Ie).slice(0,30))})},null,8,["modelValue"]),(0,l.bF)(b,{type:"primary",size:"small",onClick:a[8]||(a[8]=e=>We())},{default:(0,l.k6)(()=>[...a[34]||(a[34]=[(0,l.eW)("新增",-1)])]),_:1})]),_:1}),(0,l.Lk)("div",se,[(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,n.R1)(Ve),(t,i)=>((0,l.uX)(),(0,l.CE)("li",{key:t.id,class:(0,s.C4)((0,n.R1)(Xe)===i&&t.edit?"onNewActive":""),onClick:()=>{(0,n.R1)(Xe)===i&&(Xe.value=-1),Xe.value=i}},[t.edit?((0,l.uX)(),(0,l.CE)("div",de,[(0,l.bF)(u,{modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,placeholder:"",style:{width:"180px"},onInput:()=>{t.name.length>30&&(e.$message({type:"warning",message:"最多输入30个字符"}),t.name=t.name.slice(0,30))}},null,8,["modelValue","onUpdate:modelValue","onInput"]),(0,l.bF)(b,{type:"primary",size:"small",onClick:e=>Te(i,t)},{default:(0,l.k6)(()=>[...a[35]||(a[35]=[(0,l.eW)("保存",-1)])]),_:1},8,["onClick"]),(0,l.bF)(b,{type:"default",size:"small",onClick:e=>t.edit=!1},{default:(0,l.k6)(()=>[...a[36]||(a[36]=[(0,l.eW)("取消",-1)])]),_:1},8,["onClick"])])):((0,l.uX)(),(0,l.CE)("p",oe,(0,s.v_)(t.name),1)),(0,l.Lk)("div",ue,[(0,l.bF)(Fe,{style:{"margin-right":"20px"},onClick:e=>t.edit=!0},{default:(0,l.k6)(()=>[(0,l.bF)(we)]),_:1},8,["onClick"]),(0,l.bF)(Fe,{onClick:e=>Ue(i,t)},{default:(0,l.k6)(()=>[(0,l.bF)((0,n.R1)(U.Delete))]),_:1},8,["onClick"])])],10,ie))),128))])])])]),_:1},8,["modelValue"]),(0,l.bF)(be,{title:"管理任务类别",modelValue:(0,n.R1)(Be),"onUpdate:modelValue":a[13]||(a[13]=e=>(0,n.i9)(Be)?Be.value=e:null),class:"dialogGroup",width:"800px",onClosed:qe},{default:(0,l.k6)(()=>[(0,l.Lk)("section",null,[(0,l.bF)(d,null,{default:(0,l.k6)(()=>[(0,l.bF)(u,{style:{width:"180px","margin-right":"12px"},modelValue:(0,n.R1)(Je).cnName,"onUpdate:modelValue":a[10]||(a[10]=e=>(0,n.R1)(Je).cnName=e),placeholder:"请输入中文任务"},null,8,["modelValue"]),(0,l.bF)(u,{style:{width:"180px","margin-right":"12px"},modelValue:(0,n.R1)(Je).enName,"onUpdate:modelValue":a[11]||(a[11]=e=>(0,n.R1)(Je).enName=e),placeholder:"请输入英文任务"},null,8,["modelValue"]),(0,l.bF)(b,{type:"primary",size:"small",onClick:a[12]||(a[12]=e=>Ge())},{default:(0,l.k6)(()=>[...a[37]||(a[37]=[(0,l.eW)("新增",-1)])]),_:1})]),_:1}),(0,l.Lk)("div",re,[(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,n.R1)(Ke),(e,t)=>((0,l.uX)(),(0,l.CE)("li",{key:e.id,class:(0,s.C4)((0,n.R1)(Qe)===t&&e.edit?"onNewActive":""),onClick:()=>{(0,n.R1)(Qe)===t&&(Qe.value=-1),Qe.value=t}},[e.edit?((0,l.uX)(),(0,l.CE)("div",he,[(0,l.bF)(u,{modelValue:e.cnName,"onUpdate:modelValue":a=>e.cnName=a,placeholder:"",style:{width:"180px","margin-right":"12px"}},null,8,["modelValue","onUpdate:modelValue"]),(0,l.bF)(u,{modelValue:e.enName,"onUpdate:modelValue":a=>e.enName=a,placeholder:"",style:{width:"180px","margin-right":"12px"}},null,8,["modelValue","onUpdate:modelValue"]),(0,l.bF)(b,{type:"primary",size:"small",onClick:a=>Ae(e)},{default:(0,l.k6)(()=>[...a[38]||(a[38]=[(0,l.eW)("保存",-1)])]),_:1},8,["onClick"]),(0,l.bF)(b,{type:"default",size:"small",onClick:()=>{e.edit=!1,e.cnName=(0,n.R1)(Me)[t].cnName,e.enName=(0,n.R1)(Me)[t].enName}},{default:(0,l.k6)(()=>[...a[39]||(a[39]=[(0,l.eW)("取消",-1)])]),_:1},8,["onClick"])])):((0,l.uX)(),(0,l.CE)("div",me,[(0,l.Lk)("p",pe,(0,s.v_)(e.cnName),1),(0,l.Lk)("p",ge,(0,s.v_)(e.enName),1)])),(0,l.Lk)("div",fe,[(0,l.bF)(Fe,{style:{"margin-right":"20px"},onClick:a=>e.edit=!0},{default:(0,l.k6)(()=>[(0,l.bF)(we)]),_:1},8,["onClick"]),(0,l.bF)(Fe,{onClick:a=>Pe(t,e)},{default:(0,l.k6)(()=>[(0,l.bF)((0,n.R1)(U.Delete))]),_:1},8,["onClick"])])],10,ce))),128))])])])]),_:1},8,["modelValue"]),(0,l.bF)(be,{title:"导出简易日程",modelValue:(0,n.R1)(Ze),"onUpdate:modelValue":a[14]||(a[14]=e=>(0,n.i9)(Ze)?Ze.value=e:null),width:"1240",class:"exportDialog"},{default:(0,l.k6)(()=>[(0,n.R1)(Ze)?((0,l.uX)(),(0,l.CE)("section",ve,[(0,l.Lk)("div",ye,[(0,l.bF)(b,{style:{padding:"10px 12px"},type:"primary",size:"small",onClick:ta,disabled:(0,n.R1)(m)},{default:(0,l.k6)(()=>[(0,l.bF)(r,{style:{color:"var(--el-button-text-color)"}},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)((0,n.R1)(m)?"导出中，数据较多，请耐心等待":"导出"),1)]),_:1}),((0,l.uX)(),(0,l.CE)("svg",ke,[...a[40]||(a[40]=[(0,l.Lk)("path",{d:"M959.96952 415.997629a31.970084 31.970084 0 0 0-63.940169 0v393.141729a86.153056 86.153056 0 0 1-25.43157 61.368112c-16.41131 16.41131-38.230441 25.377383-61.436749 25.377384H214.85703c-23.20992 0-45.0724-8.966073-61.483711-25.377384S127.880338 832.349278 127.880338 809.14297V214.85703a86.900831 86.900831 0 0 1 86.911668-86.850257L607.893997 129.325314h0.104761a32.020659 32.020659 0 0 0 0.101149-64.041318L214.961791 63.940169h-0.104761A150.96021 150.96021 0 0 0 63.940169 214.85703v594.28594A150.613416 150.613416 0 0 0 214.85703 959.825022h594.28594a150.570067 150.570067 0 0 0 150.82655-150.692889V415.997629z",fill:"var(--el-button-text-color)","p-id":"4268"},null,-1),(0,l.Lk)("path",{d:"M735.853809 128.241582h114.691324L233.392454 745.39426a31.970084 31.970084 0 0 0 45.213286 45.213286L895.884854 173.317595l0.057799 114.821371a31.944797 31.944797 0 0 0 31.970084 31.923123 31.937573 31.937573 0 0 0 31.955635-31.955635l-0.097536-191.849406a31.970084 31.970084 0 0 0-31.970085-31.952023H735.853809a31.970084 31.970084 0 0 0 0 63.936557z",fill:"var(--el-button-text-color)","p-id":"4269"},null,-1)])]))]),_:1},8,["disabled"])]),(0,l.bF)(T,{ref_key:"ScheduleRef",ref:Ye,data:{TableData:(0,n.R1)(w)},onReady:aa},null,8,["data"])])):(0,l.Q3)("",!0)]),_:1},8,["modelValue"]),(0,l.bF)(B,{ref_key:"downloadRef",ref:sa},null,512)])}}};const we=(0,r.A)(be,[["__scopeId","data-v-71bc6394"]]);var Ce=we},78365:function(e,a,t){t.d(a,{A:function(){return d}});var l=t(20641),n=t(50953);const s={class:"paginated"};var i={__name:"index",props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:a}){const t=e,i=a,o=(0,n.Kh)({page:1,per_page:10,total:0});(0,l.wB)(()=>t.modelValue,e=>{t.modelValue&&(o.page=e.page,o.per_page=e.per_page,o.total=e.total)});const{page:d,per_page:u,total:r}=(0,n.QW)(o),c=e=>{o.per_page=e},m=e=>{o.page=e};return(0,l.wB)(()=>o,e=>{i("update:modelValue",{...e})},{deep:!0}),(e,a)=>{const t=(0,l.g2)("el-pagination");return(0,l.uX)(),(0,l.CE)("div",s,[(0,l.bF)(t,(0,l.v6)({"current-page":(0,n.R1)(d),"onUpdate:currentPage":a[0]||(a[0]=e=>(0,n.i9)(d)?d.value=e:null),"page-size":(0,n.R1)(u),"onUpdate:pageSize":a[1]||(a[1]=e=>(0,n.i9)(u)?u.value=e:null),"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:(0,n.R1)(r),size:"small",onSizeChange:c,onCurrentChange:m},e.$attrs),null,16,["current-page","page-size","total"])])}}};const o=i;var d=o}}]);