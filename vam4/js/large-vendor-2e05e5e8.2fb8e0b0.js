(self["webpackChunkmeetingvue3"]=self["webpackChunkmeetingvue3"]||[]).push([[3539],{57235:function(){(function(){"use strict";var n=function(n){var t=typeof n;return null===n?"null":"object"===t&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":t},t=function(t){return function(e){return n(e)===t}},e=function(n){return function(t){return typeof t===n}},r=function(n){return function(t){return n===t}},o=t("string"),u=t("object"),i=t("array"),c=r(null),a=e("boolean"),l=r(void 0),f=function(n){return null===n||void 0===n},s=function(n){return!f(n)},m=e("function"),d=e("number"),g=function(){},p=function(n,t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return n(t.apply(null,e))}},v=function(n,t){return function(e){return n(t(e))}},b=function(n){return function(){return n}},h=function(n){return n},w=function(n,t){return n===t};function y(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.concat(e);return n.apply(null,o)}}var C=function(n){return function(t){return!n(t)}},S=function(n){return function(){throw new Error(n)}},T=b(!1),x=b(!0),R=function(){return D},D=function(){var n=function(n){return n()},t=h,e={fold:function(n,t){return n()},isSome:T,isNone:x,getOr:t,getOrThunk:n,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:b(null),getOrUndefined:b(void 0),or:t,orThunk:n,map:R,each:g,bind:R,exists:T,forall:x,filter:function(){return R()},toArray:function(){return[]},toString:b("none()")};return e}(),O=function(n){var t=b(n),e=function(){return o},r=function(t){return t(n)},o={fold:function(t,e){return e(n)},isSome:x,isNone:T,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return O(t(n))},each:function(t){t(n)},bind:r,exists:r,forall:r,filter:function(t){return t(n)?o:D},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return o},A=function(n){return null===n||void 0===n?D:O(n)},k={some:O,none:R,from:A},I=Array.prototype.slice,B=Array.prototype.indexOf,M=Array.prototype.push,E=function(n,t){return B.call(n,t)},P=function(n,t){return E(n,t)>-1},N=function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];if(t(o,e))return!0}return!1},z=function(n,t){for(var e=[],r=0;r<n;r++)e.push(t(r));return e},L=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var u=n[o];r[o]=t(u,o)}return r},_=function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];t(o,e)}},W=function(n,t){for(var e=n.length-1;e>=0;e--){var r=n[e];t(r,e)}},j=function(n,t){for(var e=[],r=[],o=0,u=n.length;o<u;o++){var i=n[o],c=t(i,o)?e:r;c.push(i)}return{pass:e,fail:r}},F=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var u=n[r];t(u,r)&&e.push(u)}return e},H=function(n,t,e){return W(n,function(n,r){e=t(e,n,r)}),e},V=function(n,t,e){return _(n,function(n,r){e=t(e,n,r)}),e},U=function(n,t,e){for(var r=0,o=n.length;r<o;r++){var u=n[r];if(t(u,r))return k.some(u);if(e(u,r))break}return k.none()},q=function(n,t){return U(n,t,T)},G=function(n,t){for(var e=0,r=n.length;e<r;e++){var o=n[e];if(t(o,e))return k.some(e)}return k.none()},$=function(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!i(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);M.apply(t,n[e])}return t},K=function(n,t){return $(L(n,t))},X=function(n,t){for(var e=0,r=n.length;e<r;++e){var o=n[e];if(!0!==t(o,e))return!1}return!0},Y=function(n){var t=I.call(n,0);return t.reverse(),t},J=function(n,t){for(var e={},r=0,o=n.length;r<o;r++){var u=n[r];e[String(u)]=t(u,r)}return e},Q=function(n){return[n]},Z=function(n,t){var e=I.call(n,0);return e.sort(t),e},nn=function(n,t){return t>=0&&t<n.length?k.some(n[t]):k.none()},tn=function(n){return nn(n,0)},en=function(n){return nn(n,n.length-1)},rn=function(n,t){for(var e=0;e<n.length;e++){var r=t(n[e],e);if(r.isSome())return r}return k.none()},on=function(){return on=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e],t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},on.apply(this,arguments)};function un(n,t,e){if(e||2===arguments.length)for(var r,o=0,u=t.length;o<u;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return n.concat(r||Array.prototype.slice.call(t))}var cn=function(n){var t,e=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e||(e=!0,t=n.apply(null,r)),t}},an=function(n,t,e,r){var o=n.isiOS()&&!0===/ipad/i.test(e),u=n.isiOS()&&!o,i=n.isiOS()||n.isAndroid(),c=i||r("(pointer:coarse)"),a=o||!u&&i&&r("(min-device-width:768px)"),l=u||i&&!a,f=t.isSafari()&&n.isiOS()&&!1===/safari/i.test(e),s=!l&&!a&&!f;return{isiPad:b(o),isiPhone:b(u),isTablet:b(a),isPhone:b(l),isTouch:b(c),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:b(f),isDesktop:b(s)}},ln=function(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(r.test(t))return r}},fn=function(n,t){var e=ln(n,t);if(!e)return{major:0,minor:0};var r=function(n){return Number(t.replace(e,"$"+n))};return dn(r(1),r(2))},sn=function(n,t){var e=String(t).toLowerCase();return 0===n.length?mn():fn(n,e)},mn=function(){return dn(0,0)},dn=function(n,t){return{major:n,minor:t}},gn={nu:dn,detect:sn,unknown:mn},pn=function(n,t){return rn(t.brands,function(t){var e=t.brand.toLowerCase();return q(n,function(n){var t;return e===(null===(t=n.brand)||void 0===t?void 0:t.toLowerCase())}).map(function(n){return{current:n.name,version:gn.nu(parseInt(t.version,10),0)}})})},vn=function(n,t){var e=String(t).toLowerCase();return q(n,function(n){return n.search(e)})},bn=function(n,t){return vn(n,t).map(function(n){var e=gn.detect(n.versionRegexes,t);return{current:n.name,version:e}})},hn=function(n,t){return vn(n,t).map(function(n){var e=gn.detect(n.versionRegexes,t);return{current:n.name,version:e}})},wn=function(n,t){return n.substring(t)},yn=function(n,t,e){return""===t||n.length>=t.length&&n.substr(e,e+t.length)===t},Cn=function(n,t){return Tn(n,t)?wn(n,t.length):n},Sn=function(n,t){return-1!==n.indexOf(t)},Tn=function(n,t){return yn(n,t,0)},xn=function(n,t){return yn(n,t,n.length-t.length)},Rn=function(n){return function(t){return t.replace(n,"")}},Dn=Rn(/^\s+|\s+$/g),On=function(n){return n.length>0},An=function(n){return!On(n)},kn=function(n){var t=parseFloat(n);return isNaN(t)?k.none():k.some(t)},In=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Bn=function(n){return function(t){return Sn(t,n)}},Mn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return Sn(n,"edge/")&&Sn(n,"chrome")&&Sn(n,"safari")&&Sn(n,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,In],search:function(n){return Sn(n,"chrome")&&!Sn(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return Sn(n,"msie")||Sn(n,"trident")}},{name:"Opera",versionRegexes:[In,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Bn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Bn("firefox")},{name:"Safari",versionRegexes:[In,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(Sn(n,"safari")||Sn(n,"mobile/"))&&Sn(n,"applewebkit")}}],En=[{name:"Windows",search:Bn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return Sn(n,"iphone")||Sn(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Bn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Bn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Bn("linux"),versionRegexes:[]},{name:"Solaris",search:Bn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Bn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Bn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Pn={browsers:b(Mn),oses:b(En)},Nn="Edge",zn="Chrome",Ln="IE",_n="Opera",Wn="Firefox",jn="Safari",Fn=function(){return Hn({current:void 0,version:gn.unknown()})},Hn=function(n){var t=n.current,e=n.version,r=function(n){return function(){return t===n}};return{current:t,version:e,isEdge:r(Nn),isChrome:r(zn),isIE:r(Ln),isOpera:r(_n),isFirefox:r(Wn),isSafari:r(jn)}},Vn={unknown:Fn,nu:Hn,edge:b(Nn),chrome:b(zn),ie:b(Ln),opera:b(_n),firefox:b(Wn),safari:b(jn)},Un="Windows",qn="iOS",Gn="Android",$n="Linux",Kn="OSX",Xn="Solaris",Yn="FreeBSD",Jn="ChromeOS",Qn=function(){return Zn({current:void 0,version:gn.unknown()})},Zn=function(n){var t=n.current,e=n.version,r=function(n){return function(){return t===n}};return{current:t,version:e,isWindows:r(Un),isiOS:r(qn),isAndroid:r(Gn),isOSX:r(Kn),isLinux:r($n),isSolaris:r(Xn),isFreeBSD:r(Yn),isChromeOS:r(Jn)}},nt={unknown:Qn,nu:Zn,windows:b(Un),ios:b(qn),android:b(Gn),linux:b($n),osx:b(Kn),solaris:b(Xn),freebsd:b(Yn),chromeos:b(Jn)},tt=function(n,t,e){var r=Pn.browsers(),o=Pn.oses(),u=t.bind(function(n){return pn(r,n)}).orThunk(function(){return bn(r,n)}).fold(Vn.unknown,Vn.nu),i=hn(o,n).fold(nt.unknown,nt.nu),c=an(i,u,n,e);return{browser:u,os:i,deviceType:c}},et={detect:tt},rt=function(n){return window.matchMedia(n).matches},ot=cn(function(){return et.detect(navigator.userAgent,k.from(navigator.userAgentData),rt)}),ut=function(){return ot()},it=function(n,t,e){return 0!==(n.compareDocumentPosition(t)&e)},ct=function(n,t){return it(n,t,Node.DOCUMENT_POSITION_CONTAINED_BY)},at=8,lt=9,ft=11,st=1,mt=3,dt=function(n,t){var e=t||document,r=e.createElement("div");if(r.innerHTML=n,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return vt(r.childNodes[0])},gt=function(n,t){var e=t||document,r=e.createElement(n);return vt(r)},pt=function(n,t){var e=t||document,r=e.createTextNode(n);return vt(r)},vt=function(n){if(null===n||void 0===n)throw new Error("Node cannot be null or undefined");return{dom:n}},bt=function(n,t,e){return k.from(n.dom.elementFromPoint(t,e)).map(vt)},ht={fromHtml:dt,fromTag:gt,fromText:pt,fromDom:vt,fromPoint:bt},wt=function(n,t){var e=n.dom;if(e.nodeType!==st)return!1;var r=e;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},yt=function(n){return n.nodeType!==st&&n.nodeType!==lt&&n.nodeType!==ft||0===n.childElementCount},Ct=function(n,t){var e=void 0===t?document:t.dom;return yt(e)?[]:L(e.querySelectorAll(n),ht.fromDom)},St=function(n,t){var e=void 0===t?document:t.dom;return yt(e)?k.none():k.from(e.querySelector(n)).map(ht.fromDom)},Tt=function(n,t){return n.dom===t.dom},xt=function(n,t){var e=n.dom,r=t.dom;return e!==r&&e.contains(r)},Rt=function(n,t){return ct(n.dom,t.dom)},Dt=function(n,t){return ut().browser.isIE()?Rt(n,t):xt(n,t)},Ot=wt,At=Object.keys,kt=Object.hasOwnProperty,It=function(n,t){for(var e=At(n),r=0,o=e.length;r<o;r++){var u=e[r],i=n[u];t(i,u)}},Bt=function(n,t){return Mt(n,function(n,e){return{k:e,v:t(n,e)}})},Mt=function(n,t){var e={};return It(n,function(n,r){var o=t(n,r);e[o.k]=o.v}),e},Et=function(n){return function(t,e){n[e]=t}},Pt=function(n,t,e,r){var o={};return It(n,function(n,o){(t(n,o)?e:r)(n,o)}),o},Nt=function(n,t){var e={};return Pt(n,t,Et(e),g),e},zt=function(n,t){var e=[];return It(n,function(n,r){e.push(t(n,r))}),e},Lt=function(n){return zt(n,h)},_t=function(n){return At(n).length},Wt=function(n,t){return jt(n,t)?k.from(n[t]):k.none()},jt=function(n,t){return kt.call(n,t)},Ft=function(n,t){return jt(n,t)&&void 0!==n[t]&&null!==n[t]},Ht=function(n){for(var t in n)if(kt.call(n,t))return!1;return!0},Vt=["tfoot","thead","tbody","colgroup"],Ut=function(n){return P(Vt,n)},qt=function(n,t){return{rows:n,columns:t}},Gt=function(n,t){return{row:n,column:t}},$t=function(n,t,e){return{element:n,rowspan:t,colspan:e}},Kt=function(n,t,e,r){return{element:n,rowspan:t,colspan:e,isNew:r}},Xt=function(n,t,e,r,o,u){return{element:n,rowspan:t,colspan:e,row:r,column:o,isLocked:u}},Yt=function(n,t,e){return{element:n,cells:t,section:e}},Jt=function(n,t,e,r){return{element:n,cells:t,section:e,isNew:r}},Qt=function(n,t,e){return{element:n,isNew:t,isLocked:e}},Zt=function(n,t,e,r){return{element:n,cells:t,section:e,isNew:r}},ne=function(n,t,e,r){return{startRow:n,startCol:t,finishRow:e,finishCol:r}},te=function(n,t,e){return{element:n,colspan:t,column:e}},ee=function(n,t){return{element:n,columns:t}};"undefined"!==typeof window?window:Function("return this;")();var re=function(n){var t=n.dom.nodeName;return t.toLowerCase()},oe=function(n){return n.dom.nodeType},ue=function(n){return function(t){return oe(t)===n}},ie=function(n){return oe(n)===at||"#comment"===re(n)},ce=ue(st),ae=ue(mt),le=ue(lt),fe=ue(ft),se=function(n){return function(t){return ce(t)&&re(t)===n}},me=function(n){return ht.fromDom(n.dom.ownerDocument)},de=function(n){return le(n)?n:me(n)},ge=function(n){return ht.fromDom(de(n).dom.defaultView)},pe=function(n){return k.from(n.dom.parentNode).map(ht.fromDom)},ve=function(n){return k.from(n.dom.parentElement).map(ht.fromDom)},be=function(n,t){var e=m(t)?t:T,r=n.dom,o=[];while(null!==r.parentNode&&void 0!==r.parentNode){var u=r.parentNode,i=ht.fromDom(u);if(o.push(i),!0===e(i))break;r=u}return o},he=function(n){return k.from(n.dom.previousSibling).map(ht.fromDom)},we=function(n){return k.from(n.dom.nextSibling).map(ht.fromDom)},ye=function(n){return L(n.dom.childNodes,ht.fromDom)},Ce=function(n,t){var e=n.dom.childNodes;return k.from(e[t]).map(ht.fromDom)},Se=function(n){return Ce(n,0)},Te=function(n){return fe(n)&&s(n.dom.host)},xe=m(Element.prototype.attachShadow)&&m(Node.prototype.getRootNode),Re=b(xe),De=xe?function(n){return ht.fromDom(n.dom.getRootNode())}:de,Oe=function(n){var t=De(n);return Te(t)?k.some(t):k.none()},Ae=function(n){return ht.fromDom(n.dom.host)},ke=function(n){if(Re()&&s(n.target)){var t=ht.fromDom(n.target);if(ce(t)&&Ie(t)&&n.composed&&n.composedPath){var e=n.composedPath();if(e)return tn(e)}}return k.from(n.target)},Ie=function(n){return s(n.dom.shadowRoot)},Be=function(n){var t=ae(n)?n.dom.parentNode:n.dom;if(void 0===t||null===t||null===t.ownerDocument)return!1;var e=t.ownerDocument;return Oe(ht.fromDom(t)).fold(function(){return e.body.contains(t)},v(Be,Ae))},Me=function(){return Ee(ht.fromDom(document))},Ee=function(n){var t=n.dom.body;if(null===t||void 0===t)throw new Error("Body is not available yet");return ht.fromDom(t)},Pe=function(n,t,e){return F(be(n,e),t)},Ne=function(n,t){return F(ye(n),t)},ze=function(n,t){var e=[];return _(ye(n),function(n){t(n)&&(e=e.concat([n])),e=e.concat(ze(n,t))}),e},Le=function(n,t,e){return Pe(n,function(n){return wt(n,t)},e)},_e=function(n,t){return Ne(n,function(n){return wt(n,t)})},We=function(n,t){return Ct(t,n)};function je(n,t,e,r,o){return n(e,r)?k.some(e):m(o)&&o(e)?k.none():t(e,r,o)}var Fe=function(n,t,e){var r=n.dom,o=m(e)?e:T;while(r.parentNode){r=r.parentNode;var u=ht.fromDom(r);if(t(u))return k.some(u);if(o(u))break}return k.none()},He=function(n,t,e){var r=function(n,t){return t(n)};return je(r,Fe,n,t,e)},Ve=function(n,t){var e=function(n){return t(ht.fromDom(n))},r=q(n.dom.childNodes,e);return r.map(ht.fromDom)},Ue=function(n,t){var e=function(n){for(var r=0;r<n.childNodes.length;r++){var o=ht.fromDom(n.childNodes[r]);if(t(o))return k.some(o);var u=e(n.childNodes[r]);if(u.isSome())return u}return k.none()};return e(n.dom)},qe=function(n,t,e){return Fe(n,function(n){return wt(n,t)},e)},Ge=function(n,t){return Ve(n,function(n){return wt(n,t)})},$e=function(n,t){return St(t,n)},Ke=function(n,t,e){var r=function(n,t){return wt(n,t)};return je(r,qe,n,t,e)},Xe=function(n,t,e){if(!(o(e)||a(e)||d(e)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",e,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,e+"")},Ye=function(n,t,e){Xe(n.dom,t,e)},Je=function(n,t){var e=n.dom;It(t,function(n,t){Xe(e,t,n)})},Qe=function(n,t){It(t,function(t,e){t.fold(function(){tr(n,e)},function(t){Xe(n.dom,e,t)})})},Ze=function(n,t){var e=n.dom.getAttribute(t);return null===e?void 0:e},nr=function(n,t){return k.from(Ze(n,t))},tr=function(n,t){n.dom.removeAttribute(t)},er=function(n){return V(n.dom.attributes,function(n,t){return n[t.name]=t.value,n},{})},rr=function(n,t,e){return void 0===e&&(e=w),n.exists(function(n){return e(n,t)})},or=function(n){for(var t=[],e=function(n){t.push(n)},r=0;r<n.length;r++)n[r].each(e);return t},ur=function(n,t,e){return n.isSome()&&t.isSome()?k.some(e(n.getOrDie(),t.getOrDie())):k.none()},ir=function(n,t){return void 0!==n&&null!==n?t(n):k.none()},cr=function(n){return n.bind(h)},ar=function(n,t){return n?k.some(t):k.none()},lr=function(n){return void 0!==n.style&&m(n.style.getPropertyValue)},fr=function(n,t,e){if(!o(e))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",e,":: Element ",n),new Error("CSS value must be a string: "+e);lr(n)&&n.style.setProperty(t,e)},sr=function(n,t){lr(n)&&n.style.removeProperty(t)},mr=function(n,t,e){var r=n.dom;fr(r,t,e)},dr=function(n,t){var e=n.dom;It(t,function(n,t){fr(e,t,n)})},gr=function(n,t){var e=n.dom,r=window.getComputedStyle(e),o=r.getPropertyValue(t);return""!==o||Be(n)?o:pr(e,t)},pr=function(n,t){return lr(n)?n.style.getPropertyValue(t):""},vr=function(n,t){var e=n.dom,r=pr(e,t);return k.from(r).filter(function(n){return n.length>0})},br=function(n,t){var e=n.dom;sr(e,t),rr(nr(n,"style").map(Dn),"")&&tr(n,"style")},hr=function(n,t){var e=n.dom,r=t.dom;lr(e)&&lr(r)&&(r.style.cssText=e.style.cssText)},wr=function(n,t,e){return void 0===e&&(e=0),nr(n,t).map(function(n){return parseInt(n,10)}).getOr(e)},yr=function(n,t){return wr(n,t,1)},Cr=function(n){return se("col")(n)?wr(n,"span",1)>1:yr(n,"colspan")>1},Sr=function(n){return yr(n,"rowspan")>1},Tr=function(n,t){return parseInt(gr(n,t),10)},xr=b(10),Rr=b(10),Dr=function(n,t){return Or(n,t,x)},Or=function(n,t,e){return K(ye(n),function(n){return wt(n,t)?e(n)?[n]:[]:Or(n,t,e)})},Ar=function(n,t,e){if(void 0===e&&(e=T),e(t))return k.none();if(P(n,re(t)))return k.some(t);var r=function(n){return wt(n,"table")||e(n)};return qe(t,n.join(","),r)},kr=function(n,t){return Ar(["td","th"],n,t)},Ir=function(n){return Dr(n,"th,td")},Br=function(n){return wt(n,"colgroup")?_e(n,"col"):K(Pr(n),function(n){return _e(n,"col")})},Mr=function(n,t){return Ke(n,"table",t)},Er=function(n){return Dr(n,"tr")},Pr=function(n){return Mr(n).fold(b([]),function(n){return _e(n,"colgroup")})},Nr=function(n,t){return L(n,function(n){if("colgroup"===re(n)){var e=L(Br(n),function(n){var t=wr(n,"span",1);return $t(n,1,t)});return Yt(n,e,"colgroup")}e=L(Ir(n),function(n){var t=wr(n,"rowspan",1),e=wr(n,"colspan",1);return $t(n,t,e)});return Yt(n,e,t(n))})},zr=function(n){return pe(n).map(function(n){var t=re(n);return Ut(t)?t:"tbody"}).getOr("tbody")},Lr=function(n){var t=Er(n),e=Pr(n),r=un(un([],e,!0),t,!0);return Nr(r,zr)},_r=function(n,t){return Nr(n,function(){return t})},Wr=function(n,t,e){var r=n.cells,o=r.slice(0,t),u=r.slice(t),i=o.concat(e).concat(u);return Hr(n,i)},jr=function(n,t,e){return Wr(n,t,[e])},Fr=function(n,t,e){var r=n.cells;r[t]=e},Hr=function(n,t){return Zt(n.element,t,n.section,n.isNew)},Vr=function(n,t){var e=n.cells,r=L(e,t);return Zt(n.element,r,n.section,n.isNew)},Ur=function(n,t){return n.cells[t]},qr=function(n,t){return Ur(n,t).element},Gr=function(n){return n.cells.length},$r=function(n){var t=j(n,function(n){return"colgroup"===n.section});return{rows:t.fail,cols:t.pass}},Kr=function(n,t,e){var r=L(n.cells,e);return Zt(t(n.element),r,n.section,!0)},Xr="data-snooker-locked-cols",Yr=function(n){return nr(n,Xr).bind(function(n){return k.from(n.match(/\d+/g))}).map(function(n){return J(n,x)})},Jr=function(n){var t=V($r(n).rows,function(n,t){return _(t.cells,function(t,e){t.isLocked&&(n[e]=!0)}),n},{}),e=zt(t,function(n,t){return parseInt(t,10)});return Z(e)},Qr=function(n,t){return n+","+t},Zr=function(n,t,e){return k.from(n.access[Qr(t,e)])},no=function(n,t,e){var r=to(n,function(n){return e(t,n.element)});return r.length>0?k.some(r[0]):k.none()},to=function(n,t){var e=K(n.all,function(n){return n.cells});return F(e,t)},eo=function(n){var t={},e=0;return _(n.cells,function(n){var r=n.colspan;z(r,function(o){var u=e+o;t[u]=te(n.element,r,u)}),e+=r}),t},ro=function(n){var t={},e=[],r=tn(n).map(function(n){return n.element}).bind(Mr),o=r.bind(Yr).getOr({}),u=0,i=0,c=0,a=j(n,function(n){return"colgroup"===n.section}),l=a.pass,f=a.fail;_(f,function(n){var r=[];_(n.cells,function(n){var e=0;while(void 0!==t[Qr(c,e)])e++;for(var u=Ft(o,e.toString()),a=Xt(n.element,n.rowspan,n.colspan,c,e,u),l=0;l<n.colspan;l++)for(var f=0;f<n.rowspan;f++){var s=c+f,m=e+l,d=Qr(s,m);t[d]=a,i=Math.max(i,m+1)}r.push(a)}),u++,e.push(Yt(n.element,r,n.section)),c++});var s=en(l).map(function(n){var t=eo(n),e=ee(n.element,Lt(t));return{colgroups:[e],columns:t}}).getOrThunk(function(){return{colgroups:[],columns:{}}}),m=s.columns,d=s.colgroups,g=qt(u,i);return{grid:g,access:t,all:e,columns:m,colgroups:d}},oo=function(n){var t=Lr(n);return ro(t)},uo=function(n){return K(n.all,function(n){return n.cells})},io=function(n){return Lt(n.columns)},co=function(n){return At(n.columns).length>0},ao=function(n,t){return k.from(n.columns[t])},lo={fromTable:oo,generate:ro,getAt:Zr,findItem:no,filterItems:to,justCells:uo,justColumns:io,hasColumns:co,getColumnAt:ao},fo=function(n,t){var e=t.column,r=t.column+t.colspan-1,o=t.row,u=t.row+t.rowspan-1;return e<=n.finishCol&&r>=n.startCol&&o<=n.finishRow&&u>=n.startRow},so=function(n,t){return t.column>=n.startCol&&t.column+t.colspan-1<=n.finishCol&&t.row>=n.startRow&&t.row+t.rowspan-1<=n.finishRow},mo=function(n,t){for(var e=!0,r=y(so,t),o=t.startRow;o<=t.finishRow;o++)for(var u=t.startCol;u<=t.finishCol;u++)e=e&&lo.getAt(n,o,u).exists(r);return e?k.some(t):k.none()},go=function(n,t){return ne(Math.min(n.row,t.row),Math.min(n.column,t.column),Math.max(n.row+n.rowspan-1,t.row+t.rowspan-1),Math.max(n.column+n.colspan-1,t.column+t.colspan-1))},po=function(n,t,e){var r=lo.findItem(n,t,Tt),o=lo.findItem(n,e,Tt);return r.bind(function(n){return o.map(function(t){return go(n,t)})})},vo=function(n,t,e){return po(n,t,e).bind(function(t){return mo(n,t)})},bo=function(n,t,e,r){return lo.findItem(n,t,Tt).bind(function(t){var o=e>0?t.row+t.rowspan-1:t.row,u=r>0?t.column+t.colspan-1:t.column,i=lo.getAt(n,o+e,u+r);return i.map(function(n){return n.element})})},ho=function(n,t,e){return po(n,t,e).map(function(t){var e=lo.filterItems(n,y(fo,t));return L(e,function(n){return n.element})})},wo=function(n,t){var e=function(n,t){return Dt(t,n)};return lo.findItem(n,t,e).map(function(n){return n.element})},yo=function(n,t,e){return Mr(n).bind(function(r){var o=xo(r);return bo(o,n,t,e)})},Co=function(n,t,e){var r=xo(n);return ho(r,t,e)},So=function(n,t,e,r,o){var u=xo(n),i=Tt(n,e)?k.some(t):wo(u,t),c=Tt(n,o)?k.some(r):wo(u,r);return i.bind(function(n){return c.bind(function(t){return ho(u,n,t)})})},To=function(n,t,e){var r=xo(n);return vo(r,t,e)},xo=lo.fromTable,Ro=function(n,t){var e=pe(n);e.each(function(e){e.dom.insertBefore(t.dom,n.dom)})},Do=function(n,t){var e=we(n);e.fold(function(){var e=pe(n);e.each(function(n){Ao(n,t)})},function(n){Ro(n,t)})},Oo=function(n,t){var e=Se(n);e.fold(function(){Ao(n,t)},function(e){n.dom.insertBefore(t.dom,e.dom)})},Ao=function(n,t){n.dom.appendChild(t.dom)},ko=function(n,t,e){Ce(n,e).fold(function(){Ao(n,t)},function(n){Ro(n,t)})},Io=function(n,t){Ro(n,t),Ao(t,n)},Bo=function(n,t){_(t,function(t){Ro(n,t)})},Mo=function(n,t){_(t,function(e,r){var o=0===r?n:t[r-1];Do(o,e)})},Eo=function(n,t){_(t,function(t){Ao(n,t)})},Po=function(n){n.dom.textContent="",_(ye(n),function(n){No(n)})},No=function(n){var t=n.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},zo=function(n){var t=ye(n);t.length>0&&Bo(n,t),No(n)},Lo=function(n,t){var e=function(e){if(!n(e))throw new Error("Can only get "+t+" value of a "+t+" node");return r(e).getOr("")},r=function(t){return n(t)?k.from(t.dom.nodeValue):k.none()},o=function(e,r){if(!n(e))throw new Error("Can only set raw "+t+" value of a "+t+" node");e.dom.nodeValue=r};return{get:e,getOption:r,set:o}},_o=Lo(ae,"text"),Wo=function(n){return _o.get(n)},jo=function(n){return _o.getOption(n)},Fo=function(n,t){return _o.set(n,t)},Ho=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Vo(){var n=function(n){return ht.fromDom(n.dom.cloneNode(!1))},t=function(n){return de(n).dom},e=function(n){return!!ce(n)&&("body"===re(n)||P(Ho,re(n)))},r=function(n){return!!ce(n)&&P(["br","img","hr","input"],re(n))},o=function(n){return ce(n)&&"false"===Ze(n,"contenteditable")},u=function(n,t){return n.dom.compareDocumentPosition(t.dom)},i=function(n,t){var e=er(n);Je(t,e)},c=function(n){var t=re(n);return P(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},a=function(n){return ce(n)?nr(n,"lang"):k.none()};return{up:b({selector:qe,closest:Ke,predicate:Fe,all:be}),down:b({selector:We,predicate:ze}),styles:b({get:gr,getRaw:vr,set:mr,remove:br}),attrs:b({get:Ze,set:Ye,remove:tr,copyTo:i}),insert:b({before:Ro,after:Do,afterAll:Mo,append:Ao,appendAll:Eo,prepend:Oo,wrap:Io}),remove:b({unwrap:zo,remove:No}),create:b({nu:ht.fromTag,clone:n,text:ht.fromText}),query:b({comparePosition:u,prevSibling:he,nextSibling:we}),property:b({children:ye,name:re,parent:pe,document:t,isText:ae,isComment:ie,isElement:ce,isSpecial:c,getLanguage:a,getText:Wo,setText:Fo,isBoundary:e,isEmptyTag:r,isNonEditable:o}),eq:Tt,is:Ot}}var Uo=function(n,t,e,r){var o=e[0],u=e.slice(1);return r(n,t,o,u)},qo=function(n,t,e){return e.length>0?Uo(n,t,e,Go):k.none()},Go=function(n,t,e,r){var o=t(n,e);return H(r,function(e,r){var o=t(n,r);return $o(n,e,o)},o)},$o=function(n,t,e){return t.bind(function(t){return e.filter(y(n.eq,t))})},Ko=function(n,t){return y(n.eq,t)},Xo=function(n,t,e,r){void 0===r&&(r=T);var o=[t].concat(n.up().all(t)),u=[e].concat(n.up().all(e)),i=function(n){var t=G(n,r);return t.fold(function(){return n},function(t){return n.slice(0,t+1)})},c=i(o),a=i(u),l=q(c,function(t){return N(a,Ko(n,t))});return{firstpath:c,secondpath:a,shared:l}},Yo=qo,Jo=Xo,Qo=Vo(),Zo=function(n,t){return Yo(Qo,function(t,e){return n(e)},t)},nu=function(n,t,e){return Jo(Qo,n,t,e)},tu=function(n){return qe(n,"table")},eu=function(n,t,e){var r=function(n){return function(t){return void 0!==e&&e(t)||Tt(t,n)}};return Tt(n,t)?k.some({boxes:k.some([n]),start:n,finish:t}):tu(n).bind(function(o){return tu(t).bind(function(u){if(Tt(o,u))return k.some({boxes:Co(o,n,t),start:n,finish:t});if(Dt(o,u)){var i=Le(t,"td,th",r(o)),c=i.length>0?i[i.length-1]:t;return k.some({boxes:So(o,n,o,t,u),start:n,finish:c})}if(Dt(u,o)){i=Le(n,"td,th",r(u));var a=i.length>0?i[i.length-1]:n;return k.some({boxes:So(u,n,o,t,u),start:n,finish:a})}return nu(n,t).shared.bind(function(i){return Ke(i,"table",e).bind(function(e){var i=Le(t,"td,th",r(e)),c=i.length>0?i[i.length-1]:t,a=Le(n,"td,th",r(e)),l=a.length>0?a[a.length-1]:n;return k.some({boxes:So(e,n,o,t,u),start:l,finish:c})})})})})},ru=function(n,t){var e=We(n,t);return e.length>0?k.some(e):k.none()},ou=function(n,t){return q(n,function(n){return wt(n,t)})},uu=function(n,t,e){return $e(n,t).bind(function(t){return $e(n,e).bind(function(n){return Zo(tu,[t,n]).map(function(e){return{first:t,last:n,table:e}})})})},iu=function(n,t){return qe(n,"table").bind(function(e){return $e(e,t).bind(function(t){return eu(t,n).bind(function(n){return n.boxes.map(function(t){return{boxes:t,start:n.start,finish:n.finish}})})})})},cu=function(n,t,e,r,o){return ou(n,o).bind(function(n){return yo(n,t,e).bind(function(n){return iu(n,r)})})},au=function(n,t){return ru(n,t)},lu=function(n,t,e){return uu(n,t,e).bind(function(t){var e=function(t){return Tt(n,t)},r="thead,tfoot,tbody,table",o=qe(t.first,r,e),u=qe(t.last,r,e);return o.bind(function(n){return u.bind(function(e){return Tt(n,e)?To(t.table,t.first,t.last):k.none()})})})},fu=function(n){if(!i(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var t=[],e={};return _(n,function(r,o){var u=At(r);if(1!==u.length)throw new Error("one and only one name per case");var c=u[0],a=r[c];if(void 0!==e[c])throw new Error("duplicate key detected:"+c);if("cata"===c)throw new Error("cannot have a case named cata (sorry)");if(!i(a))throw new Error("case arguments must be an array");t.push(c),e[c]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var u=e.length;if(u!==a.length)throw new Error("Wrong number of arguments to case "+c+". Expected "+a.length+" ("+a+"), got "+u);var i=function(n){var r=At(n);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));var o=X(t,function(n){return P(r,n)});if(!o)throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return n[c].apply(null,e)};return{fold:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+t.length);var u=t[o];return u.apply(null,e)},match:i,log:function(n){console.log(n,{constructors:t,constructor:c,params:e})}}}}),e},su={generate:fu},mu=su.generate([{none:[]},{multiple:["elements"]},{single:["element"]}]),du=function(n,t,e,r){return n.fold(t,e,r)},gu=mu.none,pu=mu.multiple,vu=mu.single,bu=function(n,t,e){var r=function(){return au(n(),e).fold(function(){return t().fold(gu,vu)},function(n){return pu(n)})};return{get:r}},hu=tinymce.util.Tools.resolve("tinymce.PluginManager"),wu=function(n,t){return ht.fromDom(n.dom.cloneNode(t))},yu=function(n){return wu(n,!1)},Cu=function(n){return wu(n,!0)},Su=function(n,t){var e=ht.fromTag(t),r=er(n);return Je(e,r),e},Tu=function(n,t){var e=Su(n,t),r=ye(Cu(n));return Eo(e,r),e},xu=function(n,t){var e=Su(n,t);Ro(n,e);var r=ye(n);return Eo(e,r),No(n),e},Ru=function(n,t){var e=function(t,e){if(!d(e)&&!e.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+e);var r=t.dom;lr(r)&&(r.style[n]=e+"px")},r=function(e){var r=t(e);if(r<=0||null===r){var o=gr(e,n);return parseFloat(o)||0}return r},o=r,u=function(n,t){return V(t,function(t,e){var r=gr(n,e),o=void 0===r?0:parseInt(r,10);return isNaN(o)?t:t+o},0)},i=function(n,t,e){var r=u(n,e),o=t>r?t-r:0;return o};return{set:e,get:r,getOuter:o,aggregate:u,max:i}},Du=function(){var n=ut().browser;return n.isIE()||n.isEdge()},Ou=function(n,t){return kn(n).getOr(t)},Au=function(n,t,e){return Ou(gr(n,t),e)},ku=function(n){return gr(n,"box-sizing")},Iu=function(n,t,e,r){var o=Au(n,"padding-"+e,0),u=Au(n,"padding-"+r,0),i=Au(n,"border-"+e+"-width",0),c=Au(n,"border-"+r+"-width",0);return t-o-u-i-c},Bu=function(n,t){var e=n.dom,r=e.getBoundingClientRect().height||e.offsetHeight;return"border-box"===t?r:Iu(n,r,"top","bottom")},Mu=function(n,t){var e=n.dom,r=e.getBoundingClientRect().width||e.offsetWidth;return"border-box"===t?r:Iu(n,r,"left","right")},Eu=function(n){return Du()?Bu(n,ku(n)):Au(n,"height",n.dom.offsetHeight)},Pu=function(n){return Du()?Mu(n,ku(n)):Au(n,"width",n.dom.offsetWidth)},Nu=function(n){return Mu(n,"content-box")},zu=Ru("width",function(n){return n.dom.offsetWidth}),Lu=function(n){return zu.get(n)},_u=function(n){return zu.getOuter(n)},Wu=Nu,ju=Pu,Fu=function(n,t){void 0===t&&(t=x);var e=n.grid,r=z(e.columns,h),o=z(e.rows,h);return L(r,function(e){var r=function(){return K(o,function(t){return lo.getAt(n,t,e).filter(function(n){return n.column===e}).toArray()})},u=function(n){return 1===n.colspan&&t(n.element)},i=function(){return lo.getAt(n,0,e)};return Hu(r,u,i)})},Hu=function(n,t,e){var r=n(),o=q(r,t),u=o.orThunk(function(){return k.from(r[0]).orThunk(e)});return u.map(function(n){return n.element})},Vu=function(n){var t=n.grid,e=z(t.rows,h),r=z(t.columns,h);return L(e,function(t){var e=function(){return K(r,function(e){return lo.getAt(n,t,e).filter(function(n){return n.row===t}).fold(b([]),function(n){return[n]})})},o=function(n){return 1===n.rowspan},u=function(){return lo.getAt(n,t,0)};return Hu(e,o,u)})},Uu=function(n,t){if(t<0||t>=n.length-1)return k.none();var e=n[t].fold(function(){var e=Y(n.slice(0,t));return rn(e,function(n,t){return n.map(function(n){return{value:n,delta:t+1}})})},function(n){return k.some({value:n,delta:0})}),r=n[t+1].fold(function(){var e=n.slice(t+1);return rn(e,function(n,t){return n.map(function(n){return{value:n,delta:t+1}})})},function(n){return k.some({value:n,delta:1})});return e.bind(function(n){return r.map(function(t){var e=t.delta+n.delta;return Math.abs(t.value-n.value)/e})})},qu=function(n,t){return function(e){return"rtl"===Gu(e)?t:n}},Gu=function(n){return"rtl"===gr(n,"direction")?"rtl":"ltr"},$u=Ru("height",function(n){var t=n.dom;return Be(n)?t.getBoundingClientRect().height:t.offsetHeight}),Ku=function(n){return $u.get(n)},Xu=function(n){return $u.getOuter(n)},Yu=Eu,Ju=function(n,t){var e=function(e,r){return Ju(n+e,t+r)};return{left:n,top:t,translate:e}},Qu=Ju,Zu=function(n){var t=n.getBoundingClientRect();return Qu(t.left,t.top)},ni=function(n,t){return void 0!==n?n:void 0!==t?t:0},ti=function(n){var t=n.dom.ownerDocument,e=t.body,r=t.defaultView,o=t.documentElement;if(e===n.dom)return Qu(e.offsetLeft,e.offsetTop);var u=ni(null===r||void 0===r?void 0:r.pageYOffset,o.scrollTop),i=ni(null===r||void 0===r?void 0:r.pageXOffset,o.scrollLeft),c=ni(o.clientTop,e.clientTop),a=ni(o.clientLeft,e.clientLeft);return ei(n).translate(i-a,u-c)},ei=function(n){var t=n.dom,e=t.ownerDocument,r=e.body;return r===t?Qu(r.offsetLeft,r.offsetTop):Be(n)?Zu(t):Qu(0,0)},ri=function(n,t){return{row:n,y:t}},oi=function(n,t){return{col:n,x:t}},ui=function(n){var t=ti(n);return t.left+_u(n)},ii=function(n){return ti(n).left},ci=function(n,t){return oi(n,ii(t))},ai=function(n,t){return oi(n,ui(t))},li=function(n){return ti(n).top},fi=function(n,t){return ri(n,li(t))},si=function(n,t){return ri(n,li(t)+Xu(t))},mi=function(n,t,e){if(0===e.length)return[];var r=L(e.slice(1),function(t,e){return t.map(function(t){return n(e,t)})}),o=e[e.length-1].map(function(n){return t(e.length-1,n)});return r.concat([o])},di=function(n){return-n},gi={delta:h,positions:function(n){return mi(fi,si,n)},edge:li},pi={delta:h,edge:ii,positions:function(n){return mi(ci,ai,n)}},vi={delta:di,edge:ui,positions:function(n){return mi(ai,ci,n)}},bi=qu(pi,vi),hi={delta:function(n,t){return bi(t).delta(n,t)},positions:function(n,t){return bi(t).positions(n,t)},edge:function(n){return bi(n).edge(n)}},wi={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},yi=function(){var n="[0-9]+",t="[+-]?"+n,e="[eE]"+t,r="\\.",o=function(n){return"(?:"+n+")?"},u=["Infinity",n+r+o(n)+o(e),r+n+o(e),n+o(e)].join("|"),i="[+-]?(?:"+u+")";return new RegExp("^("+i+")(.*)$")}(),Ci=function(n,t){return N(t,function(t){return N(wi[t],function(t){return n===t})})},Si=function(n,t){var e=k.from(yi.exec(n));return e.bind(function(n){var e=Number(n[1]),r=n[2];return Ci(r,t)?k.some({value:e,unit:r}):k.none()})},Ti=/(\d+(\.\d+)?)%/,xi=/(\d+(\.\d+)?)px|em/,Ri=se("col"),Di=function(n,t,e){var r=ve(n).getOrThunk(function(){return Ee(me(n))});return t(n)/e(r)*100},Oi=function(n,t){mr(n,"width",t+"px")},Ai=function(n,t){mr(n,"width",t+"%")},ki=function(n,t){mr(n,"height",t+"px")},Ii=function(n){return Yu(n)+"px"},Bi=function(n,t,e,r){var o=Mr(n).map(function(n){var r=e(n);return Math.floor(t/100*r)}).getOr(t);return r(n,o),o},Mi=function(n,t,e,r){var o=parseFloat(n);return xn(n,"%")&&"table"!==re(t)?Bi(t,o,e,r):o},Ei=function(n){var t=Ii(n);return t?Mi(t,n,Ku,ki):Ku(n)},Pi=function(n,t,e){var r=e(n),o=yr(n,t);return r/o},Ni=function(n,t){return vr(n,t).orThunk(function(){return nr(n,t).map(function(n){return n+"px"})})},zi=function(n){return Ni(n,"width")},Li=function(n){return Ni(n,"height")},_i=function(n){return Di(n,Lu,Wu)},Wi=function(n){return Ri(n)?Lu(n):ju(n)},ji=function(n){return Pi(n,"rowspan",Ei)},Fi=function(n){var t=zi(n);return t.bind(function(n){return Si(n,["fixed","relative","empty"])})},Hi=function(n,t,e){mr(n,"width",t+e)},Vi=function(n){return Lu(n)+"px"},Ui=function(n){return Di(n,Lu,Wu)+"%"},qi=function(n){return zi(n).exists(function(n){return Ti.test(n)})},Gi=function(n){return zi(n).exists(function(n){return xi.test(n)})},$i=function(n){return zi(n).isNone()},Ki=b(Ti),Xi=se("col"),Yi=function(n){return zi(n).getOrThunk(function(){return Wi(n)+"px"})},Ji=function(n){return Li(n).getOrThunk(function(){return ji(n)+"px"})},Qi=function(n){return L(lo.justColumns(n),function(n){return k.from(n.element)})},Zi=function(n){var t=ut().browser,e=t.isChrome()||t.isFirefox();return!Xi(n)||e},nc=function(n,t,e,r,o,u){return n.filter(r).fold(function(){return u(Uu(e,t))},function(n){return o(n)})},tc=function(n,t,e,r){var o=Fu(n),u=lo.hasColumns(n)?Qi(n):o,i=[k.some(hi.edge(t))].concat(L(hi.positions(o,t),function(n){return n.map(function(n){return n.x})})),c=C(Cr);return L(u,function(n,t){return nc(n,t,i,c,function(n){if(Zi(n))return e(n);var u=ir(o[t],h);return nc(u,t,i,c,function(n){return r(k.some(Lu(n)))},r)},r)})},ec=function(n){return n.map(function(n){return n+"px"}).getOr("")},rc=function(n,t){return tc(n,t,Yi,ec)},oc=function(n,t,e){return tc(n,t,_i,function(n){return n.fold(function(){return e.minCellWidth()},function(n){return n/e.pixelWidth()*100})})},uc=function(n,t,e){return tc(n,t,Wi,function(n){return n.getOrThunk(e.minCellWidth)})},ic=function(n,t,e,r,o){var u=Vu(n),i=[k.some(e.edge(t))].concat(L(e.positions(u,t),function(n){return n.map(function(n){return n.y})}));return L(u,function(n,t){return nc(n,t,i,C(Sr),r,o)})},cc=function(n,t,e){return ic(n,t,e,ji,function(n){return n.getOrThunk(Rr)})},ac=function(n,t,e){return ic(n,t,e,Ji,ec)},lc=function(n,t){return function(){return Be(n)?t(n):parseFloat(vr(n,"width").getOr("0"))}},fc=function(n){var t=lc(n,Lu),e=b(0),r=function(t,e){return uc(t,n,e)};return{width:t,pixelWidth:t,getWidths:r,getCellDelta:e,singleColumnWidth:b([0]),minCellWidth:e,setElementWidth:g,adjustTableWidth:g,isRelative:!0,label:"none"}},sc=function(n){var t=lc(n,function(n){return parseFloat(Ui(n))}),e=lc(n,Lu),r=function(n){return n/e()*100},o=function(n,t){return[100-n]},u=function(){return xr()/e()*100},i=function(e){var r=t(),o=e/100*r,u=r+o;Ai(n,u)},c=function(t,e){return oc(t,n,e)};return{width:t,pixelWidth:e,getWidths:c,getCellDelta:r,singleColumnWidth:o,minCellWidth:u,setElementWidth:Ai,adjustTableWidth:i,isRelative:!0,label:"percent"}},mc=function(n){var t=lc(n,Lu),e=h,r=function(n,t){var e=Math.max(xr(),n+t);return[e-n]},o=function(e){var r=t()+e;Oi(n,r)},u=function(t,e){return uc(t,n,e)};return{width:t,pixelWidth:t,getWidths:u,getCellDelta:e,singleColumnWidth:r,minCellWidth:xr,setElementWidth:Oi,adjustTableWidth:o,isRelative:!1,label:"pixel"}},dc=function(n,t){var e=Ki().exec(t);return null!==e?sc(n):mc(n)},gc=function(n){var t=zi(n);return t.fold(function(){return fc(n)},function(t){return dc(n,t)})},pc={getTableSize:gc,pixelSize:mc,percentageSize:sc,noneSize:fc},vc=function(n,t,e,r,o,u){return{minRow:n,minCol:t,maxRow:e,maxCol:r,allCells:o,selectedCells:u}},bc=function(n,t){var e=n.grid.columns,r=n.grid.rows,o=r,u=e,i=0,c=0,a=[],l=[];return It(n.access,function(n){if(a.push(n),t(n)){l.push(n);var e=n.row,r=e+n.rowspan-1,f=n.column,s=f+n.colspan-1;e<o?o=e:r>i&&(i=r),f<u?u=f:s>c&&(c=s)}}),vc(o,u,i,c,a,l)},hc=function(n,t,e){var r=n[e].element,o=ht.fromTag("td");Ao(o,ht.fromTag("br"));var u=t?Ao:Oo;u(r,o)},wc=function(n,t,e,r){for(var o=t.grid.columns,u=t.grid.rows,i=0;i<u;i++)for(var c=!1,a=0;a<o;a++)if(!(i<e.minRow||i>e.maxRow||a<e.minCol||a>e.maxCol)){var l=lo.getAt(t,i,a).filter(r).isNone();l?hc(n,c,i):c=!0}},yc=function(n,t,e,r){It(e.columns,function(n){(n.column<t.minCol||n.column>t.maxCol)&&No(n.element)});var o=F(Dr(n,"tr"),function(n){return 0===n.dom.childElementCount});_(o,No),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||_(Dr(n,"th,td"),function(n){tr(n,"rowspan"),tr(n,"colspan")}),tr(n,Xr),tr(n,"data-snooker-col-series");var u=pc.getTableSize(n);u.adjustTableWidth(r)},Cc=function(n,t,e,r){if(0===r.minCol&&t.grid.columns===r.maxCol+1)return 0;var o=uc(t,n,e),u=V(o,function(n,t){return n+t},0),i=V(o.slice(r.minCol,r.maxCol+1),function(n,t){return n+t},0),c=i/u*e.pixelWidth(),a=c-e.pixelWidth();return e.getCellDelta(a)},Sc=function(n,t){var e=function(n){return wt(n.element,t)},r=Cu(n),o=Lr(r),u=pc.getTableSize(n),i=lo.generate(o),c=bc(i,e),a="th:not("+t+"),td:not("+t+")",l=Or(r,"th,td",function(n){return wt(n,a)});_(l,No),wc(o,i,c,e);var f=lo.fromTable(n),s=Cc(n,f,u,c);return yc(r,c,i,s),r},Tc="Â ",xc=function(n){return"img"===re(n)?1:jo(n).fold(function(){return ye(n).length},function(n){return n.length})},Rc=function(n){return jo(n).filter(function(n){return 0!==n.trim().length||n.indexOf(Tc)>-1}).isSome()},Dc=["img","br"],Oc=function(n){var t=Rc(n);return t||P(Dc,re(n))},Ac=function(n){return Ue(n,Oc)},kc=function(n){return Ic(n,Oc)},Ic=function(n,t){var e=function(n){for(var r=ye(n),o=r.length-1;o>=0;o--){var u=r[o];if(t(u))return k.some(u);var i=e(u);if(i.isSome())return i}return k.none()};return e(n)},Bc={scope:["row","col"]},Mc=function(n){return function(){var t=ht.fromTag("td",n.dom);return Ao(t,ht.fromTag("br",n.dom)),t}},Ec=function(n){return function(){return ht.fromTag("col",n.dom)}},Pc=function(n){return function(){return ht.fromTag("colgroup",n.dom)}},Nc=function(n){return function(){return ht.fromTag("tr",n.dom)}},zc=function(n,t,e){var r=Tu(n,t);return It(e,function(n,t){null===n?tr(r,t):Ye(r,t,n)}),r},Lc=function(n){return n},_c=function(n,t,e){var r=Ac(n);return r.map(function(r){var o=e.join(","),u=Le(r,o,function(t){return Tt(t,n)});return H(u,function(n,t){var e=yu(t);return tr(e,"contenteditable"),Ao(n,e),e},t)}).getOr(t)},Wc=function(n,t){It(Bc,function(e,r){return nr(n,r).filter(function(n){return P(e,n)}).each(function(n){return Ye(t,r,n)})})},jc=function(n,t,e){var r=function(n,t){hr(n.element,t),br(t,"height"),1!==n.colspan&&br(t,"width")},o=function(o){var u=ht.fromTag(re(o.element),t.dom),i=e.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),c=i.length>0?_c(o.element,u,i):u;return Ao(c,ht.fromTag("br")),r(o,u),Wc(o.element,u),n(o.element,u),u},u=function(e){var o=ht.fromTag(re(e.element),t.dom);return r(e,o),n(e.element,o),o};return{col:u,colgroup:Pc(t),row:Nc(t),cell:o,replace:zc,colGap:Ec(t),gap:Mc(t)}},Fc=function(n){return{col:Ec(n),colgroup:Pc(n),row:Nc(n),cell:Mc(n),replace:Lc,colGap:Ec(n),gap:Mc(n)}},Hc=function(n,t){var e=t||document,r=e.createElement("div");return r.innerHTML=n,ye(ht.fromDom(r))},Vc=function(n){return L(n,ht.fromDom)},Uc=function(n){return n.nodeName.toLowerCase()},qc=function(n){return ht.fromDom(n.getBody())},Gc=function(n){return n.getBoundingClientRect().width},$c=function(n){return n.getBoundingClientRect().height},Kc=function(n){return function(t){return Tt(t,qc(n))}},Xc=function(n){return n?n.replace(/px$/,""):""},Yc=function(n){return/^\d+(\.\d+)?$/.test(n)?n+"px":n},Jc=function(n){tr(n,"data-mce-style");var t=function(n){return tr(n,"data-mce-style")};_(Ir(n),t),_(Br(n),t),_(Er(n),t)},Qc=function(n,t){var e=n.dom.getStyle(t,"width")||n.dom.getAttrib(t,"width");return k.from(e).filter(On)},Zc=function(n){return/^(\d+(\.\d+)?)%$/.test(n)},na=function(n){return/^(\d+(\.\d+)?)px$/.test(n)},ta=function(n){return ht.fromDom(n.selection.getStart())},ea=function(n){return ht.fromDom(n.selection.getEnd())},ra=function(n){return du(n.get(),b([]),h,Q)},oa=function(n){var t=function(n,t){return nr(n,t).exists(function(n){return parseInt(n,10)>1})},e=function(n){return t(n,"rowspan")||t(n,"colspan")},r=ra(n);return r.length>0&&X(r,e)?k.some(r):k.none()},ua=function(n,t,e){return du(t.get(),k.none,function(t){return t.length<=1?k.none():lu(n,e.firstSelectedSelector,e.lastSelectedSelector).map(function(n){return{bounds:n,cells:t}})},k.none)},ia="data-mce-selected",ca="td["+ia+"],th["+ia+"]",aa="["+ia+"]",la="data-mce-first-selected",fa="td["+la+"],th["+la+"]",sa="data-mce-last-selected",ma="td["+sa+"],th["+sa+"]",da=aa,ga={selected:ia,selectedSelector:ca,firstSelected:la,firstSelectedSelector:fa,lastSelected:sa,lastSelectedSelector:ma},pa=function(n){return{element:n,mergable:k.none(),unmergable:k.none(),selection:[n]}},va=function(n,t,e){return{element:e,mergable:ua(t,n,ga),unmergable:oa(n),selection:ra(n)}},ba=function(n,t,e){return{element:n,clipboard:t,generators:e}},ha=function(n,t,e,r){return{selection:ra(n),clipboard:e,generators:r}},wa=function(n){return Mr(n).bind(function(n){return au(n,ga.firstSelectedSelector)}).fold(b(n),function(n){return n[0]})},ya=function(n){return function(t,e){var r=re(t),o="col"===r||"colgroup"===r?wa(t):t;return Ke(o,n,e)}},Ca=ya("th,td,caption"),Sa=ya("th,td"),Ta=function(n){return ra(n)},xa=function(n,t){var e=Sa(n),r=e.bind(function(n){return Mr(n)}).map(function(n){return Er(n)});return ur(e,r,function(n,e){return F(e,function(e){return N(Vc(e.dom.cells),function(e){return"1"===Ze(e,t)||Tt(e,n)})})}).getOr([])},Ra=function(n){return Mr(n[0]).map(function(n){var t=Sc(n,da);return Jc(t),[t]})},Da=function(n,t){return L(t,function(t){return n.selection.serializer.serialize(t.dom,{})}).join("")},Oa=function(n){return L(n,function(n){return n.dom.innerText}).join("")},Aa=function(n,t,e){n.on("BeforeGetContent",function(e){var r=function(t){e.preventDefault(),Ra(t).each(function(t){e.content="text"===e.format?Oa(t):Da(n,t)})};!0===e.selection&&du(t.get(),g,r,g)}),n.on("BeforeSetContent",function(r){if(!0===r.selection&&!0===r.paste){var o=Ta(t);tn(o).each(function(t){Mr(t).each(function(o){var u=F(Hc(r.content),function(n){return"meta"!==re(n)}),i=se("table");if(1===u.length&&i(u[0])){r.preventDefault();var c=ht.fromDom(n.getDoc()),a=Fc(c),l=ba(t,u[0],a);e.pasteCells(o,l).each(function(){n.focus()})}})})}})},ka=su.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Ia=on({},ka),Ba=function(n,t){return 0===n.length?Ia.none():1===n.length?Ia.only(0):0===t?Ia.left(0,1):t===n.length-1?Ia.right(t-1,t):t>0&&t<n.length-1?Ia.middle(t-1,t,t+1):Ia.none()},Ma=function(n,t,e,r,o){var u=n.slice(0),i=Ba(n,t),c=b(L(u,b(0))),a=function(n){return r.singleColumnWidth(u[n],e)},l=function(n,t){return o.calcLeftEdgeDeltas(u,n,t,e,r.minCellWidth(),r.isRelative)},f=function(n,t,i){return o.calcMiddleDeltas(u,n,t,i,e,r.minCellWidth(),r.isRelative)},s=function(n,t){return o.calcRightEdgeDeltas(u,n,t,e,r.minCellWidth(),r.isRelative)};return i.fold(c,a,l,f,s)},Ea=function(n,t,e){for(var r=0,o=n;o<t;o++)r+=void 0!==e[o]?e[o]:0;return r},Pa=function(n,t){var e=lo.justCells(n);return L(e,function(n){var e=Ea(n.column,n.column+n.colspan,t);return{element:n.element,width:e,colspan:n.colspan}})},Na=function(n,t){var e=lo.justColumns(n);return L(e,function(n,e){return{element:n.element,width:t[e],colspan:n.colspan}})},za=function(n,t){var e=lo.justCells(n);return L(e,function(n){var e=Ea(n.row,n.row+n.rowspan,t);return{element:n.element,height:e,rowspan:n.rowspan}})},La=function(n,t){return L(n.all,function(n,e){return{element:n.element,height:t[e]}})},_a=function(n){return H(n,function(n,t){return n+t},0)},Wa=function(n,t){return lo.hasColumns(n)?Na(n,t):Pa(n,t)},ja=function(n,t,e){var r=Wa(n,t);_(r,function(n){e.setElementWidth(n.element,n.width)})},Fa=function(n,t,e,r,o){var u=lo.fromTable(n),i=o.getCellDelta(t),c=o.getWidths(u,o),a=e===u.grid.columns-1,l=r.clampTableDelta(c,e,i,o.minCellWidth(),a),f=Ma(c,e,l,o,r),s=L(f,function(n,t){return n+c[t]});ja(u,s,o),r.resizeTable(o.adjustTableWidth,l,a)},Ha=function(n,t,e,r){var o=lo.fromTable(n),u=cc(o,n,r),i=L(u,function(n,r){return e===r?Math.max(t+n,Rr()):n}),c=za(o,i),a=La(o,i);_(a,function(n){ki(n.element,n.height)}),_(c,function(n){ki(n.element,n.height)});var l=_a(i);ki(n,l)},Va=function(n,t,e,r,o){var u=lo.generate(t),i=r.getWidths(u,r),c=r.pixelWidth(),a=o.calcRedestributedWidths(i,c,e.pixelDelta,r.isRelative),l=a.newSizes,f=a.delta;ja(u,l,r),r.adjustTableWidth(f)},Ua=function(n,t,e,r){var o=lo.generate(t),u=r.getWidths(o,r);ja(o,u,r)},qa=function(n){return L(n,b(0))},Ga=function(n,t,e,r,o){return o(n.slice(0,t)).concat(r).concat(o(n.slice(e)))},$a=function(n){return function(t,e,r,o){if(n(r)){var u=Math.max(o,t[e]-Math.abs(r)),i=Math.abs(u-t[e]);return r>=0?i:-i}return r}},Ka=$a(function(n){return n<0}),Xa=$a(x),Ya=function(){var n=function(n,t,e,r,o){var u=Ka(n,t,r,o);return Ga(n,t,e+1,[u,0],qa)},t=function(n,t,e,r){var o=(100+e)/100,u=Math.max(r,(n[t]+e)/o);return L(n,function(n,e){var r=e===t?u:n/o;return r-n})},e=function(e,r,o,u,i,c){return c?t(e,r,u,i):n(e,r,o,u,i)},r=function(n,t,r,o,u,i,c){return e(n,r,o,u,i,c)},o=function(n,t){return n(t)},u=function(n,e,r,o,u,i){if(i)return t(n,r,o,u);var c=Ka(n,r,o,u);return qa(n.slice(0,r)).concat([c])},i=function(n,t,e,r){if(r){var o=t+e,u=o/t,i=L(n,function(n){return n/u});return{delta:100*u-100,newSizes:i}}return{delta:e,newSizes:n}};return{resizeTable:o,clampTableDelta:Ka,calcLeftEdgeDeltas:e,calcMiddleDeltas:r,calcRightEdgeDeltas:u,calcRedestributedWidths:i}},Ja=function(){var n=function(n,t,e,r,o){var u=r>=0?e:t,i=Xa(n,u,r,o);return Ga(n,t,e+1,[i,-i],qa)},t=function(t,e,r,o,u,i){return n(t,r,o,u,i)},e=function(n,t,e){e&&n(t)},r=function(n,t,e,r,o,u){if(u)return qa(n);var i=r/n.length;return L(n,b(i))},o=function(n,t,e,r,o){if(o){if(e>=0)return e;var u=V(n,function(n,t){return n+t-r},0);return Math.max(-u,e)}return Ka(n,t,e,r)},u=function(n,t,e,r){return{delta:0,newSizes:n}};return{resizeTable:e,clampTableDelta:o,calcLeftEdgeDeltas:n,calcMiddleDeltas:t,calcRightEdgeDeltas:r,calcRedestributedWidths:u}},Qa=function(n,t){var e=k.from(n.dom.documentElement).map(ht.fromDom).getOr(n);return{parent:b(e),view:b(n),origin:b(Qu(0,0)),isResizable:t}},Za=function(n,t,e){var r=function(){return ti(t)};return{parent:b(t),view:b(n),origin:r,isResizable:e}},nl=function(n,t,e){return{parent:b(t),view:b(n),origin:b(Qu(0,0)),isResizable:e}},tl={only:Qa,detached:Za,body:nl},el=su.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),rl=function(n,t,e){var r=e.substring(0,e.length-n.length),o=parseFloat(r);return r===o.toString()?t(o):el.invalid(e)},ol=function(n){return xn(n,"%")?rl("%",el.percent,n):xn(n,"px")?rl("px",el.pixels,n):el.invalid(n)},ul=on(on({},el),{from:ol}),il=function(n,t){return L(n,function(n){var e=ul.from(n);return e.fold(function(){return n},function(n){var e=n/t*100;return e+"%"},function(n){return n+"%"})})},cl=function(n,t,e){var r=e/t;return L(n,function(n){var t=ul.from(n);return t.fold(function(){return n},function(n){return n*r+"px"},function(n){return n/100*e+"px"})})},al=function(n,t){var e=n.fold(function(){return b("")},function(n){var e=n/t;return b(e+"px")},function(){var n=100/t;return b(n+"%")});return z(t,e)},ll=function(n,t,e){return n.fold(function(){return t},function(n){return cl(t,e,n)},function(n){return il(t,e)})},fl=function(n,t,e){var r=ul.from(e),o=X(n,function(n){return"0px"===n})?al(r,n.length):ll(r,n,t);return gl(o)},sl=function(n,t){return 0===n.length?t:H(n,function(n,t){return ul.from(t).fold(b(0),h,h)+n},0)},ml=function(n,t){var e=Math.floor(n);return{value:e+t,remainder:n-e}},dl=function(n,t){return ul.from(n).fold(b(n),function(n){return n+t+"px"},function(n){return n+t+"%"})},gl=function(n){if(0===n.length)return n;var t=H(n,function(n,t){var e=ul.from(t).fold(function(){return{value:t,remainder:0}},function(n){return ml(n,"px")},function(n){return{value:n+"%",remainder:0}});return{output:[e.value].concat(n.output),remainder:n.remainder+e.remainder}},{output:[],remainder:0}),e=t.output;return e.slice(0,e.length-1).concat([dl(e[e.length-1],Math.round(t.remainder))])},pl=ul.from,vl=function(n,t,e){_(t,function(t){var r=n.slice(t.column,t.colspan+t.column),o=sl(r,xr());mr(t.element,"width",o+e)})},bl=function(n,t,e){_(t,function(t,r){var o=sl([n[r]],xr());mr(t.element,"width",o+e)})},hl=function(n,t,e,r){_(e,function(t){var e=n.slice(t.row,t.rowspan+t.row),o=sl(e,Rr());mr(t.element,"height",o+r)}),_(t,function(t,e){mr(t.element,"height",n[e])})},wl=function(n){return pl(n).fold(b("px"),b("px"),b("%"))},yl=function(n,t,e){var r=lo.fromTable(n),o=r.all,u=lo.justCells(r),i=lo.justColumns(r);t.each(function(t){var e=wl(t),o=Lu(n),c=rc(r,n),a=fl(c,o,t);lo.hasColumns(r)?bl(a,i,e):vl(a,u,e),mr(n,"width",t)}),e.each(function(t){var e=wl(t),i=Ku(n),c=ac(r,n,gi),a=fl(c,i,t);hl(a,o,u,e),mr(n,"height",t)})},Cl=qi,Sl=Gi,Tl=$i,xl=function(n){var t=lo.fromTable(n);return t.grid},Rl=function(n){var t=[],e=function(n){if(void 0===n)throw new Error("Event bind error: undefined handler");t.push(n)},r=function(n){t=F(t,function(t){return t!==n})},o=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o={};_(n,function(n,t){o[n]=e[t]}),_(t,function(n){n(o)})};return{bind:e,unbind:r,trigger:o}},Dl=function(n){var t=Bt(n,function(n){return{bind:n.bind,unbind:n.unbind}}),e=Bt(n,function(n){return n.trigger});return{registry:t,trigger:e}},Ol=function(n,t){var e=null,r=function(){c(e)||(clearTimeout(e),e=null)},o=function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];r(),e=setTimeout(function(){e=null,n.apply(null,o)},t)};return{cancel:r,throttle:o}},Al=function(n){return n.slice(0).sort()},kl=function(n,t){throw new Error("All required keys ("+Al(n).join(", ")+") were not specified. Specified keys were: "+Al(t).join(", ")+".")},Il=function(n){throw new Error("Unsupported keys for object: "+Al(n).join(", "))},Bl=function(n,t){if(!i(t))throw new Error("The "+n+" fields must be an array. Was: "+t+".");_(t,function(t){if(!o(t))throw new Error("The value "+t+" in the "+n+" fields was not a string.")})},Ml=function(n,t){throw new Error("All values need to be of type: "+t+". Keys ("+Al(n).join(", ")+") were not.")},El=function(n){var t=Al(n),e=q(t,function(n,e){return e<t.length-1&&n===t[e+1]});e.each(function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})},Pl=function(n,t){return Nl(n,t,{validate:m,label:"function"})},Nl=function(n,t,e){if(0===t.length)throw new Error("You must specify at least one required field.");return Bl("required",t),El(t),function(r){var o=At(r),u=X(t,function(n){return P(o,n)});u||kl(t,o),n(t,o);var i=F(t,function(n){return!e.validate(r[n],n)});return i.length>0&&Ml(i,e.label),r}},zl=function(n,t){var e=F(t,function(t){return!P(n,t)});e.length>0&&Il(e)},Ll=function(n){return Pl(zl,n)},_l=Ll(["compare","extract","mutate","sink"]),Wl=Ll(["element","start","stop","destroy"]),jl=Ll(["forceDrop","drop","move","delayDrop"]),Fl=function(){var n=k.none(),t=function(){n=k.none()},e=function(t,e){var r=n.map(function(n){return t.compare(n,e)});return n=k.some(e),r},r=function(n,t){var r=t.extract(n);r.each(function(n){var r=e(t,n);r.each(function(n){o.trigger.move(n)})})},o=Dl({move:Rl(["info"])});return{onEvent:r,reset:t,events:o.registry}},Hl=function(){var n=Dl({move:Rl(["info"])});return{onEvent:g,reset:g,events:n.registry}},Vl=function(){var n=Hl(),t=Fl(),e=n,r=function(){e.reset(),e=t},o=function(){e.reset(),e=n},u=function(n,t){e.onEvent(n,t)},i=function(){return e===t};return{on:r,off:o,isOn:i,onEvent:u,events:t.events}},Ul=function(n,t,e){var r=!1,o=Dl({start:Rl([]),stop:Rl([])}),u=Vl(),i=function(){d.stop(),u.isOn()&&(u.off(),o.trigger.stop())},c=Ol(i,200),a=function(n){d.start(n),u.on(),o.trigger.start()},l=function(n){c.cancel(),u.onEvent(n,t)};u.events.move.bind(function(e){t.mutate(n,e.info)});var f=function(){r=!0},s=function(){r=!1},m=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r&&n.apply(null,t)}},d=t.sink(jl({forceDrop:i,drop:m(i),move:m(l),delayDrop:m(c.throttle)}),e),g=function(){d.destroy()};return{element:d.element,go:a,on:f,off:s,destroy:g,events:o.registry}},ql=function(n,t,e,r,o,u,i){return{target:n,x:t,y:e,stop:r,prevent:o,kill:u,raw:i}},Gl=function(n){var t=ht.fromDom(ke(n).getOr(n.target)),e=function(){return n.stopPropagation()},r=function(){return n.preventDefault()},o=p(r,e);return ql(t,n.clientX,n.clientY,e,r,o,n)},$l=function(n,t){return function(e){n(e)&&t(Gl(e))}},Kl=function(n,t,e,r,o){var u=$l(e,r);return n.dom.addEventListener(t,u,o),{unbind:y(Yl,n,t,u,o)}},Xl=function(n,t,e,r){return Kl(n,t,e,r,!1)},Yl=function(n,t,e,r){n.dom.removeEventListener(t,e,r)},Jl=x,Ql=function(n,t,e){return Xl(n,t,Jl,e)},Zl=Gl,nf=function(n,t){var e=Ze(n,t);return void 0===e||""===e?[]:e.split(" ")},tf=function(n,t,e){var r=nf(n,t),o=r.concat([e]);return Ye(n,t,o.join(" ")),!0},ef=function(n,t,e){var r=F(nf(n,t),function(n){return n!==e});return r.length>0?Ye(n,t,r.join(" ")):tr(n,t),!1},rf=function(n){return void 0!==n.dom.classList},of=function(n){return nf(n,"class")},uf=function(n,t){return tf(n,"class",t)},cf=function(n,t){return ef(n,"class",t)},af=function(n,t){rf(n)?n.dom.classList.add(t):uf(n,t)},lf=function(n){var t=rf(n)?n.dom.classList:of(n);0===t.length&&tr(n,"class")},ff=function(n,t){if(rf(n)){var e=n.dom.classList;e.remove(t)}else cf(n,t);lf(n)},sf=function(n,t){return rf(n)&&n.dom.classList.contains(t)},mf=function(n){var t=n.replace(/\./g,"-"),e=function(n){return t+"-"+n};return{resolve:e}},df=mf("ephox-dragster"),gf=df.resolve,pf=function(n){var t=on({layerClass:gf("blocker")},n),e=ht.fromTag("div");Ye(e,"role","presentation"),dr(e,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),af(e,gf("blocker")),af(e,t.layerClass);var r=b(e),o=function(){No(e)};return{element:r,destroy:o}},vf=function(n,t){return Qu(t.left-n.left,t.top-n.top)},bf=function(n){return k.some(Qu(n.x,n.y))},hf=function(n,t){n.mutate(t.left,t.top)},wf=function(n,t){var e=pf(t),r=Ql(e.element(),"mousedown",n.forceDrop),o=Ql(e.element(),"mouseup",n.drop),u=Ql(e.element(),"mousemove",n.move),i=Ql(e.element(),"mouseout",n.delayDrop),c=function(){e.destroy(),o.unbind(),u.unbind(),i.unbind(),r.unbind()},a=function(n){Ao(n,e.element())},l=function(){No(e.element())};return Wl({element:e.element,start:a,stop:l,destroy:c})},yf=_l({compare:vf,extract:bf,sink:wf,mutate:hf}),Cf=function(n,t){void 0===t&&(t={});var e=void 0!==t.mode?t.mode:yf;return Ul(n,e,t)},Sf=function(n){return Ke(n,"[contenteditable]")},Tf=function(n,t){return void 0===t&&(t=!1),!ut().browser.isIE()&&Be(n)?n.dom.isContentEditable:Sf(n).fold(b(t),function(n){return"true"===xf(n)})},xf=function(n){return n.dom.contentEditable},Rf=mf("ephox-snooker"),Df=Rf.resolve,Of=function(){var n=Dl({drag:Rl(["xDelta","yDelta"])}),t=function(t,e){n.trigger.drag(t,e)};return{mutate:t,events:n.registry}},Af=function(){var n=Dl({drag:Rl(["xDelta","yDelta","target"])}),t=k.none(),e=Of();e.events.drag.bind(function(e){t.each(function(t){n.trigger.drag(e.xDelta,e.yDelta,t)})});var r=function(n){t=k.some(n)},o=function(){return t};return{assign:r,get:o,mutate:e.mutate,events:n.registry}},kf=function(n,t,e,r,o){var u=ht.fromTag("div");return dr(u,{position:"absolute",left:t-r/2+"px",top:e+"px",height:o+"px",width:r+"px"}),Je(u,{"data-column":n,role:"presentation"}),u},If=function(n,t,e,r,o){var u=ht.fromTag("div");return dr(u,{position:"absolute",left:t+"px",top:e-o/2+"px",height:o+"px",width:r+"px"}),Je(u,{"data-row":n,role:"presentation"}),u},Bf=Df("resizer-bar"),Mf=Df("resizer-rows"),Ef=Df("resizer-cols"),Pf=7,Nf=function(n,t){return K(n.all,function(n,e){return t(n.element)?[e]:[]})},zf=function(n,t){var e=[];return z(n.grid.columns,function(r){var o=lo.getColumnAt(n,r).map(function(n){return n.element});o.forall(t)&&e.push(r)}),F(e,function(e){var r=lo.filterItems(n,function(n){return n.column===e});return X(r,function(n){return t(n.element)})})},Lf=function(n){var t=We(n.parent(),"."+Bf);_(t,No)},_f=function(n,t,e){var r=n.origin();_(t,function(t){t.each(function(t){var o=e(r,t);af(o,Bf),Ao(n.parent(),o)})})},Wf=function(n,t,e,r){_f(n,t,function(n,t){var o=kf(t.col,t.x-n.left,e.top-n.top,Pf,r);return af(o,Ef),o})},jf=function(n,t,e,r){_f(n,t,function(n,t){var o=If(t.row,e.left-n.left,t.y-n.top,r,Pf);return af(o,Mf),o})},Ff=function(n,t,e,r,o){var u=ti(e),i=t.isResizable,c=r.length>0?gi.positions(r,e):[],a=c.length>0?Nf(n,i):[],l=F(c,function(n,t){return N(a,function(n){return t===n})});jf(t,l,u,_u(e));var f=o.length>0?hi.positions(o,e):[],s=f.length>0?zf(n,i):[],m=F(f,function(n,t){return N(s,function(n){return t===n})});Wf(t,m,u,Xu(e))},Hf=function(n,t){if(Lf(n),n.isResizable(t)){var e=lo.fromTable(t),r=Vu(e),o=Fu(e);Ff(e,n,t,r,o)}},Vf=function(n,t){var e=We(n.parent(),"."+Bf);_(e,t)},Uf=function(n){Vf(n,function(n){mr(n,"display","none")})},qf=function(n){Vf(n,function(n){mr(n,"display","block")})},Gf=function(n){return sf(n,Mf)},$f=function(n){return sf(n,Ef)},Kf=Df("resizer-bar-dragging"),Xf=function(n){var t=Af(),e=Cf(t,{}),r=k.none(),o=function(n,t){return k.from(Ze(n,t))};t.events.drag.bind(function(n){o(n.target,"data-row").each(function(t){var e=Tr(n.target,"top");mr(n.target,"top",e+n.yDelta+"px")}),o(n.target,"data-column").each(function(t){var e=Tr(n.target,"left");mr(n.target,"left",e+n.xDelta+"px")})});var u=function(n,t){var e=Tr(n,t),r=wr(n,"data-initial-"+t,0);return e-r};e.events.stop.bind(function(){t.get().each(function(t){r.each(function(e){o(t,"data-row").each(function(n){var r=u(t,"top");tr(t,"data-initial-top"),d.trigger.adjustHeight(e,r,parseInt(n,10))}),o(t,"data-column").each(function(n){var r=u(t,"left");tr(t,"data-initial-left"),d.trigger.adjustWidth(e,r,parseInt(n,10))}),Hf(n,e)})})});var i=function(r,o){d.trigger.startAdjust(),t.assign(r),Ye(r,"data-initial-"+o,Tr(r,o)),af(r,Kf),mr(r,"opacity","0.2"),e.go(n.parent())},c=Ql(n.parent(),"mousedown",function(n){Gf(n.target)&&i(n.target,"top"),$f(n.target)&&i(n.target,"left")}),a=function(t){return Tt(t,n.view())},l=function(n){return Ke(n,"table",a).filter(Tf)},f=Ql(n.view(),"mouseover",function(t){l(t.target).fold(function(){Be(t.target)&&Lf(n)},function(t){r=k.some(t),Hf(n,t)})}),s=function(){c.unbind(),f.unbind(),e.destroy(),Lf(n)},m=function(t){Hf(n,t)},d=Dl({adjustHeight:Rl(["table","delta","row"]),adjustWidth:Rl(["table","delta","column"]),startAdjust:Rl([])});return{destroy:s,refresh:m,on:e.on,off:e.off,hideBars:y(Uf,n),showBars:y(qf,n),events:d.registry}},Yf=function(n,t,e){var r=gi,o=hi,u=Xf(n),i=Dl({beforeResize:Rl(["table","type"]),afterResize:Rl(["table","type"]),startDrag:Rl([])});return u.events.adjustHeight.bind(function(n){var t=n.table;i.trigger.beforeResize(t,"row");var e=r.delta(n.delta,t);Ha(t,e,n.row,r),i.trigger.afterResize(t,"row")}),u.events.startAdjust.bind(function(n){i.trigger.startDrag()}),u.events.adjustWidth.bind(function(n){var r=n.table;i.trigger.beforeResize(r,"col");var u=o.delta(n.delta,r),c=e(r);Fa(r,u,n.column,t,c),i.trigger.afterResize(r,"col")}),{on:u.on,off:u.off,hideBars:u.hideBars,showBars:u.showBars,destroy:u.destroy,events:i.registry}},Jf={create:Yf},Qf=function(n,t){return n.fire("newrow",{node:t})},Zf=function(n,t){return n.fire("newcell",{node:t})},ns=function(n,t,e,r,o){n.fire("ObjectResizeStart",{target:t,width:e,height:r,origin:o})},ts=function(n,t,e,r,o){n.fire("ObjectResized",{target:t,width:e,height:r,origin:o})},es=function(n,t,e,r,o){n.fire("TableSelectionChange",{cells:t,start:e,finish:r,otherCells:o})},rs=function(n){n.fire("TableSelectionClear")},os=function(n,t,e){n.fire("TableModified",on(on({},e),{table:t}))},us={structure:!1,style:!0},is={structure:!0,style:!1},cs={structure:!0,style:!0},as="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",ls={"border-collapse":"collapse",width:"100%"},fs=z(5,function(n){var t=n+1+"px";return{title:t,value:t}}),ss=L(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],function(n){return{title:n,value:n.toLowerCase()}}),ms=function(n){var t;if(Es(n)){var e=n.dom,r=null!==(t=e.getParent(n.selection.getStart(),e.isBlock))&&void 0!==t?t:n.getBody(),o=Wu(ht.fromDom(r));return on(on({},ls),{width:o+"px"})}return Ps(n)?Nt(ls,function(n,t){return"width"!==t}):ls},ds={border:"1"},gs="preservetable",ps=function(n){return n.getParam("table_sizing_mode","auto")},vs=function(n){return n.getParam("table_responsive_width")},bs=function(n){return n.getParam("table_border_widths",fs,"array")},hs=function(n){return n.getParam("table_border_styles",ss,"array")},ws=function(n){return n.getParam("table_default_attributes",ds,"object")},ys=function(n){return n.getParam("table_default_styles",ms(n),"object")},Cs=function(n){return n.getParam("table_resize_bars",!0,"boolean")},Ss=function(n){return n.getParam("table_tab_navigation",!0,"boolean")},Ts=function(n){return n.getParam("table_cell_advtab",!0,"boolean")},xs=function(n){return n.getParam("table_row_advtab",!0,"boolean")},Rs=function(n){return n.getParam("table_advtab",!0,"boolean")},Ds=function(n){return n.getParam("table_appearance_options",!0,"boolean")},Os=function(n){return n.getParam("table_grid",!0,"boolean")},As=function(n){return n.getParam("table_style_by_css",!1,"boolean")},ks=function(n){return n.getParam("table_cell_class_list",[],"array")},Is=function(n){return n.getParam("table_row_class_list",[],"array")},Bs=function(n){return n.getParam("table_class_list",[],"array")},Ms=function(n){return"relative"===ps(n)||!0===vs(n)},Es=function(n){return"fixed"===ps(n)||!1===vs(n)},Ps=function(n){return"responsive"===ps(n)},Ns=function(n){return n.getParam("table_toolbar",as)},zs=function(n){return n.getParam("table_use_colgroups",!1,"boolean")},Ls=function(n){var t="section",e=n.getParam("table_header_type",t,"string"),r=["section","cells","sectionCells","auto"];return P(r,e)?e:t},_s=function(n){var t=["preservetable","resizetable"],e=n.getParam("table_column_resizing",gs,"string");return q(t,function(n){return n===e}).getOr(gs)},Ws=function(n){return"preservetable"===_s(n)},js=function(n){return"resizetable"===_s(n)},Fs=function(n){var t=n.getParam("table_clone_elements");return o(t)?k.some(t.split(/[ ,]/)):Array.isArray(t)?k.some(t):k.none()},Hs=function(n){var t=n.getParam("object_resizing",!0);return o(t)?"table"===t:t},Vs=function(n){return n.getParam("table_background_color_map",[],"array")},Us=function(n){return n.getParam("table_border_color_map",[],"array")},qs=function(n,t){return Ms(n)?pc.percentageSize(t):Es(n)?pc.pixelSize(t):pc.getTableSize(t)},Gs=function(n){tr(n,"width")},$s=function(n){var t=Ui(n);yl(n,k.some(t),k.none()),Gs(n)},Ks=function(n){var t=Vi(n);yl(n,k.some(t),k.none()),Gs(n)},Xs=function(n){br(n,"width");var t=Br(n),e=t.length>0?t:Ir(n);_(e,function(n){br(n,"width"),Gs(n)}),Gs(n)},Ys=$s,Js=Ks,Qs=Xs,Zs=function(n){var t=lo.fromTable(n);lo.hasColumns(t)||_(Ir(n),function(n){var t=gr(n,"width");mr(n,"width",t),tr(n,"width")})},nm=function(){var n=ht.fromTag("div");return dr(n,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Ao(Me(),n),n},tm=function(n,t){return n.inline?tl.body(qc(n),nm(),t):tl.only(ht.fromDom(n.getDoc()),t)},em=function(n,t){n.inline&&No(t.parent())},rm="bar-",om=function(n){return"false"!==Ze(n,"data-mce-resize")},um=function(n){var t,e,r=k.none(),o=k.none(),u=k.none(),i=function(n){return"TABLE"===n.nodeName},c=function(){return o},a=function(){return u.getOr(tl.only(ht.fromDom(n.getBody()),om))},l=function(t){return qs(n,t)},f=function(){return Ws(n)?Ja():Ya()},s=function(n){return xl(n).columns},m=function(r,o,u){var i=xn(o,"e");if(""===e&&Ys(r),u!==t&&""!==e){mr(r,"width",e);var c=f(),a=l(r),m=Ws(n)||i?s(r)-1:0;Fa(r,u-t,m,c,a)}else if(Zc(e)){var d=parseFloat(e.replace("%","")),g=u*d/t;mr(r,"width",g+"%")}na(e)&&Zs(r)},d=function(){o.each(function(n){n.destroy()}),u.each(function(t){em(n,t)})};return n.on("init",function(){var t=tm(n,om);if(u=k.some(t),Hs(n)&&Cs(n)){var e=f(),i=Jf.create(t,e,l);i.on(),i.events.startDrag.bind(function(t){r=k.some(n.selection.getRng())}),i.events.beforeResize.bind(function(t){var e=t.table.dom;ns(n,e,Gc(e),$c(e),rm+t.type)}),i.events.afterResize.bind(function(t){var e=t.table,o=e.dom;Jc(e),r.each(function(t){n.selection.setRng(t),n.focus()}),ts(n,o,Gc(o),$c(o),rm+t.type),n.undoManager.add()}),o=k.some(i)}}),n.on("ObjectResizeStart",function(r){var o=r.target;if(i(o)){var u=ht.fromDom(o);_(n.dom.select(".mce-clonedresizable"),function(t){n.dom.addClass(t,"mce-"+_s(n)+"-columns")}),!Sl(u)&&Es(n)?Js(u):!Cl(u)&&Ms(n)&&Ys(u),Tl(u)&&Tn(r.origin,rm)&&Ys(u),t=r.width,e=Ps(n)?"":Qc(n,o).getOr("")}}),n.on("ObjectResized",function(t){var e=t.target;if(i(e)){var r=ht.fromDom(e),o=t.origin;Tn(o,"corner-")&&m(r,o,t.width),Jc(r),os(n,r.dom,us)}}),n.on("SwitchMode",function(){c().each(function(t){n.mode.isReadOnly()?t.hideBars():t.showBars()})}),{lazyResize:c,lazyWire:a,destroy:d}},im=function(n,t){return{element:n,offset:t}},cm=function(n,t,e){return n.property().isText(t)&&0===n.property().getText(t).trim().length||n.property().isComment(t)?e(t).bind(function(t){return cm(n,t,e).orThunk(function(){return k.some(t)})}):k.none()},am=function(n,t){if(n.property().isText(t))return n.property().getText(t).length;var e=n.property().children(t);return e.length},lm=function(n,t){var e=cm(n,t,n.query().prevSibling).getOr(t);if(n.property().isText(e))return im(e,am(n,e));var r=n.property().children(e);return r.length>0?lm(n,r[r.length-1]):im(e,am(n,e))},fm=lm,sm=Vo(),mm=function(n){return fm(sm,n)},dm=function(n,t){var e=yr(n,"colspan");if(1===e){var r=Fi(n);r.each(function(e){var r=e.value/2;Hi(n,r,e.unit),Hi(t,r,e.unit)})}},gm=se("th"),pm=function(n){return X(n,function(n){return gm(n.element)})},vm=function(n,t){return n&&t?"sectionCells":n?"section":"cells"},bm=function(n){var t="thead"===n.section,e=rr(hm(n.cells),"th");return t||e?{type:"header",subType:vm(t,e)}:"tfoot"===n.section?{type:"footer"}:{type:"body"}},hm=function(n){var t=F(n,function(n){return gm(n.element)});return 0===t.length?k.some("td"):t.length===n.length?k.some("th"):k.none()},wm=function(n){var t=L(n,function(n){return bm(n).type}),e=P(t,"header"),r=P(t,"footer");if(e||r){var o=P(t,"body");return!e||o||r?e||o||!r?k.none():k.some("footer"):k.some("header")}return k.some("body")},ym=function(n){return rn(n.all,function(n){var t=bm(n);return"header"===t.type?k.from(t.subType):k.none()})},Cm=function(n,t,e){return Qt(e(n.element,t),!0,n.isLocked)},Sm=function(n,t){return n.section!==t?Zt(n.element,n.cells,t,n.isNew):n},Tm=function(){return{transformRow:Sm,transformCell:function(n,t,e){var r=e(n.element,t),o="td"!==re(r)?xu(r,"td"):r;return Qt(o,n.isNew,n.isLocked)}}},xm=function(){return{transformRow:Sm,transformCell:Cm}},Rm=function(){return{transformRow:function(n,t){var e="thead"===t?"tbody":t;return Sm(n,e)},transformCell:Cm}},Dm=function(){return{transformRow:h,transformCell:Cm}},Om=function(n,t){var e=lo.fromTable(n),r=ym(e).getOr(t);switch(r){case"section":return Tm();case"sectionCells":return xm();case"cells":return Rm()}},Am={getTableSectionType:Om,section:Tm,sectionCells:xm,cells:Rm,fallback:Dm},km=function(n,t,e,r){e===r?tr(n,t):Ye(n,t,e)},Im=function(n,t,e){en(_e(n,t)).fold(function(){return Oo(n,e)},function(n){return Do(n,e)})},Bm=function(n,t){var e=Ge(n,t).getOrThunk(function(){var e=ht.fromTag(t,me(n).dom);return"thead"===t?Im(n,"caption,colgroup",e):"colgroup"===t?Im(n,"caption",e):Ao(n,e),e});return Po(e),e},Mm=function(n,t){var e=[],r=[],o=function(n){return L(n,function(n){n.isNew&&e.push(n.element);var t=n.element;return Po(t),_(n.cells,function(n){n.isNew&&r.push(n.element),km(n.element,"colspan",n.colspan,1),km(n.element,"rowspan",n.rowspan,1),Ao(t,n.element)}),t})},u=function(n){return K(n,function(n){return L(n.cells,function(n){return km(n.element,"span",n.colspan,1),n.element})})},i=function(t,e){var r=Bm(n,e),i="colgroup"===e?u:o,c=i(t);Eo(r,c)},c=function(t){Ge(n,t).each(No)},a=function(n,t){n.length>0?i(n,t):c(t)},l=[],f=[],s=[],m=[];return _(t,function(n){switch(n.section){case"thead":l.push(n);break;case"tbody":f.push(n);break;case"tfoot":s.push(n);break;case"colgroup":m.push(n);break}}),a(m,"colgroup"),a(l,"thead"),a(f,"tbody"),a(s,"tfoot"),{newRows:e,newCells:r}},Em=function(n){return L(n,function(n){var t=yu(n.element);return _(n.cells,function(n){var e=Cu(n.element);km(e,"colspan",n.colspan,1),km(e,"rowspan",n.rowspan,1),Ao(t,e)}),t})},Pm=function(n,t){return L(n,function(n){return Ur(n,t)})},Nm=function(n,t){return n[t]},zm=function(n,t){if(0===n.length)return 0;var e=n[0],r=G(n,function(n){return!t(e.element,n.element)});return r.getOr(n.length)},Lm=function(n,t,e,r){var o=Nm(n,t),u="colgroup"===o.section,i=zm(o.cells.slice(e),r),c=u?1:zm(Pm(n.slice(t),e),r);return{colspan:i,rowspan:c}},_m=function(n,t){var e=L(n,function(n){return L(n.cells,T)}),r=function(n,t,r,o){for(var u=n;u<n+r;u++)for(var i=t;i<t+o;i++)e[u][i]=!0};return L(n,function(o,u){var i=K(o.cells,function(o,i){if(!1===e[u][i]){var c=Lm(n,u,i,t);return r(u,i,c.rowspan,c.colspan),[Kt(o.element,c.rowspan,c.colspan,o.isNew)]}return[]});return Jt(o.element,i,o.section,o.isNew)})},Wm=function(n,t,e){var r=[];_(n.colgroups,function(o){for(var u=[],i=0;i<n.grid.columns;i++){var c=lo.getColumnAt(n,i).map(function(n){return Qt(n.element,e,!1)}).getOrThunk(function(){return Qt(t.colGap(),!0,!1)});u.push(c)}r.push(Zt(o.element,u,"colgroup",e))});for(var o=0;o<n.grid.rows;o++){for(var u=[],i=0;i<n.grid.columns;i++){var c=lo.getAt(n,o,i).map(function(n){return Qt(n.element,e,n.isLocked)}).getOrThunk(function(){return Qt(t.gap(),!0,!1)});u.push(c)}var a=n.all[o],l=Zt(a.element,u,a.section,e);r.push(l)}return r},jm=function(n,t){return Wm(n,t,!1)},Fm=function(n){return _m(n,Tt)},Hm=function(n,t){return rn(n.all,function(n){return q(n.cells,function(n){return Tt(t,n.element)})})},Vm=function(n,t,e){var r=L(t.selection,function(t){return kr(t).bind(function(t){return Hm(n,t)}).filter(e)}),o=or(r);return ar(o.length>0,o)},Um=function(n,t,e,r,o){return function(u,i,c,a,l){var f=lo.fromTable(i),s=k.from(null===l||void 0===l?void 0:l.section).getOrThunk(Am.fallback),m=t(f,c).map(function(t){var e=jm(f,a),r=n(e,t,Tt,o(a),s),u=Jr(r.grid),i=Fm(r.grid);return{info:t,grid:i,cursor:r.cursor,lockedColumns:u}});return m.bind(function(n){var t=Mm(i,n.grid),o=k.from(null===l||void 0===l?void 0:l.sizing).getOrThunk(function(){return pc.getTableSize(i)}),c=k.from(null===l||void 0===l?void 0:l.resize).getOrThunk(Ja);return e(i,n.grid,n.info,{sizing:o,resize:c,section:s}),r(i),Hf(u,i),tr(i,Xr),n.lockedColumns.length>0&&Ye(i,Xr,n.lockedColumns.join(",")),k.some({cursor:n.cursor,newRows:t.newRows,newCells:t.newCells})})}},qm=function(n,t){return kr(t.element).bind(function(e){return Hm(n,e).map(function(n){var e=on(on({},n),{generators:t.generators,clipboard:t.clipboard});return e})})},Gm=function(n,t){return Vm(n,t,x).map(function(n){return{cells:n,generators:t.generators,clipboard:t.clipboard}})},$m=function(n,t){return t.mergable},Km=function(n,t){return t.unmergable},Xm=function(n,t){return Vm(n,t,x)},Ym=function(n,t){return Vm(n,t,function(n){return!n.isLocked})},Jm=function(n,t){return Hm(n,t).exists(function(n){return!n.isLocked})},Qm=function(n,t){return X(t,function(t){return Jm(n,t)})},Zm=function(n,t){return $m(n,t).filter(function(t){return Qm(n,t.cells)})},nd=function(n,t){return Km(n,t).filter(function(t){return Qm(n,t)})},td=function(n,t,e,r){var o=$r(n).rows;if(0===o.length)return n;for(var u=t.startRow;u<=t.finishRow;u++)for(var i=t.startCol;i<=t.finishCol;i++){var c=o[u],a=Ur(c,i).isLocked;Fr(c,i,Qt(r(),!1,a))}return n},ed=function(n,t,e,r){for(var o=$r(n).rows,u=!0,i=0;i<o.length;i++)for(var c=0;c<Gr(o[0]);c++){var a=o[i],l=Ur(a,c),f=l.element,s=e(f,t);!0===s&&!1===u?Fr(a,c,Qt(r(),!0,l.isLocked)):!0===s&&(u=!1)}return n},rd=function(n,t){return V(n,function(n,e){return N(n,function(n){return t(n.element,e.element)})?n:n.concat([e])},[])},od=function(n,t,e,r){return t>0&&t<n[0].cells.length&&_(n,function(n){var o=n.cells[t-1],u=n.cells[t],i=e(u.element,o.element);i&&Fr(n,t,Qt(r(),!0,u.isLocked))}),n},ud=function(n,t,e,r){var o=$r(n).rows;if(t>0&&t<o.length){var u=o[t-1].cells,i=rd(u,e);_(i,function(n){for(var u=k.none(),i=t;i<o.length;i++)for(var c=function(t){var c=o[i],a=Ur(c,t),l=e(a.element,n.element);l&&(u.isNone()&&(u=k.some(r())),u.each(function(n){Fr(c,t,Qt(n,!0,a.isLocked))}))},a=0;a<Gr(o[0]);a++)c(a)})}return n},id=function(n){var t=function(t){return id(n)},e=function(t){return id(n)},r=function(t){return id(t(n))},o=function(t){return id(n)},u=function(t){t(n)},i=function(t){return t(n)},c=function(t,e){return e(n)},a=function(t){return t(n)},l=function(t){return t(n)},f=function(){return k.some(n)};return{isValue:x,isError:T,getOr:b(n),getOrThunk:b(n),getOrDie:b(n),or:t,orThunk:e,fold:c,map:r,mapError:o,each:u,bind:i,exists:a,forall:l,toOptional:f}},cd=function(n){var t=function(n){return n()},e=function(){return S(String(n))()},r=h,o=function(n){return n()},u=function(t){return cd(n)},i=function(t){return cd(t(n))},c=function(t){return cd(n)},a=function(t,e){return t(n)};return{isValue:T,isError:x,getOr:h,getOrThunk:t,getOrDie:e,or:r,orThunk:o,fold:a,map:u,mapError:i,each:g,bind:c,exists:T,forall:x,toOptional:k.none}},ad=function(n,t){return n.fold(function(){return cd(t)},id)},ld={value:id,error:cd,fromOption:ad},fd=function(n,t,e){if(n.row>=t.length||n.column>Gr(t[0]))return ld.error("invalid start address out of table bounds, row: "+n.row+", column: "+n.column);var r=t.slice(n.row),o=r[0].cells.slice(n.column),u=Gr(e[0]),i=e.length;return ld.value({rowDelta:r.length-i,colDelta:o.length-u})},sd=function(n,t){var e=Gr(n[0]),r=Gr(t[0]);return{rowDelta:0,colDelta:e-r}},md=function(n,t){var e=n.length,r=t.length;return{rowDelta:e-r,colDelta:0}},dd=function(n,t,e,r){var o="colgroup"===t.section?e.col:e.cell;return z(n,function(n){return Qt(o(),!0,r(n))})},gd=function(n,t,e,r){var o=n[n.length-1];return n.concat(z(t,function(){var n="colgroup"===o.section?e.colgroup:e.row,t=Kr(o,n,h),u=dd(t.cells.length,t,e,function(n){return jt(r,n.toString())});return Hr(t,u)}))},pd=function(n,t,e,r){return L(n,function(n){var o=dd(t,n,e,T);return Wr(n,r,o)})},vd=function(n,t,e){return L(n,function(n){return V(e,function(e,r){var o=dd(1,n,t,x)[0];return jr(e,r,o)},n)})},bd=function(n,t,e){var r=t.colDelta<0?pd:h,o=t.rowDelta<0?gd:h,u=Jr(n),i=Gr(n[0]),c=N(u,function(n){return n===i-1}),a=r(n,Math.abs(t.colDelta),e,c?i-1:i),l=Jr(a);return o(a,Math.abs(t.rowDelta),e,J(l,x))},hd=function(n,t,e,r){var o=Ur(n[t],e),u=y(r,o.element),i=n[t];return n.length>1&&Gr(i)>1&&(e>0&&u(qr(i,e-1))||e<i.cells.length-1&&u(qr(i,e+1))||t>0&&u(qr(n[t-1],e))||t<n.length-1&&u(qr(n[t+1],e)))},wd=function(n,t,e,r,o,u){for(var i=n.row,c=n.column,a=e.length,l=Gr(e[0]),f=i+a,s=c+l+u.length,m=J(u,x),d=i;d<f;d++)for(var g=0,p=c;p<s;p++)if(m[p])g++;else{hd(t,d,p,o)&&ed(t,qr(t[d],p),o,r.cell);var v=p-c-g,b=Ur(e[d-i],v),h=b.element,w=r.replace(h);Fr(t[d],p,Qt(w,!0,b.isLocked))}return t},yd=function(n,t,e){var r=Gr(t[0]),o=$r(t).cols.length+n.row,u=z(r-n.column,function(t){return t+n.column}),i=q(u,function(n){return X(e,function(t){return t!==n})}).getOr(r-1);return{row:o,column:i}},Cd=function(n,t,e){return F(e,function(e){return e>=n.column&&e<=Gr(t[0])+n.column})},Sd=function(n,t,e,r,o){var u=Jr(t),i=yd(n,t,u),c=$r(e).rows,a=Cd(i,c,u),l=fd(i,t,c);return l.map(function(n){var e=on(on({},n),{colDelta:n.colDelta-a.length}),u=bd(t,e,r),l=Jr(u),f=Cd(i,c,l);return wd(i,u,c,r,o,f)})},Td=function(n,t,e,r,o){od(t,n,o,r.cell);var u=md(e,t),i=bd(e,u,r),c=md(t,i),a=bd(t,c,r);return L(a,function(t,e){return Wr(t,n,i[e].cells)})},xd=function(n,t,e,r,o){ud(t,n,o,r.cell);var u=Jr(t),i=sd(t,e),c=on(on({},i),{colDelta:i.colDelta-u.length}),a=bd(t,c,r),l=$r(a),f=l.cols,s=l.rows,m=Jr(a),d=sd(e,t),g=on(on({},d),{colDelta:d.colDelta+m.length}),p=vd(e,r,m),v=bd(p,g,r);return f.concat(s.slice(0,n)).concat(v).concat(s.slice(n,s.length))},Rd=function(n,t,e,r){return Kr(n,function(n){return r(n,e)},t)},Dd=function(n,t,e,r,o){var u=$r(n),i=u.rows,c=u.cols,a=i.slice(0,t),l=i.slice(t),f=Rd(i[e],function(n,e){var u=t>0&&t<i.length&&r(qr(i[t-1],e),qr(i[t],e)),c=u?Ur(i[t],e):Qt(o(n.element,r),!0,n.isLocked);return c},r,o);return c.concat(a).concat([f]).concat(l)},Od=function(n,t,e,r,o,u,i){if("colgroup"!==e&&r)return Ur(n,t);var c=Ur(n,o);return Qt(i(c.element,u),!0,!1)},Ad=function(n,t,e,r,o){return L(n,function(n){var u=t>0&&t<Gr(n)&&r(qr(n,t-1),qr(n,t)),i=Od(n,t,n.section,u,e,r,o);return jr(n,t,i)})},kd=function(n,t){return K(n,function(n){var e=n.cells,r=H(t,function(n,t){return t>=0&&t<n.length?n.slice(0,t).concat(n.slice(t+1)):n},e);return r.length>0?[Zt(n.element,r,n.section,n.isNew)]:[]})},Id=function(n,t,e){var r=$r(n),o=r.rows,u=r.cols;return u.concat(o.slice(0,t)).concat(o.slice(e+1))},Bd=function(n,t,e,r){return void 0!==qr(n[t],e)&&t>0&&r(qr(n[t-1],e),qr(n[t],e))},Md=function(n,t,e){return t>0&&e(qr(n,t-1),qr(n,t))},Ed=function(n,t,e,r){return Bd(n,t,e,r)||Md(n[t],e,r)},Pd=function(n,t){var e=X(t,h)&&pm(n.cells);return e?x:function(n,e,r){var o=re(n.element);return!("th"===o&&t[r])}},Nd=function(n,t){var e=X(t,h)&&pm(n);return e?x:function(n,e,r){var o=re(n.element);return!("th"===o&&t[e])}},zd=function(n,t,e,r){var o=function(n){return"row"===n?Sr(t):Cr(t)},u=function(n){return o(n)?n+"group":n};if(n)return gm(t)?u(e):null;if(r&&gm(t)){var i="row"===e?"col":"row";return u(i)}return null},Ld=function(n,t){return function(e,r,o){return k.some(zd(n,e.element,"col",t[o]))}},_d=function(n,t){return function(e,r){return k.some(zd(n,e.element,"row",t[r]))}},Wd=function(n,t,e){return Qt(e(n.element,t),!0,n.isLocked)},jd=function(n,t,e,r,o,u,i){var c=function(n){return N(t,function(t){return e(n.element,t.element)})};return L(n,function(n,t){return Vr(n,function(n,a){if(c(n)){var l=i(n,t,a)?o(n,e,r):n;return u(l,t,a).each(function(n){Qe(l.element,{scope:k.from(n)})}),l}return n})})},Fd=function(n,t,e){return K(n,function(r,o){return Ed(n,o,t,e)?[]:[Ur(r,t)]})},Hd=function(n,t,e){var r=n[t];return K(r.cells,function(r,o){return Ed(n,t,o,e)?[]:[r]})},Vd=function(n,t,e,r,o){var u=$r(n).rows,i=K(t,function(n){return Fd(u,n,r)}),c=L(n,function(n){return pm(n.cells)}),a=Nd(i,c),l=_d(e,c);return jd(n,i,r,o,Wd,l,a)},Ud=function(n,t,e,r,o,u,i){var c=$r(n),a=c.cols,l=c.rows,f=l[t[0]],s=K(t,function(n){return Hd(l,n,o)}),m=L(f.cells,function(n,t){return pm(Fd(l,t,o))}),d=un([],l,!0);_(t,function(n){d[n]=i.transformRow(l[n],e)});var g=a.concat(d),p=Pd(f,m),v=Ld(r,m);return jd(g,s,o,u,i.transformCell,v,p)},qd=function(n,t,e,r){var o=$r(n).rows,u=L(t,function(n){return Ur(o[n.row],n.column)});return jd(n,u,e,r,Wd,k.none,x)},Gd=function(n){var t=function(n,t){var e=N(n,function(n){return n.column===t.column});return e?n:n.concat([t])};return V(n,t,[]).sort(function(n,t){return n.column-t.column})},$d=se("col"),Kd=se("colgroup"),Xd=function(n){return"tr"===re(n)||Kd(n)},Yd=function(n){var t=wr(n,"colspan",1),e=wr(n,"rowspan",1);return{element:n,colspan:t,rowspan:e}},Jd=function(n,t){void 0===t&&(t=Yd);var e=function(t){return $d(t.element)?n.col(t):n.cell(t)},r=function(t){return Kd(t.element)?n.colgroup(t):n.row(t)},o=function(n){if(Xd(n))return r({element:n});var o=e(t(n));return u=k.some({item:n,replacement:o}),o},u=k.none(),i=function(n,t){return u.fold(function(){return o(n)},function(e){return t(n,e.item)?e.replacement:o(n)})};return{getOrInit:i}},Qd=function(n){return function(t){var e=[],r=function(n,t){return q(e,function(e){return t(e.item,n)})},o=function(r){var o="td"===n?{scope:null}:{},u=t.replace(r,n,o);return e.push({item:r,sub:u}),u},u=function(n,t){return Xd(n)||$d(n)?n:r(n,t).fold(function(){return o(n)},function(e){return t(n,e.item)?e.sub:o(n)})};return{replaceOrInit:u}}},Zd=function(n){return nr(n,"scope").map(function(n){return n.substr(0,3)})},ng=function(n){var t=function(t){var e=Zd(t);return e.each(function(n){return Ye(t,"scope",n)}),function(){var r=n.cell({element:t,colspan:1,rowspan:1});return br(r,"width"),br(t,"width"),e.each(function(n){return Ye(r,"scope",n)}),r}},e=function(n){var t=function(){var t=or(L(n,Zd));if(0===t.length)return k.none();var e=t[0],r=["row","col"],o=N(t,function(n){return n!==e&&P(r,n)});return o?k.none():k.from(e)};return br(n[0],"width"),t().fold(function(){return tr(n[0],"scope")},function(t){return Ye(n[0],"scope",t+"group")}),b(n[0])};return{unmerge:t,merge:e}},tg={modification:Jd,transform:Qd,merging:ng},eg=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],rg=function(n,t){var e=n.property().name(t);return P(["ol","ul"],e)},og=function(n,t){var e=n.property().name(t);return P(eg,e)},ug=function(n,t){return P(["br","img","hr","input"],n.property().name(t))},ig=Vo(),cg=function(n){return og(ig,n)},ag=function(n){return rg(ig,n)},lg=function(n){return ug(ig,n)},fg=function(n){var t=function(n){return"br"===re(n)},e=function(n){return X(n,function(n){return t(n)||ae(n)&&0===Wo(n).trim().length})},r=function(n){return"li"===re(n)||Fe(n,ag).isSome()},o=function(n){return we(n).map(function(n){return!!cg(n)||!!lg(n)&&"img"!==re(n)}).getOr(!1)},u=function(n){return kc(n).bind(function(e){var u=o(e);return pe(e).map(function(o){return!0===u||r(o)||t(e)||cg(o)&&!Tt(n,o)?[]:[ht.fromTag("br")]})}).getOr([])},i=function(){var t=K(n,function(n){var t=ye(n);return e(t)?[]:t.concat(u(n))});return 0===t.length?[ht.fromTag("br")]:t},c=i();Po(n[0]),Eo(n[0],c)},sg=function(n){return Tf(n,!0)},mg=function(n){var t=Ir(n);0===t.length&&No(n)},dg=function(n,t){return{grid:n,cursor:t}},gg=function(n){return rn(n,function(n){return rn(n.cells,function(n){var t=n.element;return ar(sg(t),t)})})},pg=function(n,t,e){var r,o,u=$r(n).rows;return k.from(null===(o=null===(r=u[t])||void 0===r?void 0:r.cells[e])||void 0===o?void 0:o.element).filter(sg).orThunk(function(){return gg(u)})},vg=function(n,t,e){var r=pg(n,t,e);return dg(n,r)},bg=function(n){var t=function(n,t){var e=N(n,function(n){return n.row===t.row});return e?n:n.concat([t])};return V(n,t,[]).sort(function(n,t){return n.row-t.row})},hg=function(n,t,e,r){var o=t[0].row,u=bg(t),i=H(u,function(n,t){var u=Dd(n.grid,o,t.row+n.delta,e,r.getOrInit);return{grid:u,delta:n.delta+1}},{grid:n,delta:0}).grid;return vg(i,o,t[0].column)},wg=function(n,t,e,r){var o=bg(t),u=o[o.length-1],i=u.row+u.rowspan,c=H(o,function(n,t){return Dd(n,i,t.row,e,r.getOrInit)},n);return vg(c,i,t[0].column)},yg=function(n,t,e,r){var o=t.details,u=Gd(o),i=u[0].column,c=H(u,function(n,t){var o=Ad(n.grid,i,t.column+n.delta,e,r.getOrInit);return{grid:o,delta:n.delta+1}},{grid:n,delta:0}).grid;return vg(c,o[0].row,i)},Cg=function(n,t,e,r){var o=t.details,u=o[o.length-1],i=u.column+u.colspan,c=Gd(o),a=H(c,function(n,t){return Ad(n,i,t.column,e,r.getOrInit)},n);return vg(a,o[0].row,i)},Sg=function(n,t,e,r){var o=Gd(t),u=L(o,function(n){return n.column}),i=Vd(n,u,!0,e,r.replaceOrInit);return vg(i,t[0].row,t[0].column)},Tg=function(n,t,e,r){var o=qd(n,t,e,r.replaceOrInit);return vg(o,t[0].row,t[0].column)},xg=function(n,t,e,r){var o=Gd(t),u=L(o,function(n){return n.column}),i=Vd(n,u,!1,e,r.replaceOrInit);return vg(i,t[0].row,t[0].column)},Rg=function(n,t,e,r){var o=qd(n,t,e,r.replaceOrInit);return vg(o,t[0].row,t[0].column)},Dg=function(n,t){return function(e,r,o,u,i){var c=bg(r),a=L(c,function(n){return n.row}),l=Ud(e,a,n,t,o,u.replaceOrInit,i);return vg(l,r[0].row,r[0].column)}},Og=Dg("thead",!0),Ag=Dg("tbody",!1),kg=Dg("tfoot",!1),Ig=function(n,t,e,r){var o=Gd(t.details),u=kd(n,L(o,function(n){return n.column})),i=u.length>0?u[0].cells.length-1:0;return vg(u,o[0].row,Math.min(o[0].column,i))},Bg=function(n,t,e,r){var o=bg(t),u=Id(n,o[0].row,o[o.length-1].row),i=u.length>0?u.length-1:0;return vg(u,Math.min(t[0].row,i),t[0].column)},Mg=function(n,t,e,r){var o=t.cells;fg(o);var u=td(n,t.bounds,e,r.merge(o));return dg(u,k.from(o[0]))},Eg=function(n,t,e,r){var o=function(n,t){return ed(n,t,e,r.unmerge(t))},u=H(t,o,n);return dg(u,k.from(t[0]))},Pg=function(n,t,e,r){var o=function(n,t){var e=lo.fromTable(n);return Wm(e,t,!0)},u=o(t.clipboard,t.generators),i=Gt(t.row,t.column),c=Sd(i,n,u,t.generators,e);return c.fold(function(){return dg(n,k.some(t.element))},function(n){return vg(n,t.row,t.column)})},Ng=function(n,t,e){var r=_r(n,e.section),o=lo.generate(r);return Wm(o,t,!0)},zg=function(n,t,e,r){var o=$r(n).rows,u=t.cells[0].column,i=o[t.cells[0].row],c=Ng(t.clipboard,t.generators,i),a=Td(u,n,c,t.generators,e);return vg(a,t.cells[0].row,t.cells[0].column)},Lg=function(n,t,e,r){var o=$r(n).rows,u=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,i=o[t.cells[0].row],c=Ng(t.clipboard,t.generators,i),a=Td(u,n,c,t.generators,e);return vg(a,t.cells[0].row,t.cells[0].column)},_g=function(n,t,e,r){var o=$r(n).rows,u=t.cells[0].row,i=o[u],c=Ng(t.clipboard,t.generators,i),a=xd(u,n,c,t.generators,e);return vg(a,t.cells[0].row,t.cells[0].column)},Wg=function(n,t,e,r){var o=$r(n).rows,u=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,i=o[t.cells[0].row],c=Ng(t.clipboard,t.generators,i),a=xd(u,n,c,t.generators,e);return vg(a,t.cells[0].row,t.cells[0].column)},jg=function(n,t){var e=lo.fromTable(n),r=Xm(e,t);return r.bind(function(n){var t=n[n.length-1],r=n[0].column,o=t.column+t.colspan,u=$(L(e.all,function(n){return F(n.cells,function(n){return n.column>=r&&n.column<o})}));return hm(u)}).getOr("")},Fg=function(n,t){var e=lo.fromTable(n),r=Xm(e,t);return r.bind(hm).getOr("")},Hg=function(n,t){var e=lo.fromTable(n),r=Xm(e,t);return r.bind(function(n){var t=n[n.length-1],r=n[0].row,o=t.row+t.rowspan,u=e.all.slice(r,o);return wm(u)}).getOr("")},Vg=function(n,t,e,r){return Ua(n,t,e,r.sizing)},Ug=function(n,t,e,r){return Va(n,t,e,r.sizing,r.resize)},qg=function(n,t){return N(t,function(n){return 0===n.column&&n.isLocked})},Gg=function(n,t){return N(t,function(t){return t.column+t.colspan>=n.grid.columns&&t.isLocked})},$g=function(n,t){var e=Fu(n),r=Gd(t);return V(r,function(n,t){var r=e[t.column],o=r.map(_u).getOr(0);return n+o},0)},Kg=function(n){return function(t,e){return Xm(t,e).filter(function(e){var r=n?qg:Gg;return!r(t,e)}).map(function(n){return{details:n,pixelDelta:$g(t,n)}})}},Xg=function(n,t){return Ym(n,t).map(function(t){return{details:t,pixelDelta:-$g(n,t)}})},Yg=function(n){return function(t,e){return Gm(t,e).filter(function(e){var r=n?qg:Gg;return!r(t,e.cells)})}},Jg=tg.transform("th"),Qg=tg.transform("td"),Zg=Um(hg,Xm,g,g,tg.modification),np=Um(wg,Xm,g,g,tg.modification),tp=Um(yg,Kg(!0),Ug,g,tg.modification),ep=Um(Cg,Kg(!1),Ug,g,tg.modification),rp=Um(Ig,Xg,Ug,mg,tg.modification),op=Um(Bg,Xm,g,mg,tg.modification),up=Um(Sg,Ym,g,g,Jg),ip=Um(xg,Ym,g,g,Qg),cp=Um(Og,Ym,g,g,Jg),ap=Um(Ag,Ym,g,g,Qg),lp=Um(kg,Ym,g,g,Qg),fp=Um(Tg,Ym,g,g,Jg),sp=Um(Rg,Ym,g,g,Qg),mp=Um(Mg,Zm,Vg,g,tg.merging),dp=Um(Eg,nd,Vg,g,tg.merging),gp=Um(Pg,qm,Vg,g,tg.modification),pp=Um(zg,Yg(!0),g,g,tg.modification),vp=Um(Lg,Yg(!1),g,g,tg.modification),bp=Um(_g,Gm,g,g,tg.modification),hp=Um(Wg,Gm,g,g,tg.modification),wp=jg,yp=Fg,Cp=Hg,Sp=function(n,t,e){var r=function(n){return"table"===re(qc(n))},o=function(t){return!1===r(n)||xl(t).rows>1},u=function(t){return!1===r(n)||xl(t).columns>1},i=Fs(n),c=js(n)?g:dm,a=function(t){switch(Ls(n)){case"section":return Am.section();case"sectionCells":return Am.sectionCells();case"cells":return Am.cells();default:return Am.getTableSectionType(t,"section")}},l=function(e,r){return r.cursor.fold(function(){var r=Ir(e);return tn(r).filter(Be).map(function(r){t.clear(e);var o=n.dom.createRng();return o.selectNode(r.dom),n.selection.setRng(o),Ye(r,"data-mce-selected","1"),o})},function(r){var o=mm(r),u=n.dom.createRng();return u.setStart(o.element.dom,o.offset),u.setEnd(o.element.dom,o.offset),n.selection.setRng(u),t.clear(e),k.some(u)})},f=function(t,e,r,o,u){return function(c,f,s){void 0===s&&(s=!1),Jc(c);var m=o(),d=ht.fromDom(n.getDoc()),g=jc(r,d,i),p={sizing:qs(n,c),resize:js(n)?Ya():Ja(),section:a(c)};return e(c)?t(m,c,f,g,p).bind(function(t){_(t.newRows,function(t){Qf(n,t.dom)}),_(t.newCells,function(t){Zf(n,t.dom)});var e=l(c,t);return Be(c)&&(Jc(c),s||os(n,c.dom,u)),e.map(function(n){return{rng:n,effect:u}})}):k.none()}},s=f(op,o,g,e,is),m=f(rp,u,g,e,is),d=f(Zg,x,g,e,is),p=f(np,x,g,e,is),v=f(tp,x,c,e,is),b=f(ep,x,c,e,is),h=f(mp,x,g,e,is),w=f(dp,x,g,e,is),y=f(pp,x,g,e,is),C=f(vp,x,g,e,is),S=f(bp,x,g,e,is),T=f(hp,x,g,e,is),R=f(gp,x,g,e,cs),D=f(fp,x,g,e,is),O=f(sp,x,g,e,is),A=f(up,x,g,e,is),I=f(ip,x,g,e,is),B=f(cp,x,g,e,is),M=f(ap,x,g,e,is),E=f(lp,x,g,e,is),P=yp,N=wp,z=Cp;return{deleteRow:s,deleteColumn:m,insertRowsBefore:d,insertRowsAfter:p,insertColumnsBefore:v,insertColumnsAfter:b,mergeCells:h,unmergeCells:w,pasteColsBefore:y,pasteColsAfter:C,pasteRowsBefore:S,pasteRowsAfter:T,pasteCells:R,makeCellsHeader:D,unmakeCellsHeader:O,makeColumnsHeader:A,unmakeColumnsHeader:I,makeRowsHeader:B,makeRowsBody:M,makeRowsFooter:E,getTableRowType:z,getTableCellType:P,getTableColType:N}},Tp={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},xp=function(){return ht.fromTag("th")},Rp=function(){return ht.fromTag("td")},Dp=function(){return ht.fromTag("col")},Op=function(n,t,e,r){for(var o=ht.fromTag("tr"),u=0;u<n;u++){var i=r<t||u<e?xp():Rp();u<e&&Ye(i,"scope","row"),r<t&&Ye(i,"scope","col"),Ao(i,ht.fromTag("br")),Ao(o,i)}return o},Ap=function(n){var t=ht.fromTag("colgroup");return z(n,function(){return Ao(t,Dp())}),t},kp=function(n,t,e,r){return z(n,function(n){return Op(t,e,r,n)})},Ip=function(n,t,e,r,o,u){void 0===u&&(u=Tp);var i=ht.fromTag("table"),c="cells"!==o;dr(i,u.styles),Je(i,u.attributes),u.colGroups&&Ao(i,Ap(t));var a=Math.min(n,e);if(c&&e>0){var l=ht.fromTag("thead");Ao(i,l);var f="sectionCells"===o?a:0,s=kp(e,t,f,r);Eo(l,s)}var m=ht.fromTag("tbody");Ao(i,m);var d=c?n-a:n,g=c?0:e,p=kp(d,t,g,r);return Eo(m,p),i},Bp=function(n){return n.dom.innerHTML},Mp=function(n){var t=ht.fromTag("div"),e=ht.fromDom(n.dom.cloneNode(!0));return Ao(t,e),Bp(t)},Ep=function(n,t){n.selection.select(t.dom,!0),n.selection.collapse(!0)},Pp=function(n,t){$e(t,"td,th").each(y(Ep,n))},Np=function(n,t){_(We(t,"tr"),function(t){Qf(n,t.dom),_(We(t,"th,td"),function(t){Zf(n,t.dom)})})},zp=function(n){return o(n)&&-1!==n.indexOf("%")},Lp=function(n,t,e,r,o){var u=ys(n),i={styles:u,attributes:ws(n),colGroups:zs(n)};return n.undoManager.ignore(function(){var u=Ip(e,t,o,r,Ls(n),i);Ye(u,"data-mce-id","__mce");var c=Mp(u);n.insertContent(c),n.addVisual()}),$e(qc(n),'table[data-mce-id="__mce"]').map(function(t){return Es(n)?Js(t):Ps(n)?Qs(t):(Ms(n)||zp(u.width))&&Ys(t),Jc(t),tr(t,"data-mce-id"),Np(n,t),Pp(n,t),t.dom}).getOr(null)},_p=function(n,t,e,r,o){void 0===r&&(r={});var u=function(n){return d(n)&&n>0};if(u(t)&&u(e)){var i=r.headerRows||0,c=r.headerColumns||0;return Lp(n,e,t,c,i)}return console.error(o),null},Wp=function(n){return function(){return n().fold(function(){return[]},function(n){return L(n,function(n){return n.dom})})}},jp=function(n){return function(t){var e=t.length>0?k.some(Vc(t)):k.none();n(e)}},Fp=function(n){return function(t,e,r){void 0===r&&(r={});var o=_p(n,e,t,r,"Invalid values for insertTable - rows and columns values are required to insert a table.");return n.undoManager.add(),o}},Hp=function(n,t,e,r){return{insertTable:Fp(n),setClipboardRows:jp(t.setRows),getClipboardRows:Wp(t.getRows),setClipboardCols:jp(t.setColumns),getClipboardCols:Wp(t.getColumns),resizeHandler:e,selectionTargets:r}},Vp=function(n,t,e){var r=wr(n,t,1);1===e||r<=1?tr(n,t):Ye(n,t,Math.min(e,r))},Up=function(n,t,e){if(lo.hasColumns(n)){var r=F(lo.justColumns(n),function(n){return n.column>=t&&n.column<e}),o=L(r,function(n){var r=Cu(n.element);return Vp(r,"span",e-t),r}),u=ht.fromTag("colgroup");return Eo(u,o),[u]}return[]},qp=function(n,t,e){return L(n.all,function(n){var r=F(n.cells,function(n){return n.column>=t&&n.column<e}),o=L(r,function(n){var r=Cu(n.element);return Vp(r,"colspan",e-t),r}),u=ht.fromTag("tr");return Eo(u,o),u})},Gp=function(n,t){var e=lo.fromTable(n),r=Ym(e,t);return r.map(function(n){var t=n[n.length-1],r=n[0].column,o=t.column+t.colspan,u=Up(e,r,o),i=qp(e,r,o);return un(un([],u,!0),i,!0)})},$p=function(n,t,e){var r=lo.fromTable(n),o=Xm(r,t);return o.bind(function(n){var t=Wm(r,e,!1),o=$r(t).rows,u=o.slice(n[0].row,n[n.length-1].row+n[n.length-1].rowspan),i=K(u,function(n){var t=F(n.cells,function(n){return!n.isLocked});return t.length>0?[on(on({},n),{cells:t})]:[]}),c=Fm(i);return ar(c.length>0,c)}).map(function(n){return Em(n)})},Kp=tinymce.util.Tools.resolve("tinymce.util.Tools"),Xp=function(n,t,e){var r,o=n.select("td,th",t),u=function(t,r){for(var o=0;o<r.length;o++){var u=n.getStyle(r[o],e);if("undefined"===typeof t&&(t=u),t!==u)return""}return t};return u(r,o)},Yp=function(n,t,e){e&&n.formatter.apply("align"+e,{},t)},Jp=function(n,t,e){e&&n.formatter.apply("valign"+e,{},t)},Qp=function(n,t){Kp.each("left center right".split(" "),function(e){n.formatter.remove("align"+e,{},t)})},Zp=function(n,t){Kp.each("top middle bottom".split(" "),function(e){n.formatter.remove("valign"+e,{},t)})},nv=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],tv=function(n){return{value:n}},ev=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,rv=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ov=function(n){return ev.test(n)||rv.test(n)},uv=function(n){return Cn(n,"#").toUpperCase()},iv=function(n){return ov(n)?k.some({value:uv(n)}):k.none()},cv=function(n){var t=n.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},av=function(n){var t=cv(n.red)+cv(n.green)+cv(n.blue);return tv(t)},lv=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,fv=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,sv=function(n,t,e,r){return{red:n,green:t,blue:e,alpha:r}},mv=function(n,t,e,r){var o=parseInt(n,10),u=parseInt(t,10),i=parseInt(e,10),c=parseFloat(r);return sv(o,u,i,c)},dv=function(n){if("transparent"===n)return k.some(sv(0,0,0,0));var t=lv.exec(n);if(null!==t)return k.some(mv(t[1],t[2],t[3],"1"));var e=fv.exec(n);return null!==e?k.some(mv(e[1],e[2],e[3],e[4])):k.none()},gv=function(n){return iv(n).orThunk(function(){return dv(n).map(av)}).getOrThunk(function(){var t=document.createElement("canvas");t.height=1,t.width=1;var e=t.getContext("2d");e.clearRect(0,0,t.width,t.height),e.fillStyle="#FFFFFF",e.fillStyle=n,e.fillRect(0,0,1,1);var r=e.getImageData(0,0,1,1).data,o=r[0],u=r[1],i=r[2],c=r[3];return av(sv(o,u,i,c))})},pv=function(n){var t=n,e=function(){return t},r=function(n){t=n};return{get:e,set:r}},vv=function(n){var t=pv(k.none()),e=function(){return t.get().each(n)},r=function(){e(),t.set(k.none())},o=function(){return t.get().isSome()},u=function(){return t.get()},i=function(n){e(),t.set(k.some(n))};return{clear:r,isSet:o,get:u,set:i}},bv=function(){return vv(function(n){return n.unbind()})},hv=function(){var n=vv(g),t=function(t){return n.get().each(t)};return on(on({},n),{on:t})},wv=function(n,t,e,r){return function(o){var u=bv(),i=An(r),c=function(){var c=Ta(t),a=function(t){return n.formatter.match(e,{value:r},t.dom,i)};i?(o.setActive(!N(c,a)),u.set(n.formatter.formatChanged(e,function(n){return o.setActive(!n)},!0))):(o.setActive(X(c,a)),u.set(n.formatter.formatChanged(e,o.setActive,!1,{value:r})))};return n.initialized?c():n.on("init",c),u.clear}},yv=function(n){return Ft(n,"menu")},Cv=function(n){return L(n,function(n){var t=n.text||n.title;return yv(n)?{text:t,items:Cv(n.menu)}:{text:t,value:n.value}})},Sv=function(n,t,e,r,o){return L(e,function(e){var u=e.text||e.title;return yv(e)?{type:"nestedmenuitem",text:u,getSubmenuItems:function(){return Sv(n,t,e.menu,r,o)}}:{text:u,type:"togglemenuitem",onAction:function(){return o(e.value)},onSetup:wv(n,t,r,e.value)}})},Tv=function(n,t){return function(e){var r;n.execCommand("mceTableApplyCellStyle",!1,(r={},r[t]=e,r))}},xv=function(n){return K(n,function(n){return yv(n)?[on(on({},n),{menu:xv(n.menu)})]:On(n.value)?[n]:[]})},Rv=function(n,t,e,r,o){return function(u){return u(Sv(n,t,e,r,o))}},Dv=function(n,t,e){var r=L(t,function(n){return{text:n.title,value:"#"+gv(n.value).value,type:"choiceitem"}});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:r.length>0?r:void 0,allowCustomColors:!1},onAction:function(t){var r,o="remove"===t.value?"":t.value;n.execCommand("mceTableApplyCellStyle",!1,(r={},r[e]=o,r))}}]},Ov=function(n){return function(){var t=n.queryCommandValue("mceTableRowType"),e="header"===t?"body":"header";n.execCommand("mceTableRowType",!1,{type:e})}},Av=function(n){return function(){var t=n.queryCommandValue("mceTableColType"),e="th"===t?"td":"th";n.execCommand("mceTableColType",!1,{type:e})}},kv=function(n){var t=Cv(ks(n));return t.length>0?k.some({name:"class",type:"listbox",label:"Class",items:t}):k.none()},Iv=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:nv}],Bv=function(n){return Iv.concat(kv(n).toArray())},Mv=function(n,t){var e=[{text:"Select...",value:""}],r=[{name:"borderstyle",type:"listbox",label:"Border style",items:e.concat(Cv(hs(n)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}],o={name:"borderwidth",type:"input",label:"Border width"},u="cell"===t?[o].concat(r):r;return{title:"Advanced",name:"advanced",items:u}},Ev=function(n){return function(t,e){var r=t.dom,o=function(t,o){n&&!o||r.setAttrib(e,t,o)},u=function(t,o){n&&!o||r.setStyle(e,t,o)},i=function(r,o){n&&!o||(""===o?t.formatter.remove(r,{value:null},e,!0):t.formatter.apply(r,{value:o},e))};return{setAttrib:o,setStyle:u,setFormat:i}}},Pv={normal:Ev(!1),ifTruthy:Ev(!0)},Nv=function(n){return function(t){return Tn(t,"rgb")?n.toHex(t):t}},zv=function(n,t){var e=ht.fromDom(t);return{borderwidth:vr(e,"border-width").getOr(""),borderstyle:vr(e,"border-style").getOr(""),bordercolor:vr(e,"border-color").map(Nv(n)).getOr(""),backgroundcolor:vr(e,"background-color").map(Nv(n)).getOr("")}},Lv=function(n){var t=n[0],e=n.slice(1);return _(e,function(n){_(At(t),function(e){It(n,function(n,r){var o=t[e];""!==o&&e===r&&o!==n&&(t[e]="")})})}),t},_v=function(n,t,e,r){return q(n,function(n){return!l(e.formatter.matchNode(r,t+n))}).getOr("")},Wv=y(_v,["left","center","right"],"align"),jv=y(_v,["top","middle","bottom"],"valign"),Fv=function(n,t){var e=ys(n),r=ws(n),o=function(n){return{borderstyle:Wt(e,"border-style").getOr(""),bordercolor:Nv(n)(Wt(e,"border-color").getOr("")),backgroundcolor:Nv(n)(Wt(e,"background-color").getOr(""))}},u={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},i=function(){var t=e["border-width"];return As(n)&&t?{border:t}:Wt(r,"border").fold(function(){return{}},function(n){return{border:n}})},c=t?o(n.dom):{},a=function(){var n=Wt(e,"border-spacing").or(Wt(r,"cellspacing")).fold(function(){return{}},function(n){return{cellspacing:n}}),t=Wt(e,"border-padding").or(Wt(r,"cellpadding")).fold(function(){return{}},function(n){return{cellpadding:n}});return on(on({},n),t)},l=on(on(on(on(on(on({},u),e),r),c),i()),a());return l},Hv=function(n){return Mr(ht.fromDom(n)).map(function(t){var e={selection:Vc(n.cells)};return Cp(t,e)}).getOr("")},Vv=function(n,t,e){var r=function(t,e){var r=vr(ht.fromDom(e),"border-width");return As(n)&&r.isSome()?r.getOr(""):t.getAttrib(e,"border")||Xp(n.dom,e,"border-width")||Xp(n.dom,e,"border")},o=n.dom,u=As(n)?o.getStyle(t,"border-spacing")||o.getAttrib(t,"cellspacing"):o.getAttrib(t,"cellspacing")||o.getStyle(t,"border-spacing"),i=As(n)?Xp(o,t,"padding")||o.getAttrib(t,"cellpadding"):o.getAttrib(t,"cellpadding")||Xp(o,t,"padding");return on({width:o.getStyle(t,"width")||o.getAttrib(t,"width"),height:o.getStyle(t,"height")||o.getAttrib(t,"height"),cellspacing:u,cellpadding:i,border:r(o,t),caption:!!o.select("caption",t)[0],class:o.getAttrib(t,"class",""),align:Wv(n,t)},e?zv(o,t):{})},Uv=function(n,t,e){var r=n.dom;return on({height:r.getStyle(t,"height")||r.getAttrib(t,"height"),class:r.getAttrib(t,"class",""),type:Hv(t),align:Wv(n,t)},e?zv(r,t):{})},qv=function(n,t,e,r){var o=n.dom,u=r.getOr(t),i=function(n,t){return o.getStyle(n,t)||o.getAttrib(n,t)};return on({width:i(u,"width"),height:i(t,"height"),scope:o.getAttrib(t,"scope"),celltype:Uc(t),class:o.getAttrib(t,"class",""),halign:Wv(n,t),valign:jv(n,t)},e?zv(o,t):{})},Gv=function(n,t){var e=lo.fromTable(n),r=lo.justCells(e),o=F(r,function(n){return N(t,function(t){return Tt(n.element,t)})});return L(o,function(n){return{element:n.element.dom,column:lo.getColumnAt(e,n.column).map(function(n){return n.element.dom})}})},$v=function(n,t,e){n.setAttrib("scope",e.scope),n.setAttrib("class",e.class),n.setStyle("height",Yc(e.height)),t.setStyle("width",Yc(e.width))},Kv=function(n,t){n.setFormat("tablecellbackgroundcolor",t.backgroundcolor),n.setFormat("tablecellbordercolor",t.bordercolor),n.setFormat("tablecellborderstyle",t.borderstyle),n.setFormat("tablecellborderwidth",Yc(t.borderwidth))},Xv=function(n,t,e){var r=1===t.length;_(t,function(t){var o=t.element,u=r?Pv.normal(n,o):Pv.ifTruthy(n,o),i=t.column.map(function(t){return r?Pv.normal(n,t):Pv.ifTruthy(n,t)}).getOr(u);$v(u,i,e),Ts(n)&&Kv(u,e),r&&(Qp(n,o),Zp(n,o)),e.halign&&Yp(n,o,e.halign),e.valign&&Jp(n,o,e.valign)})},Yv=function(n,t){n.execCommand("mceTableCellType",!1,{type:t.celltype,no_events:!0})},Jv=function(n,t,e,r){var o=Nt(r,function(n,t){return e[t]!==n});_t(o)>0&&t.length>=1&&Mr(t[0]).each(function(e){var u=Gv(e,t),i=_t(Nt(o,function(n,t){return"scope"!==t&&"celltype"!==t}))>0,c=jt(o,"celltype");(i||jt(o,"scope"))&&Xv(n,u,r),c&&Yv(n,r),os(n,e.dom,{structure:c,style:i})})},Qv=function(n,t,e,r){var o=r.getData();r.close(),n.undoManager.transact(function(){Jv(n,t,e,o),n.focus()})},Zv=function(n,t){var e=Mr(t[0]).map(function(e){return L(Gv(e,t),function(t){return qv(n,t.element,Ts(n),t.column)})});return Lv(e.getOrDie())},nb=function(n,t){var e=Ta(t);if(0!==e.length){var r=Zv(n,e),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:Bv(n)},Mv(n,"cell")]},u={type:"panel",items:[{type:"grid",columns:2,items:Bv(n)}]};n.windowManager.open({title:"Cell Properties",size:"normal",body:Ts(n)?o:u,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:y(Qv,n,e,r)})}},tb=function(n){var t=Cv(Is(n));return t.length>0?k.some({name:"class",type:"listbox",label:"Class",items:t}):k.none()},eb=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],rb=function(n){return eb.concat(tb(n).toArray())},ob=function(n,t){n.setAttrib("class",t.class),n.setStyle("height",Yc(t.height))},ub=function(n,t){n.setStyle("background-color",t.backgroundcolor),n.setStyle("border-color",t.bordercolor),n.setStyle("border-style",t.borderstyle)},ib=function(n,t,e,r){var o=1===t.length;_(t,function(t){var u=o?Pv.normal(n,t):Pv.ifTruthy(n,t);ob(u,e),xs(n)&&ub(u,e),e.align!==r.align&&(Qp(n,t),Yp(n,t,e.align))})},cb=function(n,t){n.execCommand("mceTableRowType",!1,{type:t.type,no_events:!0})},ab=function(n,t,e,r){var o=Nt(r,function(n,t){return e[t]!==n});if(_t(o)>0){var u=jt(o,"type"),i=!u||_t(o)>1;i&&ib(n,t,r,e),u&&cb(n,r),Mr(ht.fromDom(t[0])).each(function(t){return os(n,t.dom,{structure:u,style:i})})}},lb=function(n,t,e,r){var o=r.getData();r.close(),n.undoManager.transact(function(){ab(n,t,e,o),n.focus()})},fb=function(n){var t=xa(ta(n),ga.selected);if(0!==t.length){var e=L(t,function(t){return Uv(n,t.dom,xs(n))}),r=Lv(e),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:rb(n)},Mv(n,"row")]},u={type:"panel",items:[{type:"grid",columns:2,items:rb(n)}]};n.windowManager.open({title:"Row Properties",size:"normal",body:xs(n)?o:u,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:y(lb,n,L(t,function(n){return n.dom}),r)})}},sb=function(n,t,e){var r=e?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],o=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],u=Ds(n)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],i=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],c=t.length>0?[{type:"listbox",name:"class",label:"Class",items:t}]:[];return r.concat(o).concat(u).concat(i).concat(c)},mb=function(n,t,e,r){if("TD"===t.tagName||"TH"===t.tagName)o(e)?n.setStyle(t,e,r):n.setStyle(t,e);else if(t.children)for(var u=0;u<t.children.length;u++)mb(n,t.children[u],e,r)},db=function(n,t,e){var r=n.dom,o={},u={};if(o.class=e.class,u.height=Yc(e.height),r.getAttrib(t,"width")&&!As(n)?o.width=Xc(e.width):u.width=Yc(e.width),As(n)?(u["border-width"]=Yc(e.border),u["border-spacing"]=Yc(e.cellspacing)):(o.border=e.border,o.cellpadding=e.cellpadding,o.cellspacing=e.cellspacing),As(n)&&t.children)for(var i=0;i<t.children.length;i++)mb(r,t.children[i],{"border-width":Yc(e.border),padding:Yc(e.cellpadding)}),Rs(n)&&mb(r,t.children[i],{"border-color":e.bordercolor});Rs(n)&&(u["background-color"]=e.backgroundcolor,u["border-color"]=e.bordercolor,u["border-style"]=e.borderstyle),o.style=r.serializeStyle(on(on({},ys(n)),u)),r.setAttribs(t,on(on({},ws(n)),o))},gb=function(n,t,e,r){var o=n.dom,u=r.getData(),i=Nt(u,function(n,t){return e[t]!==n});r.close(),""===u.class&&delete u.class,n.undoManager.transact(function(){if(!t){var e=parseInt(u.cols,10)||1,r=parseInt(u.rows,10)||1;t=Lp(n,e,r,0,0)}if(_t(i)>0){db(n,t,u);var c=o.select("caption",t)[0];(c&&!u.caption||!c&&u.caption)&&n.execCommand("mceTableToggleCaption"),""===u.align?Qp(n,t):Yp(n,t,u.align)}if(n.focus(),n.addVisual(),_t(i)>0){var a=jt(i,"caption"),l=!a||_t(i)>1;os(n,t,{structure:a,style:l})}})},pb=function(n,t){var e,r=n.dom,o=Fv(n,Rs(n));!1===t?(e=r.getParent(n.selection.getStart(),"table",n.getBody()),e?o=Vv(n,e,Rs(n)):Rs(n)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor="")):(o.cols="1",o.rows="1",Rs(n)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""));var u=Cv(Bs(n));u.length>0&&o.class&&(o.class=o.class.replace(/\s*mce\-item\-table\s*/g,""));var i={type:"grid",columns:2,items:sb(n,u,t)},c=function(){return{type:"panel",items:[i]}},a=function(){return{type:"tabpanel",tabs:[{title:"General",name:"general",items:[i]},Mv(n,"table")]}},l=Rs(n)?a():c();n.windowManager.open({title:"Table Properties",size:"normal",body:l,onSubmit:y(gb,n,e,o),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o})},vb=function(n){return Ca(ta(n),Kc(n))},bb=function(n){return Sa(ta(n),Kc(n))},hb=function(n,t,e,r,i){var c=Kc(n),a=function(){return vb(n).each(function(t){Mr(t,c).filter(C(c)).each(function(t){var e=ht.fromText("");if(Do(t,e),No(t),n.dom.isEmpty(n.getBody()))n.setContent(""),n.selection.setCursorLocation();else{var r=n.dom.createRng();r.setStart(e.dom,0),r.setEnd(e.dom,0),n.selection.setRng(r),n.nodeChanged()}})})},l=function(t){return vb(n).each(function(e){var r=Ps(n)||Es(n)||Ms(n);r||Mr(e,c).each(function(e){"relative"!==t||Cl(e)?"fixed"!==t||Sl(e)?"responsive"!==t||Tl(e)||Qs(e):Js(e):Ys(e),Jc(e),os(n,e.dom,is)})})},f=function(n){return Mr(n,c)},s=function(t){return bb(n).bind(function(n){return f(n).map(function(e){return t(e,n)})})},m=function(t,e){s(function(t){n.formatter.toggle("tableclass",{value:e},t.dom),os(n,t.dom,us)})},d=function(t,e){s(function(t){var o=Ta(r),u=X(o,function(t){return n.formatter.match("tablecellclass",{value:e},t.dom)}),i=u?n.formatter.remove:n.formatter.apply;_(o,function(n){return i("tablecellclass",{value:e},n.dom)}),os(n,t.dom,us)})},p=function(){vb(n).each(function(t){Mr(t,c).each(function(e){Ge(e,"caption").fold(function(){var t=ht.fromTag("caption");Ao(t,ht.fromText("Caption")),ko(e,t,0),n.selection.setCursorLocation(t.dom,0)},function(r){se("caption")(t)&&St("td",e).each(function(t){return n.selection.setCursorLocation(t.dom,0)}),No(r)}),os(n,e.dom,is)})})},v=function(t){n.focus()},b=function(n,t){return void 0===t&&(t=!1),s(function(e,o){var u=va(r,e,o);n(e,u,t).each(v)})},h=function(){return s(function(t,e){var o=va(r,t,e),u=jc(g,ht.fromDom(n.getDoc()),k.none());return $p(t,o,u)})},w=function(){return s(function(n,t){var e=va(r,n,t);return Gp(n,e)})},S=function(t,e){return e().each(function(e){var o=L(e,function(n){return Cu(n)});s(function(e,u){var i=Fc(ht.fromDom(n.getDoc())),c=ha(r,u,o,i);t(e,c).each(v)})})},T=function(n){return function(t,e){return Wt(e,"type").each(function(t){b(n(t),e.no_events)})}};It({mceTableSplitCells:function(){return b(t.unmergeCells)},mceTableMergeCells:function(){return b(t.mergeCells)},mceTableInsertRowBefore:function(){return b(t.insertRowsBefore)},mceTableInsertRowAfter:function(){return b(t.insertRowsAfter)},mceTableInsertColBefore:function(){return b(t.insertColumnsBefore)},mceTableInsertColAfter:function(){return b(t.insertColumnsAfter)},mceTableDeleteCol:function(){return b(t.deleteColumn)},mceTableDeleteRow:function(){return b(t.deleteRow)},mceTableCutCol:function(){return w().each(function(n){i.setColumns(n),b(t.deleteColumn)})},mceTableCutRow:function(){return h().each(function(n){i.setRows(n),b(t.deleteRow)})},mceTableCopyCol:function(){return w().each(function(n){return i.setColumns(n)})},mceTableCopyRow:function(){return h().each(function(n){return i.setRows(n)})},mceTablePasteColBefore:function(){return S(t.pasteColsBefore,i.getColumns)},mceTablePasteColAfter:function(){return S(t.pasteColsAfter,i.getColumns)},mceTablePasteRowBefore:function(){return S(t.pasteRowsBefore,i.getRows)},mceTablePasteRowAfter:function(){return S(t.pasteRowsAfter,i.getRows)},mceTableDelete:a,mceTableCellToggleClass:d,mceTableToggleClass:m,mceTableToggleCaption:p,mceTableSizingMode:function(n,t){return l(t)},mceTableCellType:T(function(n){return"th"===n?t.makeCellsHeader:t.unmakeCellsHeader}),mceTableColType:T(function(n){return"th"===n?t.makeColumnsHeader:t.unmakeColumnsHeader}),mceTableRowType:T(function(n){switch(n){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}})},function(t,e){return n.addCommand(e,t)}),It({mceTableProps:y(pb,n,!1),mceTableRowProps:y(fb,n),mceTableCellProps:y(nb,n,r)},function(t,e){return n.addCommand(e,function(){return t()})}),n.addCommand("mceInsertTable",function(t,e){u(e)&&At(e).length>0?_p(n,e.rows,e.columns,e.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):pb(n,!0)}),n.addCommand("mceTableApplyCellStyle",function(t,e){var i=function(n){return"tablecell"+n.toLowerCase().replace("-","")};if(u(e)){var c=Ta(r);if(0!==c.length){var a=Nt(e,function(t,e){return n.formatter.has(i(e))&&o(t)});Ht(a)||(It(a,function(t,e){_(c,function(r){Pv.normal(n,r.dom).setFormat(i(e),t)})}),f(c[0]).each(function(t){return os(n,t.dom,us)}))}}})},wb=function(n,t,e){var r=Kc(n),o=function(t){return Sa(ta(n)).bind(function(n){return Mr(n,r).map(function(r){var o=va(e,r,n);return t(r,o)})}).getOr("")};It({mceTableRowType:function(){return o(t.getTableRowType)},mceTableCellType:function(){return o(t.getTableCellType)},mceTableColType:function(){return o(t.getTableColType)}},function(t,e){return n.addQueryValueHandler(e,t)})},yb=function(){var n=hv(),t=hv();return{getRows:n.get,setRows:function(e){e.fold(n.clear,n.set),t.clear()},clearRows:n.clear,getColumns:t.get,setColumns:function(e){e.fold(t.clear,t.set),n.clear()},clearColumns:t.clear}},Cb={remove_similar:!0,inherit:!1},Sb=on({selector:"td,th"},Cb),Tb={tablecellbackgroundcolor:on({styles:{backgroundColor:"%value"}},Sb),tablecellverticalalign:on({styles:{"vertical-align":"%value"}},Sb),tablecellbordercolor:on({styles:{borderColor:"%value"}},Sb),tablecellclass:on({classes:["%value"]},Sb),tableclass:on({selector:"table",classes:["%value"]},Cb),tablecellborderstyle:on({styles:{borderStyle:"%value"}},Sb),tablecellborderwidth:on({styles:{borderWidth:"%value"}},Sb)},xb=function(n){n.formatter.register(Tb)},Rb=su.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Db=function(n){return void 0===n&&(n=void 0),Rb.none(n)},Ob=on(on({},Rb),{none:Db}),Ab=function(n,t,e,r,o){void 0===o&&(o=x);var u=1===r;if(!u&&e<=0)return Ob.first(n[0]);if(u&&e>=n.length-1)return Ob.last(n[n.length-1]);var i=e+r,c=n[i];return o(c)?Ob.middle(t,c):Ab(n,t,i,r,o)},kb=function(n,t){return Mr(n,t).bind(function(t){var e=Ir(t),r=G(e,function(t){return Tt(n,t)});return r.map(function(n){return{index:n,all:e}})})},Ib=function(n,t,e){var r=kb(n,e);return r.fold(function(){return Ob.none(n)},function(e){return Ab(e.all,n,e.index,1,t)})},Bb=function(n,t,e){var r=kb(n,e);return r.fold(function(){return Ob.none()},function(e){return Ab(e.all,n,e.index,-1,t)})},Mb=function(n,t,e,r){return{start:n,soffset:t,finish:e,foffset:r}},Eb={create:Mb},Pb=su.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Nb=function(n,t,e,r){return n.fold(t,e,r)},zb=function(n){return n.fold(h,h,h)},Lb=Pb.before,_b=Pb.on,Wb=Pb.after,jb={before:Lb,on:_b,after:Wb,cata:Nb,getStart:zb},Fb=su.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Hb=function(n){return Fb.exact(n.start,n.soffset,n.finish,n.foffset)},Vb=function(n){return n.match({domRange:function(n){return ht.fromDom(n.startContainer)},relative:function(n,t){return jb.getStart(n)},exact:function(n,t,e,r){return n}})},Ub=Fb.domRange,qb=Fb.relative,Gb=Fb.exact,$b=function(n){var t=Vb(n);return ge(t)},Kb=Eb.create,Xb={domRange:Ub,relative:qb,exact:Gb,exactFromRange:Hb,getWin:$b,range:Kb},Yb=function(n,t){var e=n.document.createRange();return e.selectNode(t.dom),e},Jb=function(n,t){var e=n.document.createRange();return Qb(e,t),e},Qb=function(n,t){return n.selectNodeContents(t.dom)},Zb=function(n,t){t.fold(function(t){n.setStartBefore(t.dom)},function(t,e){n.setStart(t.dom,e)},function(t){n.setStartAfter(t.dom)})},nh=function(n,t){t.fold(function(t){n.setEndBefore(t.dom)},function(t,e){n.setEnd(t.dom,e)},function(t){n.setEndAfter(t.dom)})},th=function(n,t,e){var r=n.document.createRange();return Zb(r,t),nh(r,e),r},eh=function(n,t,e,r,o){var u=n.document.createRange();return u.setStart(t.dom,e),u.setEnd(r.dom,o),u},rh=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}},oh=function(n){var t=n.getClientRects(),e=t.length>0?t[0]:n.getBoundingClientRect();return e.width>0||e.height>0?k.some(e).map(rh):k.none()},uh=su.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ih=function(n,t,e){return t(ht.fromDom(e.startContainer),e.startOffset,ht.fromDom(e.endContainer),e.endOffset)},ch=function(n,t){return t.match({domRange:function(n){return{ltr:b(n),rtl:k.none}},relative:function(t,e){return{ltr:cn(function(){return th(n,t,e)}),rtl:cn(function(){return k.some(th(n,e,t))})}},exact:function(t,e,r,o){return{ltr:cn(function(){return eh(n,t,e,r,o)}),rtl:cn(function(){return k.some(eh(n,r,o,t,e))})}}})},ah=function(n,t){var e=t.ltr();if(e.collapsed){var r=t.rtl().filter(function(n){return!1===n.collapsed});return r.map(function(n){return uh.rtl(ht.fromDom(n.endContainer),n.endOffset,ht.fromDom(n.startContainer),n.startOffset)}).getOrThunk(function(){return ih(n,uh.ltr,e)})}return ih(n,uh.ltr,e)},lh=function(n,t){var e=ch(n,t);return ah(n,e)},fh=function(n,t){var e=lh(n,t);return e.match({ltr:function(t,e,r,o){var u=n.document.createRange();return u.setStart(t.dom,e),u.setEnd(r.dom,o),u},rtl:function(t,e,r,o){var u=n.document.createRange();return u.setStart(r.dom,o),u.setEnd(t.dom,e),u}})};uh.ltr,uh.rtl;var sh=function(n,t,e,r,o){if(0===o)return 0;if(t===r)return o-1;for(var u=r,i=1;i<o;i++){var c=n(i),a=Math.abs(t-c.left);if(e<=c.bottom){if(e<c.top||a>u)return i-1;u=a}}return 0},mh=function(n,t,e){return t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom},dh=function(n,t,e,r,o){var u=function(e){var r=n.dom.createRange();return r.setStart(t.dom,e),r.collapse(!0),r},i=function(n){var t=u(n);return t.getBoundingClientRect()},c=Wo(t).length,a=sh(i,e,r,o.right,c);return u(a)},gh=function(n,t,e,r){var o=n.dom.createRange();o.selectNode(t.dom);var u=o.getClientRects(),i=rn(u,function(n){return mh(n,e,r)?k.some(n):k.none()});return i.map(function(o){return dh(n,t,e,r,o)})},ph=function(n,t,e,r){var o=n.dom.createRange(),u=ye(t);return rn(u,function(t){return o.selectNode(t.dom),mh(o.getBoundingClientRect(),e,r)?vh(n,t,e,r):k.none()})},vh=function(n,t,e,r){return ae(t)?gh(n,t,e,r):ph(n,t,e,r)},bh=function(n,t,e,r){var o=n.dom.createRange();o.selectNode(t.dom);var u=o.getBoundingClientRect(),i=Math.max(u.left,Math.min(u.right,e)),c=Math.max(u.top,Math.min(u.bottom,r));return vh(n,t,i,c)},hh=!0,wh=!1,yh=function(n,t){return t-n.left<n.right-t?hh:wh},Ch=function(n,t,e){var r=n.dom.createRange();return r.selectNode(t.dom),r.collapse(e),r},Sh=function(n,t,e){var r=n.dom.createRange();r.selectNode(t.dom);var o=r.getBoundingClientRect(),u=yh(o,e),i=u===hh?Ac:kc;return i(t).map(function(t){return Ch(n,t,u)})},Th=function(n,t,e){var r=t.dom.getBoundingClientRect(),o=yh(r,e);return k.some(Ch(n,t,o))},xh=function(n,t,e){var r=0===ye(t).length?Th:Sh;return r(n,t,e)},Rh=function(n,t,e){var r,o;return k.from(null===(o=(r=n.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,t,e)).bind(function(t){if(null===t.offsetNode)return k.none();var e=n.dom.createRange();return e.setStart(t.offsetNode,t.offset),e.collapse(),k.some(e)})},Dh=function(n,t,e){var r,o;return k.from(null===(o=(r=n.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,t,e))},Oh=function(n,t,e,r){var o=n.dom.createRange();o.selectNode(t.dom);var u=o.getBoundingClientRect(),i=Math.max(u.left,Math.min(u.right,e)),c=Math.max(u.top,Math.min(u.bottom,r));return bh(n,t,i,c)},Ah=function(n,t,e){return ht.fromPoint(n,t,e).bind(function(r){var o=function(){return xh(n,r,t)};return 0===ye(r).length?o():Oh(n,r,t,e).orThunk(o)})},kh=function(){return document.caretPositionFromPoint?Rh:document.caretRangeFromPoint?Dh:Ah}(),Ih=function(n,t,e){var r=ht.fromDom(n.document);return kh(r,t,e).map(function(n){return Eb.create(ht.fromDom(n.startContainer),n.startOffset,ht.fromDom(n.endContainer),n.endOffset)})},Bh=function(n,t){var e=re(n);return"input"===e?jb.after(n):P(["br","img"],e)?0===t?jb.before(n):jb.after(n):jb.on(n,t)},Mh=function(n,t){var e=n.fold(jb.before,Bh,jb.after),r=t.fold(jb.before,Bh,jb.after);return Xb.relative(e,r)},Eh=function(n,t,e,r){var o=Bh(n,t),u=Bh(e,r);return Xb.relative(o,u)},Ph=function(n){return n.match({domRange:function(n){var t=ht.fromDom(n.startContainer),e=ht.fromDom(n.endContainer);return Eh(t,n.startOffset,e,n.endOffset)},relative:Mh,exact:Eh})},Nh=function(n,t,e,r){var o=me(n),u=o.dom.createRange();return u.setStart(n.dom,t),u.setEnd(e.dom,r),u},zh=function(n,t,e,r){var o=Nh(n,t,e,r),u=Tt(n,e)&&t===r;return o.collapsed&&!u},Lh=function(n){return k.from(n.getSelection())},_h=function(n,t){Lh(n).each(function(n){n.removeAllRanges(),n.addRange(t)})},Wh=function(n,t,e,r,o){var u=eh(n,t,e,r,o);_h(n,u)},jh=function(n,t,e,r,o,u){t.collapse(e.dom,r),t.extend(o.dom,u)},Fh=function(n,t){return lh(n,t).match({ltr:function(t,e,r,o){Wh(n,t,e,r,o)},rtl:function(t,e,r,o){Lh(n).each(function(u){if(u.setBaseAndExtent)u.setBaseAndExtent(t.dom,e,r.dom,o);else if(u.extend)try{jh(n,u,t,e,r,o)}catch(i){Wh(n,r,o,t,e)}else Wh(n,r,o,t,e)})}})},Hh=function(n,t,e,r,o){var u=Eh(t,e,r,o);Fh(n,u)},Vh=function(n,t,e){var r=Mh(t,e);Fh(n,r)},Uh=function(n){var t=Xb.getWin(n).dom,e=function(n,e,r,o){return eh(t,n,e,r,o)},r=Ph(n);return lh(t,r).match({ltr:e,rtl:e})},qh=function(n){if(n.rangeCount>0){var t=n.getRangeAt(0),e=n.getRangeAt(n.rangeCount-1);return k.some(Eb.create(ht.fromDom(t.startContainer),t.startOffset,ht.fromDom(e.endContainer),e.endOffset))}return k.none()},Gh=function(n){if(null===n.anchorNode||null===n.focusNode)return qh(n);var t=ht.fromDom(n.anchorNode),e=ht.fromDom(n.focusNode);return zh(t,n.anchorOffset,e,n.focusOffset)?k.some(Eb.create(t,n.anchorOffset,e,n.focusOffset)):qh(n)},$h=function(n,t,e){void 0===e&&(e=!0);var r=e?Jb:Yb,o=r(n,t);_h(n,o)},Kh=function(n){return Lh(n).filter(function(n){return n.rangeCount>0}).bind(Gh)},Xh=function(n){return Kh(n).map(function(n){return Xb.exact(n.start,n.soffset,n.finish,n.foffset)})},Yh=function(n,t){var e=fh(n,t);return oh(e)},Jh=function(n,t,e){return Ih(n,t,e)},Qh=function(n){Lh(n).each(function(n){return n.removeAllRanges()})},Zh=tinymce.util.Tools.resolve("tinymce.util.VK"),nw=function(n,t,e){return rw(n,t,Ib(e,Tf))},tw=function(n,t,e){return rw(n,t,Bb(e,Tf))},ew=function(n,t){var e=Xb.exact(t,0,t,0);return Uh(e)},rw=function(n,t,e){return e.fold(k.none,k.none,function(t,e){return Ac(e).map(function(t){return ew(n,t)})},function(e){return n.execCommand("mceTableInsertRowAfter"),nw(n,t,e)})},ow=["table","li","dl"],uw=function(n,t,e){if(n.keyCode===Zh.TAB){var r=qc(t),o=function(n){var t=re(n);return Tt(n,r)||P(ow,t)},u=t.selection.getRng(),i=ht.fromDom(n.shiftKey?u.startContainer:u.endContainer);kr(i,o).each(function(r){n.preventDefault(),Mr(r,o).each(e.clear),t.selection.collapse(n.shiftKey);var u=n.shiftKey?tw:nw,i=u(t,o,r);i.each(function(n){t.selection.setRng(n)})})}},iw=function(n,t){return{selection:n,kill:t}},cw={create:iw},aw=function(n,t,e,r){return{start:jb.on(n,t),finish:jb.on(e,r)}},lw={create:aw},fw=function(n,t){var e=fh(n,t);return Eb.create(ht.fromDom(e.startContainer),e.startOffset,ht.fromDom(e.endContainer),e.endOffset)},sw=lw.create,mw=function(n,t,e,r,o,u,i){return Tt(e,o)&&r===u?k.none():Ke(e,"td,th",t).bind(function(e){return Ke(o,"td,th",t).bind(function(r){return dw(n,t,e,r,i)})})},dw=function(n,t,e,r,o){return Tt(e,r)?k.none():eu(e,r,t).bind(function(t){var r=t.boxes.getOr([]);return r.length>1?(o(n,r,t.start,t.finish),k.some(cw.create(k.some(sw(e,0,e,xc(e))),!0))):k.none()})},gw=function(n,t,e,r,o){var u=function(n){return o.clearBeforeUpdate(e),o.selectRange(e,n.boxes,n.start,n.finish),n.boxes};return cu(r,n,t,o.firstSelectedSelector,o.lastSelectedSelector).map(u)},pw=function(n,t){return{item:n,mode:t}},vw=function(n,t,e,r){return void 0===r&&(r=bw),n.property().parent(t).map(function(n){return pw(n,r)})},bw=function(n,t,e,r){return void 0===r&&(r=hw),e.sibling(n,t).map(function(n){return pw(n,r)})},hw=function(n,t,e,r){void 0===r&&(r=hw);var o=n.property().children(t),u=e.first(o);return u.map(function(n){return pw(n,r)})},ww=[{current:vw,next:bw,fallback:k.none()},{current:bw,next:hw,fallback:k.some(vw)},{current:hw,next:hw,fallback:k.some(bw)}],yw=function(n,t,e,r,o){void 0===o&&(o=ww);var u=q(o,function(n){return n.current===e});return u.bind(function(e){return e.current(n,t,r,e.next).orThunk(function(){return e.fallback.bind(function(e){return yw(n,t,e,r)})})})},Cw=function(){var n=function(n,t){return n.query().prevSibling(t)},t=function(n){return n.length>0?k.some(n[n.length-1]):k.none()};return{sibling:n,first:t}},Sw=function(){var n=function(n,t){return n.query().nextSibling(t)},t=function(n){return n.length>0?k.some(n[0]):k.none()};return{sibling:n,first:t}},Tw={left:Cw,right:Sw},xw=function(n,t,e,r,o,u){var i=yw(n,t,r,o);return i.bind(function(t){return u(t.item)?k.none():e(t.item)?k.some(t.item):xw(n,t.item,e,t.mode,o,u)})},Rw=function(n,t,e,r){return xw(n,t,e,bw,Tw.left(),r)},Dw=function(n,t,e,r){return xw(n,t,e,bw,Tw.right(),r)},Ow=function(n){return function(t){return 0===n.property().children(t).length}},Aw=function(n,t,e){return Iw(n,t,Ow(n),e)},kw=function(n,t,e){return Bw(n,t,Ow(n),e)},Iw=Rw,Bw=Dw,Mw=Vo(),Ew=function(n,t){return Aw(Mw,n,t)},Pw=function(n,t){return kw(Mw,n,t)},Nw=function(n,t,e){return Iw(Mw,n,t,e)},zw=function(n,t,e){return Bw(Mw,n,t,e)},Lw=function(n,t,e){return Fe(n,t,e).isSome()},_w=su.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Ww=function(n,t,e){var r=n.getRect(t),o=n.getRect(e);return o.right>r.left&&o.left<r.right},jw=function(n){return Ke(n,"tr")},Fw=function(n,t,e,r,o,u,i){return Ke(r,"td,th",i).bind(function(e){return Ke(t,"td,th",i).map(function(t){return Tt(e,t)?Tt(r,e)&&xc(e)===o?u(t):_w.none("in same cell"):Zo(jw,[e,t]).fold(function(){return Ww(n,t,e)?_w.success():u(t)},function(n){return u(t)})})}).getOr(_w.none("default"))},Hw=function(n,t,e,r,o){return n.fold(t,e,r,o)},Vw=on(on({},_w),{verify:Fw,cata:Hw}),Uw=function(n,t,e,r){return{parent:n,children:t,element:e,index:r}},qw=function(n){return pe(n).bind(function(t){var e=ye(t);return Gw(e,n).map(function(r){return Uw(t,e,n,r)})})},Gw=function(n,t){return G(n,y(Tt,t))},$w=function(n){return"br"===re(n)},Kw=function(n,t,e){return t(n,e).bind(function(n){return ae(n)&&0===Wo(n).trim().length?Kw(n,t,e):k.some(n)})},Xw=function(n,t,e){return e.traverse(t).orThunk(function(){return Kw(t,e.gather,n)}).map(e.relative)},Yw=function(n,t){return Ce(n,t).filter($w).orThunk(function(){return Ce(n,t-1).filter($w)})},Jw=function(n,t,e,r){return Yw(t,e).bind(function(t){return r.traverse(t).fold(function(){return Kw(t,r.gather,n).map(r.relative)},function(n){return qw(n).map(function(n){return jb.on(n.parent,n.index)})})})},Qw=function(n,t,e,r){var o=$w(t)?Xw(n,t,r):Jw(n,t,e,r);return o.map(function(n){return{start:n,finish:n}})},Zw=function(n){return Vw.cata(n,function(n){return k.none()},function(){return k.none()},function(n){return k.some(im(n,0))},function(n){return k.some(im(n,xc(n)))})},ny=function(n,t){return{left:n.left,top:n.top+t,right:n.right,bottom:n.bottom+t}},ty=function(n,t){return{left:n.left,top:n.top-t,right:n.right,bottom:n.bottom-t}},ey=function(n,t,e){return{left:n.left+t,top:n.top+e,right:n.right+t,bottom:n.bottom+e}},ry=function(n){return n.top},oy=function(n){return n.bottom},uy=function(n,t,e){return e>=0&&e<xc(t)?n.getRangedRect(t,e,t,e+1):e>0?n.getRangedRect(t,e-1,t,e):k.none()},iy=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}},cy=function(n,t){return k.some(n.getRect(t))},ay=function(n,t,e){return ce(t)?cy(n,t).map(iy):ae(t)?uy(n,t,e).map(iy):k.none()},ly=function(n,t){return ce(t)?cy(n,t).map(iy):ae(t)?n.getRangedRect(t,0,t,xc(t)).map(iy):k.none()},fy=5,sy=100,my=su.generate([{none:[]},{retry:["caret"]}]),dy=function(n,t){return n.left<t.left||Math.abs(t.right-n.left)<1||n.left>t.right},gy=function(n,t,e){return He(t,cg).fold(T,function(t){return ly(n,t).exists(function(n){return dy(e,n)})})},py=function(n,t,e,r,o){var u=ny(o,fy);return Math.abs(e.bottom-r.bottom)<1||e.top>o.bottom?my.retry(u):e.top===o.bottom?my.retry(ny(o,1)):gy(n,t,o)?my.retry(ey(u,fy,0)):my.none()},vy=function(n,t,e,r,o){var u=ty(o,fy);return Math.abs(e.top-r.top)<1||e.bottom<o.top?my.retry(u):e.bottom===o.top?my.retry(ty(o,1)):gy(n,t,o)?my.retry(ey(u,fy,0)):my.none()},by={point:ry,adjuster:vy,move:ty,gather:Ew},hy={point:oy,adjuster:py,move:ny,gather:Pw},wy=function(n,t,e){return n.elementFromPoint(t,e).filter(function(n){return"table"===re(n)}).isSome()},yy=function(n,t,e,r,o){return Cy(n,t,e,t.move(r,fy),o)},Cy=function(n,t,e,r,o){return 0===o?k.some(r):wy(n,r.left,t.point(r))?yy(n,t,e,r,o-1):n.situsFromPoint(r.left,t.point(r)).bind(function(u){return u.start.fold(k.none,function(u){return ly(n,u).bind(function(i){return t.adjuster(n,u,i,e,r).fold(k.none,function(r){return Cy(n,t,e,r,o-1)})}).orThunk(function(){return k.some(r)})},k.none)})},Sy=function(n,t){return n.situsFromPoint(t.left,t.bottom+fy)},Ty=function(n,t){return n.situsFromPoint(t.left,t.top-fy)},xy=function(n,t,e){return n.point(t)>e.getInnerHeight()?k.some(n.point(t)-e.getInnerHeight()):n.point(t)<0?k.some(-n.point(t)):k.none()},Ry=function(n,t,e){var r=n.move(e,fy),o=Cy(t,n,e,r,sy).getOr(r);return xy(n,o,t).fold(function(){return t.situsFromPoint(o.left,n.point(o))},function(e){return t.scrollBy(0,e),t.situsFromPoint(o.left,n.point(o)-e)})},Dy={tryUp:y(Ry,by),tryDown:y(Ry,hy),ieTryUp:Ty,ieTryDown:Sy,getJumpSize:b(fy)},Oy=20,Ay=function(n,t,e){return n.getSelection().bind(function(r){return Qw(t,r.finish,r.foffset,e).fold(function(){return k.some(im(r.finish,r.foffset))},function(o){var u=n.fromSitus(o),i=Vw.verify(n,r.finish,r.foffset,u.finish,u.foffset,e.failure,t);return Zw(i)})})},ky=function(n,t,e,r,o,u){return 0===u?k.none():My(n,t,e,r,o).bind(function(i){var c=n.fromSitus(i),a=Vw.verify(n,e,r,c.finish,c.foffset,o.failure,t);return Vw.cata(a,function(){return k.none()},function(){return k.some(i)},function(i){return Tt(e,i)&&0===r?Iy(n,e,r,ty,o):ky(n,t,i,0,o,u-1)},function(i){return Tt(e,i)&&r===xc(i)?Iy(n,e,r,ny,o):ky(n,t,i,xc(i),o,u-1)})})},Iy=function(n,t,e,r,o){return ay(n,t,e).bind(function(t){return By(n,o,r(t,Dy.getJumpSize()))})},By=function(n,t,e){var r=ut().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?t.otherRetry(n,e):r.isIE()?t.ieRetry(n,e):k.none()},My=function(n,t,e,r,o){return ay(n,e,r).bind(function(t){return By(n,o,t)})},Ey=function(n,t,e){return Ay(n,t,e).bind(function(r){return ky(n,t,r.element,r.offset,e,Oy).map(n.fromSitus)})},Py=function(n,t){return Lw(n,function(n){return pe(n).exists(function(n){return Tt(n,t)})})},Ny=function(n,t,e,r,o){return Ke(r,"td,th",t).bind(function(r){return Ke(r,"table",t).bind(function(u){return Py(o,u)?Ey(n,t,e).bind(function(n){return Ke(n.finish,"td,th",t).map(function(t){return{start:r,finish:t,range:n}})}):k.none()})})},zy=function(n,t,e,r,o,u){return ut().browser.isIE()?k.none():u(r,t).orThunk(function(){return Ny(n,t,e,r,o).map(function(n){var t=n.range;return cw.create(k.some(sw(t.start,t.soffset,t.finish,t.foffset)),!0)})})},Ly=function(n,t){return Ke(n,"tr",t).bind(function(n){return Ke(n,"table",t).bind(function(e){var r=We(e,"tr");return Tt(n,r[0])?Nw(e,function(n){return kc(n).isSome()},t).map(function(n){var t=xc(n);return cw.create(k.some(sw(n,t,n,t)),!0)}):k.none()})})},_y=function(n,t){return Ke(n,"tr",t).bind(function(n){return Ke(n,"table",t).bind(function(e){var r=We(e,"tr");return Tt(n,r[r.length-1])?zw(e,function(n){return Ac(n).isSome()},t).map(function(n){return cw.create(k.some(sw(n,0,n,0)),!0)}):k.none()})})},Wy=function(n,t,e,r,o,u,i){return Ny(n,e,r,o,u).bind(function(n){return dw(t,e,n.start,n.finish,i)})},jy=function(n,t){return Ke(n,"td,th",t)},Fy=function(n,t,e,r){var o=hv(),u=o.clear,i=function(u){o.on(function(o){r.clearBeforeUpdate(t),jy(u.target,e).each(function(i){eu(o,i,e).each(function(e){var o=e.boxes.getOr([]);if(1===o.length){var c=o[0],a="false"===xf(c),l=rr(Sf(u.target),c,Tt);a&&l&&(r.selectRange(t,o,c,c),n.selectContents(c))}else o.length>1&&(r.selectRange(t,o,e.start,e.finish),n.selectContents(i))})})})},c=function(n){r.clear(t),jy(n.target,e).each(o.set)},a=function(n){i(n)},l=function(n){i(n),u()};return{clearstate:u,mousedown:c,mouseover:a,mouseup:l}},Hy={traverse:we,gather:Pw,relative:jb.before,otherRetry:Dy.tryDown,ieRetry:Dy.ieTryDown,failure:Vw.failedDown},Vy={traverse:he,gather:Ew,relative:jb.before,otherRetry:Dy.tryUp,ieRetry:Dy.ieTryUp,failure:Vw.failedUp},Uy=function(n){return function(t){return t===n}},qy=Uy(38),Gy=Uy(40),$y=function(n){return n>=37&&n<=40},Ky={isBackward:Uy(37),isForward:Uy(39)},Xy={isBackward:Uy(39),isForward:Uy(37)},Yy=function(n){var t=void 0!==n?n.dom:document,e=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return Qu(e,r)},Jy=function(n,t,e){var r=void 0!==e?e.dom:document,o=r.defaultView;o&&o.scrollBy(n,t)},Qy=function(n){var t=function(t,e){return ht.fromPoint(ht.fromDom(n.document),t,e)},e=function(n){return n.dom.getBoundingClientRect()},r=function(t,e,r,o){var u=Xb.exact(t,e,r,o);return Yh(n,u)},o=function(){return Xh(n).map(function(t){return fw(n,t)})},u=function(t){var e=Xb.relative(t.start,t.finish);return fw(n,e)},i=function(t,e){return Jh(n,t,e).map(function(n){return lw.create(n.start,n.soffset,n.finish,n.foffset)})},c=function(){Qh(n)},a=function(t){void 0===t&&(t=!1),Xh(n).each(function(e){return e.fold(function(n){return n.collapse(t)},function(e,r){var o=t?e:r;Vh(n,o,o)},function(e,r,o,u){var i=t?e:o,c=t?r:u;Hh(n,i,c,i,c)})})},l=function(t){$h(n,t,!1)},f=function(t){$h(n,t)},s=function(t){Hh(n,t.start,t.soffset,t.finish,t.foffset)},m=function(t,e){Vh(n,t,e)},d=function(){return n.innerHeight},g=function(){var t=Yy(ht.fromDom(n.document));return t.top},p=function(t,e){Jy(t,e,ht.fromDom(n.document))};return{elementFromPoint:t,getRect:e,getRangedRect:r,getSelection:o,fromSitus:u,situsFromPoint:i,clearSelection:c,collapseSelection:a,setSelection:s,setRelativeSelection:m,selectNode:l,selectContents:f,getInnerHeight:d,getScrollY:g,scrollBy:p}},Zy=function(n,t){return{rows:n,cols:t}},nC=function(n,t,e,r){var o=Qy(n),u=Fy(o,t,e,r);return{clearstate:u.clearstate,mousedown:u.mousedown,mouseover:u.mouseover,mouseup:u.mouseup}},tC=function(n,t,e,r){var o=Qy(n),u=function(){return r.clear(t),k.none()},i=function(n,i,c,a,l,f){var s=n.raw,m=s.which,d=!0===s.shiftKey,g=ru(t,r.selectedSelector).fold(function(){return $y(m)&&!d&&r.clearBeforeUpdate(t),Gy(m)&&d?y(Wy,o,t,e,Hy,a,i,r.selectRange):qy(m)&&d?y(Wy,o,t,e,Vy,a,i,r.selectRange):Gy(m)?y(zy,o,e,Hy,a,i,_y):qy(m)?y(zy,o,e,Vy,a,i,Ly):k.none},function(n){var e=function(e){return function(){var u=rn(e,function(e){return gw(e.rows,e.cols,t,n,r)});return u.fold(function(){return uu(t,r.firstSelectedSelector,r.lastSelectedSelector).map(function(n){var e=Gy(m)||f.isForward(m)?jb.after:jb.before;return o.setRelativeSelection(jb.on(n.first,0),e(n.table)),r.clear(t),cw.create(k.none(),!0)})},function(n){return k.some(cw.create(k.none(),!0))})}};return Gy(m)&&d?e([Zy(1,0)]):qy(m)&&d?e([Zy(-1,0)]):f.isBackward(m)&&d?e([Zy(0,-1),Zy(-1,0)]):f.isForward(m)&&d?e([Zy(0,1),Zy(1,0)]):$y(m)&&!d?u:k.none});return g()},c=function(n,o,u,i,c){return ru(t,r.selectedSelector).fold(function(){var a=n.raw,l=a.which,f=!0===a.shiftKey;return f&&$y(l)?mw(t,e,o,u,i,c,r.selectRange):k.none()},k.none)};return{keydown:i,keyup:c}},eC=function(n,t,e,r){var o=Qy(n);return function(n,u){r.clearBeforeUpdate(t),eu(n,u,e).each(function(n){var e=n.boxes.getOr([]);r.selectRange(t,e,n.start,n.finish),o.selectContents(u),o.collapseSelection()})}},rC=function(n,t){_(t,function(t){ff(n,t)})},oC=function(n){return function(t){af(t,n)}},uC=function(n){return function(t){rC(t,n)}},iC=function(n){var t=oC(n.selected),e=uC([n.selected,n.lastSelected,n.firstSelected]),r=function(t){var r=We(t,n.selectedSelector);_(r,e)},o=function(e,o,u,i){r(e),_(o,t),af(u,n.firstSelected),af(i,n.lastSelected)};return{clearBeforeUpdate:r,clear:r,selectRange:o,selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},cC=function(n,t,e){var r=function(t){tr(t,n.selected),tr(t,n.firstSelected),tr(t,n.lastSelected)},o=function(t){Ye(t,n.selected,"1")},u=function(n){i(n),e()},i=function(t){var e=We(t,n.selectedSelector+","+n.firstSelectedSelector+","+n.lastSelectedSelector);_(e,r)},c=function(e,r,i,c){u(e),_(r,o),Ye(i,n.firstSelected,"1"),Ye(c,n.lastSelected,"1"),t(r,i,c)};return{clearBeforeUpdate:i,clear:u,selectRange:c,selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},aC={byClass:iC,byAttr:cC},lC=function(n,t){var e=n.slice(0,t[t.length-1].row+1),r=Fm(e);return K(r,function(n){var e=n.cells.slice(0,t[t.length-1].column+1);return L(e,function(n){return n.element})})},fC=function(n,t){var e=n.slice(t[0].row+t[0].rowspan-1,n.length),r=Fm(e);return K(r,function(n){var e=n.cells.slice(t[0].column+t[0].colspan-1,n.cells.length);return L(e,function(n){return n.element})})},sC=function(n,t,e){var r=lo.fromTable(n),o=Xm(r,t);return o.map(function(n){var t=Wm(r,e,!1),o=lC(t,n),u=fC(t,n);return{upOrLeftCells:o,downOrRightCells:u}})},mC=tinymce.util.Tools.resolve("tinymce.Env"),dC=function(n){return!1===sf(ht.fromDom(n.target),"ephox-snooker-resizer-bar")};function gC(n,t,e){var r=function(t,r,o){e.targets().each(function(e){var u=Mr(r);u.each(function(u){var i=Fs(n),c=jc(g,ht.fromDom(n.getDoc()),i),a=sC(u,e,c);es(n,t,r,o,a)})})},o=function(){return rs(n)},u=aC.byAttr(ga,r,o);return n.on("init",function(e){var r=n.getWin(),o=qc(n),i=Kc(n),c=function(){var t=n.selection,e=ht.fromDom(t.getStart()),r=ht.fromDom(t.getEnd()),i=Zo(Mr,[e,r]);i.fold(function(){return u.clear(o)},g)},a=nC(r,o,i,u),l=tC(r,o,i,u),f=eC(r,o,i,u),s=function(n){return!0===n.raw.shiftKey};n.on("TableSelectorChange",function(n){return f(n.start,n.finish)});var m=function(t,e){s(t)&&(e.kill&&t.kill(),e.selection.each(function(t){var e=Xb.relative(t.start,t.finish),o=fh(r,e);n.selection.setRng(o)}))},d=function(t){var e=Zl(t);if(e.raw.shiftKey&&$y(e.raw.which)){var r=n.selection.getRng(),o=ht.fromDom(r.startContainer),u=ht.fromDom(r.endContainer);l.keyup(e,o,r.startOffset,u,r.endOffset).each(function(n){m(e,n)})}},p=function(e){var r=Zl(e);t().each(function(n){return n.hideBars()});var o=n.selection.getRng(),u=ht.fromDom(o.startContainer),i=ht.fromDom(o.endContainer),c=qu(Ky,Xy)(ht.fromDom(n.selection.getStart()));l.keydown(r,u,o.startOffset,i,o.endOffset,c).each(function(n){m(r,n)}),t().each(function(n){return n.showBars()})},v=function(n){return 0===n.button},b=function(n){return void 0===n.buttons||(!(!mC.browser.isEdge()||0!==n.buttons)||0!==(1&n.buttons))},h=function(n){a.clearstate()},w=function(n){v(n)&&dC(n)&&a.mousedown(Zl(n))},y=function(n){b(n)&&dC(n)&&a.mouseover(Zl(n))},C=function(n){v(n)&&dC(n)&&a.mouseup(Zl(n))},S=function(){var n=pv(ht.fromDom(o)),t=pv(0),e=function(e){var r=ht.fromDom(e.target);if("td"===re(r)||"th"===re(r)){var o=n.get(),u=t.get();Tt(o,r)&&e.timeStamp-u<300&&(e.preventDefault(),f(r,r))}n.set(r),t.set(e.timeStamp)};return{touchEnd:e}},T=S();n.on("dragstart",h),n.on("mousedown",w),n.on("mouseover",y),n.on("mouseup",C),n.on("touchend",T.touchEnd),n.on("keyup",d),n.on("keydown",p),n.on("NodeChange",c)}),{clear:u.clear}}var pC=function(n,t){return Ge(n,t).isSome()},vC=function(n,t){var e=pv(k.none()),r=pv([]),o=k.none(),u=se("caption"),i=function(n){return o.forall(function(t){return!t[n]})},c=function(){return Ca(ta(n),Kc(n))},a=function(){return Ca(ea(n),Kc(n))},l=function(){return c().bind(function(n){return cr(ur(Mr(n),a().bind(Mr),function(e,r){return Tt(e,r)?u(n)?k.some(pa(n)):k.some(va(t,e,n)):k.none()}))})},f=function(n){var t=Mr(n.element);return t.map(function(t){var e=lo.fromTable(t),r=Xm(e,n).getOr([]),o=V(r,function(n,t){return t.isLocked&&(n.onAny=!0,0===t.column?n.onFirst=!0:t.column+t.colspan>=e.grid.columns&&(n.onLast=!0)),n},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Zm(e,n).isSome(),unmergeable:nd(e,n).isSome(),locked:o}})},s=function(){e.set(cn(l)()),o=e.get().bind(f),_(r.get(),function(n){return n()})},m=function(n){return n(),r.set(r.get().concat([n])),function(){r.set(F(r.get(),function(t){return t!==n}))}},d=function(n,t){return m(function(){return e.get().fold(function(){n.setDisabled(!0)},function(e){n.setDisabled(t(e))})})},g=function(n,t,r){return m(function(){return e.get().fold(function(){n.setDisabled(!0),n.setActive(!1)},function(e){n.setDisabled(t(e)),n.setActive(r(e))})})},p=function(n){return o.exists(function(t){return t.locked[n]})},v=function(n){return d(n,function(n){return!1})},b=function(n){return d(n,function(n){return u(n.element)})},h=function(n){return function(t){return d(t,function(t){return u(t.element)||p(n)})}},w=function(n){return function(t){return d(t,function(t){return u(t.element)||n().isNone()})}},y=function(n,t){return function(e){return d(e,function(e){return u(e.element)||n().isNone()||p(t)})}},C=function(n){return d(n,function(n){return i("mergeable")})},S=function(n){return d(n,function(n){return i("unmergeable")})},x=function(t){return g(t,T,function(t){var e=Mr(t.element,Kc(n));return e.exists(function(n){return pC(n,"caption")})})},R=function(t,e){return function(r){return g(r,function(n){return u(n.element)},function(){return n.queryCommandValue(t)===e})}},D=R("mceTableRowType","header"),O=R("mceTableColType","th");return n.on("NodeChange ExecCommand TableSelectorChange",s),{onSetupTable:v,onSetupCellOrRow:b,onSetupColumn:h,onSetupPasteable:w,onSetupPasteableColumn:y,onSetupMergeable:C,onSetupUnmergeable:S,resetTargets:s,onSetupTableWithCaption:x,onSetupTableRowHeaders:D,onSetupTableColumnHeaders:O,targets:e.get}},bC=function(n,t,e,r){n.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(n){return n("inserttable | cell row column | advtablesort | tableprops deletetable")}});var o=function(t){return function(){return n.execCommand(t)}};n.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:o("mceTableProps"),icon:"table",onSetup:e.onSetupTable}),n.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:o("mceTableDelete"),icon:"table-delete-table",onSetup:e.onSetupTable}),n.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:o("mceTableCellProps"),icon:"table-cell-properties",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:o("mceTableMergeCells"),icon:"table-merge-cells",onSetup:e.onSetupMergeable}),n.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:o("mceTableSplitCells"),icon:"table-split-cells",onSetup:e.onSetupUnmergeable}),n.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:o("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:o("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:o("mceTableDeleteRow"),icon:"table-delete-row",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:o("mceTableRowProps"),icon:"table-row-properties",onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:o("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:e.onSetupColumn("onFirst")}),n.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:o("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:e.onSetupColumn("onLast")}),n.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:o("mceTableDeleteCol"),icon:"table-delete-column",onSetup:e.onSetupColumn("onAny")}),n.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:e.onSetupPasteable(r.getRows)}),n.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:e.onSetupPasteable(r.getRows)}),n.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:e.onSetupColumn("onAny")}),n.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:e.onSetupColumn("onAny")}),n.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:e.onSetupPasteableColumn(r.getColumns,"onFirst")}),n.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:e.onSetupPasteableColumn(r.getColumns,"onLast")}),n.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:o("mceInsertTable"),icon:"table"});var u=xv(Bs(n));0!==u.length&&n.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Rv(n,t,u,"tableclass",function(t){return n.execCommand("mceTableToggleClass",!1,t)}),onSetup:e.onSetupTable});var i=xv(ks(n));0!==i.length&&n.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Rv(n,t,i,"tablecellclass",function(t){return n.execCommand("mceTableCellToggleClass",!1,t)}),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Rv(n,t,nv,"tablecellverticalalign",Tv(n,"vertical-align")),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Rv(n,t,bs(n),"tablecellborderwidth",Tv(n,"border-width")),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Rv(n,t,hs(n),"tablecellborderstyle",Tv(n,"border-style")),onSetup:e.onSetupCellOrRow}),n.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:o("mceTableToggleCaption"),icon:"table-caption",onSetup:e.onSetupTableWithCaption}),n.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(t){return t(Dv(n,Vs(n),"background-color"))},onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(t){return t(Dv(n,Us(n),"border-color"))},onSetup:e.onSetupCellOrRow}),n.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:Ov(n),onSetup:e.onSetupTableRowHeaders}),n.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:Av(n),onSetup:e.onSetupTableColumnHeaders})},hC=function(n){var t=function(t){return n.dom.is(t,"table")&&n.getBody().contains(t)},e=Ns(n);e.length>0&&n.ui.registry.addContextToolbar("table",{predicate:t,items:e,scope:"node",position:"node"})},wC=function(n,t,e,r){var o=function(t){return function(){return n.execCommand(t)}},u=function(t){n.execCommand("mceInsertTable",!1,{rows:t.numRows,columns:t.numColumns})},i={text:"Table properties",onSetup:e.onSetupTable,onAction:o("mceTableProps")},c={text:"Delete table",icon:"table-delete-table",onSetup:e.onSetupTable,onAction:o("mceTableDelete")};n.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:o("mceTableInsertRowBefore"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:o("mceTableInsertRowAfter"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:o("mceTableDeleteRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:o("mceTableRowProps"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:e.onSetupPasteable(r.getRows)}),n.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:e.onSetupPasteable(r.getRows)});var a={type:"nestedmenuitem",text:"Row",getSubmenuItems:b("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")};n.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:o("mceTableInsertColBefore"),onSetup:e.onSetupColumn("onFirst")}),n.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:o("mceTableInsertColAfter"),onSetup:e.onSetupColumn("onLast")}),n.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:o("mceTableDeleteCol"),onSetup:e.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:e.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:e.onSetupColumn("onAny")}),n.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:e.onSetupPasteableColumn(r.getColumns,"onFirst")}),n.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:e.onSetupPasteableColumn(r.getColumns,"onLast")});var l={type:"nestedmenuitem",text:"Column",getSubmenuItems:b("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")};n.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:o("mceTableCellProps"),onSetup:e.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:o("mceTableMergeCells"),onSetup:e.onSetupMergeable}),n.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:o("mceTableSplitCells"),onSetup:e.onSetupUnmergeable});var f={type:"nestedmenuitem",text:"Cell",getSubmenuItems:b("tablecellprops tablemergecells tablesplitcells")};!1===Os(n)?n.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTable")}):n.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:u}]}}),n.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTable")}),n.ui.registry.addMenuItem("tableprops",i),n.ui.registry.addMenuItem("deletetable",c),n.ui.registry.addNestedMenuItem("row",a),n.ui.registry.addNestedMenuItem("column",l),n.ui.registry.addNestedMenuItem("cell",f),n.ui.registry.addContextMenu("table",{update:function(){return e.resetTargets(),e.targets().fold(b(""),function(n){return"caption"===re(n.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}});var s=xv(Bs(n));0!==s.length&&n.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return Sv(n,t,s,"tableclass",function(t){return n.execCommand("mceTableToggleClass",!1,t)})},onSetup:e.onSetupTable});var m=xv(ks(n));0!==m.length&&n.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return Sv(n,t,m,"tablecellclass",function(t){return n.execCommand("mceTableCellToggleClass",!1,t)})},onSetup:e.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return Sv(n,t,nv,"tablecellverticalalign",Tv(n,"vertical-align"))},onSetup:e.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return Sv(n,t,bs(n),"tablecellborderwidth",Tv(n,"border-width"))},onSetup:e.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return Sv(n,t,hs(n),"tablecellborderstyle",Tv(n,"border-style"))},onSetup:e.onSetupCellOrRow}),n.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:o("mceTableToggleCaption"),onSetup:e.onSetupTableWithCaption}),n.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return Dv(n,Vs(n),"background-color")},onSetup:e.onSetupCellOrRow}),n.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return Dv(n,Us(n),"border-color")},onSetup:e.onSetupCellOrRow}),n.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:Ov(n),onSetup:e.onSetupTableRowHeaders}),n.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:Av(n),onSetup:e.onSetupTableColumnHeaders})},yC=function(n){var t=bu(function(){return qc(n)},function(){return Sa(ta(n),Kc(n))},ga.selectedSelector),e=vC(n,t),r=um(n),o=gC(n,r.lazyResize,e),u=Sp(n,o,r.lazyWire),i=yb();return hb(n,u,o,t,i),wb(n,u,t),Aa(n,t,u),wC(n,t,e,i),bC(n,t,e,i),hC(n),n.on("PreInit",function(){n.serializer.addTempAttr(ga.firstSelected),n.serializer.addTempAttr(ga.lastSelected),xb(n)}),Ss(n)&&n.on("keydown",function(t){uw(t,n,o)}),n.on("remove",function(){r.destroy()}),Hp(n,i,r,e)};function CC(){hu.add("table",yC)}CC()})()}}]);