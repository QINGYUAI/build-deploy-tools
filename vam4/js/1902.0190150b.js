"use strict";(self["webpackChunkmeetingvue3"]=self["webpackChunkmeetingvue3"]||[]).push([[1902],{31902:function(e,t,a){a.r(t),a.d(t,{default:function(){return V}});a(18111),a(20116),a(61701),a(69112);var l=a(20641),n=a(50953),i=a(90033),o=a(40834),s=a(78365),u=(a(44114),a(33110),a(73461));const d={class:"AddApproval"},p={class:"box"},r={class:"index",style:{"margin-left":"0"}},m={style:{color:"#428bca"}},c={style:{display:"flex"}},g={style:{display:"flex"}},f=["onClick"],v=["onClick"],b={style:{"text-align":"center","margin-top":"20px"}};var _={__name:"AddApproval",props:{scope:{type:Object,required:!1,default:()=>{}},modelValue:{type:Boolean,required:!0,default:()=>!1},configId:{type:String,required:!1,default:()=>{}}},emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,o.Pj)(),s=e,_=t,{proxy:k}=(0,l.nI)(),h=(0,n.Kh)({formData:{department:"",meetingId:""},pagination:{page:1,per_page:10},formRef:null,organizationList:[],meetingNameList:[],userList:[]}),{formData:I,formRef:y,organizationList:A,meetingNameList:L,userList:F,pagination:R}=(0,n.QW)(h);function V(){s.scope.configId&&(I.value.department=s.scope.committeeDepartmentId-0,I.value.meetingId=s.scope.meetingId,F.value=JSON.parse(s.scope.content)),F.value.length>0?w(I.value.meetingId,"getMeetingInfo"):w(I.value.meetingId,"getAllMeeting")}function w(e,t="getAllMeeting"){const a={Gstypesend:1,meetingid:"",type_vue:1,subject:I.value.subject,department:I.value.department,hide:"",...R.value};"getMeetingInfo"===t&&(a.meetingid=e,a.department=""),k.$Loadimg.showLoading(),k.$http.article[t](a).then(t=>{if(k.$Loadimg.hideLoading(),200===t.status)if(200===t.data.status||1===t.data.status){let{department:a,list:l}=t.data;A.value=a||[],L.value=t.data.list,I.value.meetingId=e}else k.$message.error(t.data.msg)}).catch(e=>{console.error(e)})}(0,l.sV)(()=>{V()});const C=(0,n.Kh)({matchForm:{full_name:"",user_id:""},matchFormRef:null}),{matchForm:D,matchFormRef:x}=(0,n.QW)(C);function $(e){e?.validate(e=>{if(e){const e={committeeId:a.state.user.committeeId,...D.value,type_vue:1};k.$Loadimg.showLoading(),k.$http.supplier.SupplierCheckUser(e).then(e=>{k.$Loadimg.hideLoading(),200===e.status&&(200===e.data.status||1===e.data.status?(F.value.push({full_name:D.value.full_name,user_id:D.value.user_id}),D.value.full_name="",D.value.user_id="",k.$message.success("匹配成功")):k.$message.error(e.data.msg))}).catch(e=>{console.log(e,"err")})}})}function z(e,t,a){if("top"===a){if(0===t)return;F.value.splice(t-1,0,F.value[t]),F.value.splice(t+1,1)}else if("bottom"===a){if(t===F.value.length-1)return;F.value.splice(t+2,0,F.value[t]),F.value.splice(t,1)}}function S(e){k.$confirm("确定删除吗?","提示",{type:"warning"}).then(()=>{k.$message({type:"success",message:"删除成功"}),F.value.splice(e,1)}).catch(()=>{k.$message({type:"info",message:"取消删除"})})}function K(){const e={configId:s.scope.configId,committeeId:a.state.user.committeeId,meetingId:I.value.meetingId,committeeDepartmentId:I.value.department,data:JSON.stringify(F.value),invalid:0};k.$Loadimg.showLoading(),k.$http.supplier.SupplierSupplierRoleSave(e).then(e=>{k.$Loadimg.hideLoading(),200===e.status&&(200===e.data.status||1===e.data.status)?(_("update:modelValue",!1),k.$message.success("保存成功")):k.$message.error(e.data.msg||"保存失败")}).catch(e=>{console.error(e)})}return(e,t)=>{const a=(0,l.g2)("el-option"),o=(0,l.g2)("el-select"),k=(0,l.g2)("el-form-item"),h=(0,l.g2)("el-text"),R=(0,l.g2)("el-form"),V=(0,l.g2)("el-input"),C=(0,l.g2)("el-button"),W=(0,l.g2)("el-tooltip"),U=(0,l.g2)("Top"),B=(0,l.g2)("el-icon"),E=(0,l.g2)("Bottom"),N=(0,l.g2)("DeleteFilled"),Q=(0,l.g2)("vuedraggable");return(0,l.uX)(),(0,l.CE)("div",d,[(0,l.bF)(R,{model:(0,n.R1)(I),ref_key:"formRef",ref:y,inline:!0,size:"default"},{default:(0,l.k6)(()=>[(0,l.bF)(k,{label:"组织机构：",prop:"organization"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{modelValue:(0,n.R1)(I).department,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,n.R1)(I).department=e),onChange:t[1]||(t[1]=()=>w()),placeholder:"请选择组织机构",disabled:!!s.scope.configId,filterable:""},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,n.R1)(A),e=>((0,l.uX)(),(0,l.Wv)(a,{key:e.committeeDepartmentId,label:e.title,value:e.committeeDepartmentId},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),(0,n.R1)(I).department?((0,l.uX)(),(0,l.Wv)(k,{key:0,label:"会议名称：",prop:"meetingName"},{default:(0,l.k6)(()=>[(0,l.bF)(o,{modelValue:(0,n.R1)(I).meetingId,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,n.R1)(I).meetingId=e),placeholder:"全部会议",disabled:!!s.scope.configId,filterable:""},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,n.R1)(L),e=>((0,l.uX)(),(0,l.Wv)(a,{key:e.id,label:e.subject,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"]),(0,l.bF)(h,null,{default:(0,l.k6)(()=>[...t[8]||(t[8]=[(0,l.eW)("（如需配置具体会议审核流程，请选择）",-1)])]),_:1})]),_:1})):(0,l.Q3)("",!0)]),_:1},8,["model"]),t[16]||(t[16]=(0,l.Fv)('<div style="display:flex;font-size:18px;align-items:center;" data-v-28e02128> 审批人设置： <img class="image" style="width:20px;" src="'+u+'" data-v-28e02128><span style="color:red;" data-v-28e02128>*</span><span style="font-size:16px;" data-v-28e02128> 审批人</span><span style="color:#428bca;font-size:12px;" data-v-28e02128>（从上到下依次审批）</span></div>',1)),(0,l.Lk)("div",p,[(0,l.bF)(R,{class:"matchFormRef",model:(0,n.R1)(D),ref_key:"matchFormRef",ref:x,inline:"","inline-message":"",rules:{full_name:[{required:!0,message:"请输入姓名",trigger:"blur"}],user_id:[{required:!0,message:"请输入平台注册号",trigger:"blur"}]}},{default:(0,l.k6)(()=>[(0,l.bF)(k,{label:"姓名：",prop:"full_name"},{default:(0,l.k6)(()=>[(0,l.bF)(V,{modelValue:(0,n.R1)(D).full_name,"onUpdate:modelValue":t[3]||(t[3]=e=>(0,n.R1)(D).full_name=e),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),(0,l.bF)(k,{label:"平台注册号：",prop:"user_id"},{default:(0,l.k6)(()=>[(0,l.bF)(V,{modelValue:(0,n.R1)(D).user_id,"onUpdate:modelValue":t[4]||(t[4]=e=>(0,n.R1)(D).user_id=e),placeholder:"请输入平台注册号"},null,8,["modelValue"])]),_:1}),(0,l.bF)(k,null,{default:(0,l.k6)(()=>[(0,l.bF)(C,{size:"small",type:"primary",onClick:t[5]||(t[5]=e=>$((0,n.R1)(x)))},{default:(0,l.k6)(()=>[...t[9]||(t[9]=[(0,l.eW)("匹配数据",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),(0,l.Lk)("ul",null,[(0,l.bF)(Q,{modelValue:(0,n.R1)(F),"onUpdate:modelValue":t[6]||(t[6]=e=>(0,n.i9)(F)?F.value=e:null),"chosen-class":"chosen","force-fallback":"true",group:"drag",animation:"100",itemKey:"prop"},{item:(0,l.k6)(({element:a,index:n})=>[(0,l.Lk)("li",null,[(0,l.Lk)("div",r,[(0,l.Lk)("i",m,(0,i.v_)(n+1),1)]),(0,l.Lk)("div",null,[t[10]||(t[10]=(0,l.Lk)("span",null,"姓名：",-1)),(0,l.bF)(W,{content:a.full_name,placement:"top",effect:"dark"},{default:(0,l.k6)(()=>[(0,l.bF)(h,{style:{width:"100px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},{default:(0,l.k6)(()=>[(0,l.eW)((0,i.v_)(a.full_name),1)]),_:2},1024)]),_:2},1032,["content"])]),(0,l.Lk)("div",c,[t[11]||(t[11]=(0,l.Lk)("span",null," 平台注册号： ",-1)),(0,l.bF)(h,{style:{width:"60px","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},{default:(0,l.k6)(()=>[(0,l.eW)((0,i.v_)(a.user_id),1)]),_:2},1024)]),(0,l.Lk)("div",g,[t[12]||(t[12]=(0,l.Lk)("span",null," 排序 ",-1)),(0,l.Lk)("div",{class:"icon",onClick:t=>z(e.item,n,"top")},[(0,l.bF)(B,null,{default:(0,l.k6)(()=>[(0,l.bF)(U)]),_:1})],8,f),(0,l.Lk)("div",{class:"icon",onClick:t=>z(e.item,n,"bottom")},[(0,l.bF)(B,null,{default:(0,l.k6)(()=>[(0,l.bF)(E)]),_:1})],8,v)]),(0,l.bF)(C,{type:"default",size:"small",onClick:e=>S(n)},{default:(0,l.k6)(()=>[t[13]||(t[13]=(0,l.eW)("删除",-1)),(0,l.bF)(B,null,{default:(0,l.k6)(()=>[(0,l.bF)(N,{color:"red"})]),_:1})]),_:1},8,["onClick"])])]),_:1},8,["modelValue"])])]),(0,l.Lk)("div",b,[(0,l.bF)(C,{type:"primary",size:"small",onClick:K},{default:(0,l.k6)(()=>[...t[14]||(t[14]=[(0,l.eW)("保存",-1)])]),_:1}),(0,l.bF)(C,{type:"default",size:"small",onClick:t[7]||(t[7]=e=>_("update:modelValue",!1))},{default:(0,l.k6)(()=>[...t[15]||(t[15]=[(0,l.eW)("取消",-1)])]),_:1})])])}}},k=a(66262);const h=(0,k.A)(_,[["__scopeId","data-v-28e02128"]]);var I=h;const y={class:"ReimbursementRule MinHeight"},A={class:"box"},L={class:"pagination"};var F={__name:"ReimbursementRule",setup(e){const t=(0,o.Pj)(),{proxy:a}=(0,l.nI)(),u=(0,n.Kh)({tableData:[],paginateData:{total:0,page:1,per_page:10},dialogVisible:!1,scope:{},departmentList:[]}),{tableData:d,paginateData:p,dialogVisible:r,scope:m,departmentList:c}=(0,n.QW)(u);function g(){r.value=!0}function f(){a.$Loadimg.showLoading();const e={type_vue:1,committeeId:t.state.user.committeeId,page:p.value.page,per_page:p.value.per_page};a.$http.supplier.SupplierGetSupplierRoleList(e).then(e=>{a.$Loadimg.hideLoading(),1!==e.data.status&&200!==e.data.status||(d.value=e.data.list.map(e=>{const{meetingId:t}=e;return e.meetingName="",t&&h(e),e}),u.paginateData={total:e.data.total,page:e.data.page,per_page:e.data.per_page})}).catch(e=>{console.log(e,"err")})}function v(e){r.value=!0,u.scope=e}function b(e){a.$confirm("确认删除该条审批配置吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const t={configId:e.configId,committeeId:e.committeeId,meetingId:e.meetingId,committeeDepartmentId:e.committeeDepartmentId,data:e.content,invalid:1};a.$Loadimg.showLoading(),a.$http.supplier.SupplierSupplierRoleSave(t).then(e=>{200===e.status&&(a.$Loadimg.hideLoading(),200===e.data.status||1===e.data.status?(f(),a.$message.success("删除成功")):a.$message.error("删除失败"))}).catch(e=>{console.log(e,"err")})}).catch(()=>{a.$message({type:"info",message:"取消删除"})})}function _(e){e=e||JSON.parse(e);const t=JSON.parse(e).map(e=>e.full_name);return t.join("/")}function k(e){let t="";const{committeeDepartmentId:a,meetingId:l}=e.row;return a?(t=c.value.find(e=>e.committeeDepartmentId==a)?.title,t=l?(t||"")+"/"+e.row.meetingName:t,t):""}async function h(e){const t={Gstypesend:1,meetingid:e.meetingId,type_vue:1,subject:"",department:"",hide:""},l=await a.$http.article.getMeetingInfo(t);if(200===l.status)if(200===l.data.status||1===l.data.status){let{department:t,list:a}=l.data;c.value=t||[],e.meetingName=a?.subject}else a.$message.error(l.data.msg);return l}return(0,l.wB)(()=>u.paginateData,async(e,t)=>{e&&0!==t.total&&(t&&t.page===e.page&&t.per_page===e.per_page||f())},{deep:!0}),(0,l.wB)(()=>t.state.user.committeeId,e=>{e&&f(),e&&h({})},{immediate:!0}),(e,t)=>{const a=(0,l.g2)("el-button"),o=(0,l.g2)("el-dialog"),c=(0,l.g2)("el-table-column"),h=(0,l.g2)("el-table");return(0,l.uX)(),(0,l.CE)("div",y,[(0,l.Lk)("div",A,[t[7]||(t[7]=(0,l.Lk)("div",{class:"title"},[(0,l.Lk)("span",{class:"right_bule"}),(0,l.Lk)("span",null,"审批人员配置")],-1)),(0,l.bF)(a,{type:"primary",size:"small",style:{margin:"20px 0"},onClick:g},{default:(0,l.k6)(()=>[...t[4]||(t[4]=[(0,l.eW)("新增审批配置",-1)])]),_:1}),(0,l.bF)(o,{title:"新增审批配置",modelValue:(0,n.R1)(r),"onUpdate:modelValue":t[1]||(t[1]=e=>(0,n.i9)(r)?r.value=e:null),width:"850",onClosed:t[2]||(t[2]=()=>{u.scope={},f()})},{default:(0,l.k6)(()=>[(0,n.R1)(r)?((0,l.uX)(),(0,l.Wv)(I,{key:0,modelValue:(0,n.R1)(r),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,n.i9)(r)?r.value=e:null),scope:(0,n.R1)(m)},null,8,["modelValue","scope"])):(0,l.Q3)("",!0)]),_:1},8,["modelValue"]),(0,l.bF)(h,{data:(0,n.R1)(d)},{default:(0,l.k6)(()=>[(0,l.bF)(c,{label:"序号",type:"index"}),(0,l.bF)(c,{label:"组织机构/会议名称",prop:"committeeDepartmentId"},{default:(0,l.k6)(e=>[(0,l.eW)((0,i.v_)(k(e)),1)]),_:1}),(0,l.bF)(c,{label:"姓名",prop:"content"},{default:(0,l.k6)(e=>[(0,l.eW)((0,i.v_)(_(e.row.content)),1)]),_:1}),(0,l.bF)(c,{label:"操作"},{default:(0,l.k6)(e=>[(0,l.bF)(a,{type:"primary",size:"small",link:"",onClick:t=>v(e.row)},{default:(0,l.k6)(()=>[...t[5]||(t[5]=[(0,l.eW)("编辑",-1)])]),_:1},8,["onClick"]),(0,l.bF)(a,{type:"primary",size:"small",link:"",onClick:t=>b(e.row)},{default:(0,l.k6)(()=>[...t[6]||(t[6]=[(0,l.eW)("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),(0,l.Lk)("div",L,[(0,l.bF)(s.A,{modelValue:(0,n.R1)(p),"onUpdate:modelValue":t[3]||(t[3]=e=>(0,n.i9)(p)?p.value=e:null),layout:"prev, pager, next, sizes, total","page-sizes":[10,20,30,50]},null,8,["modelValue"])])])])}}};const R=(0,k.A)(F,[["__scopeId","data-v-1a370f5c"]]);var V=R},73461:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAVCAYAAABPPm7SAAAAAXNSR0IArs4c6QAAAY9JREFUOE/N07EvA3EUB/Dv99reXaV1FksHi/gHJBYLiYREIr1uYpCORsTQsDAIEmLsKGIQlrsaxEDCIP4Ao8HA1oEr4qp6T2hUT69KJ7/t3nu/T97v3u9HBCznINKHsrIAYgRAmMS5AKtGsnj0vZzfA3eWPkjKIYFoXbFgrj1V3KiN+wDZh1rQtCsIuoI6A1CKQOluM59vPvM+oGCpppBWg82VsHDJSLmLgYBjadMgNpsA20bKTTfoQE8LZetHANg0zOJsIJDPtSVUKV8DUIMQAp4S4nBszD0JBN6Djq3NQLAOQqlDyF0j6U40nMJnomCr8wIu+wHuGKY72fQefHSRi45DvN3aYgHWOsxi5lfAva1mCK74Ae51mO74LwEtS2DKXywXhvnSXwc8HUR6S55iU6BXk0QcqPmuJF4huKv+fcILh8opOrZ2DGCoyewbpY95b+mnpAy0Aojw7D8AOW2KgmwrR/AEMx/P+eEw1kmR0F8QIcvx0cc8HVvfBiTxl81fD0lu38d4RKKnFQDA5RtcEotK69RUCgAAAABJRU5ErkJggg=="},78365:function(e,t,a){a.d(t,{A:function(){return u}});var l=a(20641),n=a(50953);const i={class:"paginated"};var o={__name:"index",props:["modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){const a=e,o=t,s=(0,n.Kh)({page:1,per_page:10,total:0});(0,l.wB)(()=>a.modelValue,e=>{a.modelValue&&(s.page=e.page,s.per_page=e.per_page,s.total=e.total)});const{page:u,per_page:d,total:p}=(0,n.QW)(s),r=e=>{s.per_page=e},m=e=>{s.page=e};return(0,l.wB)(()=>s,e=>{o("update:modelValue",{...e})},{deep:!0}),(e,t)=>{const a=(0,l.g2)("el-pagination");return(0,l.uX)(),(0,l.CE)("div",i,[(0,l.bF)(a,(0,l.v6)({"current-page":(0,n.R1)(u),"onUpdate:currentPage":t[0]||(t[0]=e=>(0,n.i9)(u)?u.value=e:null),"page-size":(0,n.R1)(d),"onUpdate:pageSize":t[1]||(t[1]=e=>(0,n.i9)(d)?d.value=e:null),"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:(0,n.R1)(p),size:"small",onSizeChange:r,onCurrentChange:m},e.$attrs),null,16,["current-page","page-size","total"])])}}};const s=o;var u=s}}]);